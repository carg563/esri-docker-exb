System.register(["jimu-core","jimu-for-builder/service","jimu-theme","jimu-ui"],(function(e,t){var i={},s={},a={},o={};return{setters:[function(e){i.FormattedDate=e.FormattedDate,i.Immutable=e.Immutable,i.React=e.React,i.SessionManager=e.SessionManager,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.jsx=e.jsx,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.privilegeUtils=e.privilegeUtils,i.queryString=e.queryString,i.urlUtils=e.urlUtils},function(e){s.AppType=e.AppType,s.SearchType=e.SearchType,s.appServices=e.appServices},function(e){a.withTheme=e.withTheme},function(e){o.AlertPopup=e.AlertPopup,o.Button=e.Button,o.Card=e.Card,o.CardBody=e.CardBody,o.Container=e.Container,o.Dropdown=e.Dropdown,o.DropdownItem=e.DropdownItem,o.DropdownMenu=e.DropdownMenu,o.DropdownToggle=e.DropdownToggle,o.Icon=e.Icon,o.Modal=e.Modal,o.ModalBody=e.ModalBody,o.ModalFooter=e.ModalFooter,o.ModalHeader=e.ModalHeader,o.Option=e.Option,o.Select=e.Select,o.TagInput=e.TagInput,o.TextArea=e.TextArea,o.TextInput=e.TextInput,o.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={371:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.036 12.157l8.01-8.01a.5.5 0 11.707.707l-8.01 8.01a1 1 0 01-1.415 0L1.146 8.682a.5.5 0 11.708-.707l4.182 4.182z" fill="#000"></path></svg>'},369:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 7a1 1 0 100 2 1 1 0 000-2zm5 1a1 1 0 112 0 1 1 0 01-2 0zm6 0a1 1 0 112 0 1 1 0 01-2 0z" fill="#000"></path></svg>'},159:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 1h5v5H1V1zM0 1a1 1 0 011-1h5a1 1 0 011 1v6H1a1 1 0 01-1-1V1zm1 9h5v5H1v-5zm-1 0a1 1 0 011-1h6v6a1 1 0 01-1 1H1a1 1 0 01-1-1v-5zm15 0h-5v5h5v-5zM9 9v6a1 1 0 001 1h5a1 1 0 001-1v-5a1 1 0 00-1-1H9zm1-8h5v5h-5V1zM9 1a1 1 0 011-1h5a1 1 0 011 1v5a1 1 0 01-1 1H9V1z" fill="#000"></path></svg>'},484:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 2.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM5.5 2a.5.5 0 000 1h10a.5.5 0 000-1h-10zM5 8.5a.5.5 0 01.5-.5h10a.5.5 0 010 1h-10a.5.5 0 01-.5-.5zm.5 5.5a.5.5 0 000 1h10a.5.5 0 000-1h-10zm-4-4a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM3 14.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" fill="#000"></path></svg>'},467:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4zm0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3zm0 5.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5zm0-1a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" fill="#000"></path></svg>'},788:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.146 4.653a.485.485 0 01.708 0L8 10.24l5.146-5.587a.485.485 0 01.708 0 .538.538 0 010 .738l-5.5 5.956a.485.485 0 01-.708 0l-5.5-5.956a.538.538 0 010-.738z" fill="#000"></path></svg>'},339:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.745 8l6.1 6.1a.527.527 0 11-.745.746L8 8.746l-6.1 6.1a.527.527 0 11-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 01.746-.746l6.1 6.1 6.1-6.1a.527.527 0 01.746.746L8.746 8z" fill="#000"></path></svg>'},933:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 1H1v14h14v-5h-1v4H2V2h4V1zm4 1h3.242L7.257 7.985l.707.707L14 2.657V6h1V1h-5v1z" fill="#000"></path></svg>'},750:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 0a.5.5 0 00-.5.5V7H.5a.5.5 0 000 1H7v6.5a.5.5 0 001 0V8h6.5a.5.5 0 000-1H8V.5a.5.5 0 00-.5-.5z" fill="#000"></path></svg>'},224:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5a5.5 5.5 0 11-11 0 5.5 5.5 0 0111 0zm-1.27 4.936a6.5 6.5 0 11.707-.707l4.136 4.137a.5.5 0 11-.707.707l-4.137-4.137z" fill="#000"></path></svg>'},378:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},180:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 7a3 3 0 100-6 3 3 0 000 6zm0 1a4 4 0 110-8 4 4 0 010 8zm1 2H7a6.002 6.002 0 00-5.917 5h13.834A6.002 6.002 0 009 10zM7 9h2a7 7 0 017 7H0a7 7 0 017-7zm.646 3.721l1.768-1.767a.5.5 0 11.707.707l-2.475 2.475-1.767-1.768a.5.5 0 01.707-.707l1.06 1.06z" fill="#000" fill-rule="nonzero"></path></svg>'},323:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1a7 7 0 000 14zm0 1A8 8 0 118 0a8 8 0 010 16zm2.544-8L6.455 4.986v6.028L10.545 8zm.556.802l-4.09 3.014a.937.937 0 01-1.332-.229 1.008 1.008 0 01-.178-.573V4.986c0-.545.428-.986.955-.986.2 0 .394.064.556.184L11.1 7.198a1.006 1.006 0 010 1.604z" fill="#000" fill-rule="nonzero"></path></svg>'},619:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 0a2 2 0 012 2v8.5a.5.5 0 01-1 0V2a1 1 0 00-1-1H2a1 1 0 00-1 1v12a1 1 0 001 1h8.5a.5.5 0 010 1H2a2 2 0 01-2-2V2a2 2 0 012-2h12zm-1.074 12.196l2.923 2.922a.517.517 0 01-.73.73l-2.923-2.922a.517.517 0 01.73-.73zM8 3a5 5 0 110 10A5 5 0 018 3zm0 1a4 4 0 100 8 4 4 0 000-8z" fill="#000" fill-rule="nonzero"></path></svg>'},221:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a8 8 0 100 16A8 8 0 008 0zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 00.16-.55c.039.027.08.055.112.08h.001zm-.372-.95l.207.072a.803.803 0 00-.428.158.406.406 0 01.222-.23h-.001zM7.792 1.01c.212-.019.426-.015.638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085h-.001zM2.527 12.357a7.018 7.018 0 01-.414-.58c.2.125.394.26.58.405a.918.918 0 00-.166.175zm7.606 2.31a6.986 6.986 0 01-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 00-.222-.427 6.967 6.967 0 011.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9.072-.11.126-.232.157-.36.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337.083-.15.183-.29.3-.416a6.936 6.936 0 011.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138-.1.072-.194.153-.28.242a.59.59 0 00-.223-.321.669.669 0 00-.735-.596.599.599 0 00-.147 1.122c.01.197.12.376.292.473-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 00-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 011.257.134c.09.021.181.057.1.298a.596.596 0 00.133.739.275.275 0 01.11.19c.05.639-.197.474-.47 1.01v.001zm.383-8.91l.2.098a.313.313 0 01.255-.052c.37.233.57.424.93.066.12.1.23.214.325.339a.593.593 0 00.914.493c.214.276.447.177.757.255.04.091.07.186.088.284-.164.077-.34.123-.52.136-.114-.03-.231-.125-.35-.125a.533.533 0 00-.656.356 1.398 1.398 0 01-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 00.094-.14.838.838 0 00.315-.284l-.113-.209zm-.996.222a.732.732 0 00-.064.138c0-.055.002-.102.005-.147l.059.01v-.001zm1.844 8.16a1.248 1.248 0 00-.241-1.173.955.955 0 00-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 00-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 00-.112-.342.945.945 0 00-.935-.511.8.8 0 00-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 00-.705-.183.798.798 0 00-.36-.04 5.501 5.501 0 00-.033-.098.782.782 0 00.065-.216.87.87 0 00.691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 01-.786 11.766v.001z" fill="#000" fill-rule="nonzero"></path></svg>'},298:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 2a2 2 0 10-4 0 2 2 0 004 0zM6 3a1 1 0 110-2 1 1 0 010 2zM4 7h1v5a1 1 0 01-1-1H3a1 1 0 01-1-1V6a2 2 0 012-2h3.78a3.05 3.05 0 00-.596 1H4a1 1 0 00-1 1v4h1V7zm8-1a2 2 0 10-4 0 2 2 0 004 0zm-2 1a1 1 0 110-2 1 1 0 010 2zm2 1H8a2 2 0 00-2 2v4a1 1 0 001 1h1a1 1 0 001 1h2a1 1 0 001-1h1a1 1 0 001-1v-4a2 2 0 00-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 011-1h4a1 1 0 011 1v1z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},430:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a4 4 0 014 4v3a2 2 0 012 2v5a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2V4a4 4 0 014-4zm4 8H4a1 1 0 00-1 1v5a1 1 0 001 1h8a1 1 0 001-1V9a1 1 0 00-1-1zM8 9v1h1v1H8v1h1v1H8v1H7V9h1zm0-8a3 3 0 00-3 3v3h1V4a2 2 0 114 0v3h1V4a3 3 0 00-3-3zm0 2a1 1 0 00-1 1v3h2V4a1 1 0 00-1-1z" fill="#000" fill-rule="nonzero"></path></svg>'},744:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M9 3V2a1 1 0 00-1-1H4a1 1 0 00-1 1v1a2 2 0 00-2 2v9a2 2 0 002 2h5v-4h1v4h5a2 2 0 002-2V5a2 2 0 00-2-2H9zm1 12v-3a1 1 0 00-1-1H8a1 1 0 00-1 1v3H3a1 1 0 01-1-1V5a1 1 0 011-1h1V2h4v2h6a1 1 0 011 1v9a1 1 0 01-1 1h-4zM7 9h3V6H7v3zm1-2h1v1H8V7zm3-1v3h3V6h-3zm2 2h-1V7h1v1zM3 9h3V6H3v3zm1-2h1v1H4V7z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},611:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="#000" fill-rule="nonzero" d="M8 .5l2.373 5.07L16 6.23l-4.16 3.792 1.104 5.478L8 12.773 3.056 15.5l1.102-5.478L0 6.229l5.625-.66z"></path><path d="M0 0h16v16H0z"></path></g></svg>'},682:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 .5l2.373 5.07L16 6.23l-4.16 3.792 1.104 5.478L8 12.773 3.056 15.5l1.102-5.478L0 6.229l5.625-.66L8 .5zm1.704 5.998L7.999 2.857 6.294 6.498l-4.002.469L5.25 9.664l-.789 3.918L8 11.631l3.537 1.951-.788-3.918 2.957-2.697-4.002-.469z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},6:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 011.415 0l2.12 2.121a1 1 0 010 1.414l-8.935 8.937a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.087l.212-2.333a1 1 0 01.289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 010 1H.5a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},957:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 3c2.583 0 5.166 1.45 7.75 4.349a.972.972 0 010 1.302C13.166 11.551 10.583 13 8 13S2.834 11.55.25 8.651a.972.972 0 010-1.302C2.834 4.449 5.417 3 8 3zm0 1C5.763 4 3.442 5.303 1.039 8 3.442 10.697 5.763 12 8 12s4.558-1.303 6.961-4C12.558 5.303 10.237 4 8 4zm0 7a3 3 0 110-6 3 3 0 010 6zm0-1a2 2 0 100-4 2 2 0 000 4z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},810:e=>{"use strict";e.exports=i},396:e=>{"use strict";e.exports=s},16:e=>{"use strict";e.exports=a},835:e=>{"use strict";e.exports=o}},t={};function l(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,l),a.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{default:()=>ce});var e,t,i,s,a,o,n,p,c=l(810);!function(e){e.Me="me",e.NotMe="notme",e.Anyone="anyone",e.MyFavorites="MyFavorites",e.Public="Public",e.Default="Default"}(e||(e={})),function(e){e.AllFolder="AllFolder",e.OtherFolder="OtherFolder"}(t||(t={})),function(e){e.AllGroup="AllGroup",e.Org="Org",e.OtherGroup="OtherGroup"}(i||(i={})),function(e){e.Default="Default",e.My="My",e.Shared="Shared"}(s||(s={})),function(e){e.Modified="modified",e.Title="title",e.NumViews="numViews"}(a||(a={})),function(e){e.Org="Org",e.Group="Group",e.OrgAndGroupNotMe="OrgAndGroupNotMe",e.ExbAdmin="ExbAdmin",e.My="My",e.Folder="Folder",e.All="All",e.Favorites="Favorites",e.AllFavorites="AllFavorites",e.PubLic="Public"}(o||(o={})),function(e){e.OrgAdmin="org_admin",e.OrgPublisher="org_publisher",e.OrgUser="org_user",e.CustomRoles="custom_roles"}(n||(n={})),function(e){e.Published="Published",e.Draft="Draft",e.Changed="Changed"}(p||(p={}));var d=l(835);const h=c.React.createContext({deleteApp:e=>{},refreshList:()=>{},duplicateAppItem:e=>{},createApp:e=>{},favoriteTogle:(e,t)=>{return i=void 0,s=void 0,o=function*(){return yield Promise.resolve(!0)},new((a=void 0)||(a=Promise))((function(e,t){function l(e){try{n(o.next(e))}catch(e){t(e)}}function r(e){try{n(o.throw(e))}catch(e){t(e)}}function n(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(l,r)}n((o=o.apply(i,s||[])).next())}));var i,s,a,o},getFolderList:()=>{},isLoadSkeleton:!1,theme:null,skeletonNum:null});var m=l(16);const u={homePageSearch:"Search",newApp:"Create new",labelByModified:"Recent experiences",labelByTitle:"Experiences sorted by title",labelByView:"Experiences sorted by view count",templateLabelByModified:"Recent templates",templateLabelByTitle:"Templates sorted by title",templateLabelByView:"Templates sorted by view count",ownByMe:"Owned by me",ownByAnyone:"Owned by anyone",sharedWithMe:"Shared with me",orderByModified:"Last modified",orderByTitle:"Title",orderByView:"Most views",applistViews:"View count",applistItemViews:"Views",applistView:"view",editInfo:"Edit info",viewDetail:"View details",appListDelete:"Delete",appListName:"Name",appListDescription:"Description",download:"Download",editExperienceInfo:"Edit experience info",editExperienceTemplateInfo:"Edit experience template info",launchApp:"Launch",appListMore:"More",popUpOk:"OK",popUpCancel:"Cancel",popUpTitle:"Warning",popUpDiscription1:"You don't have permission to edit this web experience. Currently, you can only edit your own items.",popUpDiscription2:"You can view or duplicate it.",descriptionRemind:"Here is the description of the item.",editThumbnail:"Edit thumbnail",itemDeleteRemind:"Are you sure you want to delete this item?",untitledExperience:"Untitled experience",webExperience:"Web Experience",webExperienceTemplate:"Web Experience Template",createExperience:"Create your first experience",toCreate:"Click {createNewElement} to start a new experience",click:"Click",appListEdit:"Edit",everyone:"Shared: Everyone",noOne:"Shared: No One",organization:"Shared: Organization",group:"Shared: Group",appListPublished:"Published",appListDraft:"Draft",unpublishedChanges:"Unpublished changes",appTypeTemplate:"Experience Template",appTypeExperience:"Experience",publishedTitle:"This item can be viewed by users you've shared with.",publishedUnsaveTitle:"There are unpublished changes since last publishing.",itemStatusDraft:"Draft",draftStatusTitle:"This item is not published. It can only be viewed by you.",cardView:"Card view",listView:"List view",createNewTitle:"Create a new experience from this template",itemDescribtion:"Here is the description of the item.",editAppErrorMessage:"You have specified an image type that is not supported. Please use one of these types: PNG, GIF or JPEG.",favorites:"Favorites",myFavorites:"My favorites",itemInFavorites:"Item in Favorites",addFavorites:"Add to favorites",removeFromFavorites:"Remove from Favorites",noItemsYet:"No items yet.",templateEmptyText:"You can generate a template from an experience in the builder.",sharedEmptyText:"No items are shared with you. ",favoritesEmptyText:"When you find an item you like, click Add to Favorites to see it here.",noPublicItems:"No public items.",publicTemplate:"Public",allApp:"All",myOrg:"Organization",defaultTemplate:"Default",unableDelete:"Item could not be deleted since it is delete protected.",deleteError:"There was a problem deleting this application.",createError:"There was a problem when create new application.",duplicateError:"There was a problem when duplicate application.",noResource:"Resource does not exist or is inaccessible",noSearchResult:"No experiences found. Please try other search criteria.",noTemplates:"No templates found. Please try other search criteria.",tags:"Tags",tagsLowerCase:"tags",summaryField:"Summary",summaryPlaceholder:"Enter a summary",saveInFolder:"Save in folder"};var g=l(396),v=l(339),f=l.n(v);const w=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:f()},i))};var b=function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function l(e){try{n(s.next(e))}catch(e){o(e)}}function r(e){try{n(s.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};class x extends c.React.PureComponent{constructor(e){var t,i,s,a;super(e),this.__unmount=!1,this.supportedResourceSuffix={IMAGE:[".png",".jpeg",".jpg",".gif",".bmp"]},this.getItemData=()=>{const{appItem:e}=this.props;g.appServices.getAppInfo(e).then((e=>{this.updateAppItem(e)}),(e=>{console.error(e)}))},this.updateAppItem=e=>{var t;const{appItem:i,appIndex:s}=this.props;for(const t in e)i[t]=e[t];this.setState({localAppItem:(0,c.Immutable)(i)},(()=>{this.updateState()})),null===(t=null==this?void 0:this.props)||void 0===t||t.updateAppList(i,s)},this.updateState=()=>{const{localAppItem:e}=this.state,t=((null==e?void 0:e.tags.asMutable())||[]).filter((e=>e||!1));this.setState({currentTitleInput:e.title,currentDescriptInput:e.description?e.description:"",summary:(null==e?void 0:e.snippet)||"",tags:t,ownerFolder:e.ownerFolder||"/"})},this.uploadThumbnail=()=>b(this,void 0,void 0,(function*(){const e=this.getFiles();if(!e)return yield Promise.resolve(!0);const t=c.SessionManager.getInstance().getSessionByUrl(this.props.portalUrl),i={id:this.props.appItem.id,f:"json",token:null==t?void 0:t.token,thumbnail:e[0]};return yield g.appServices.updateAppThumbnail(i,this.props.appItem.owner).then((()=>b(this,void 0,void 0,(function*(){return this.isUpdateThumbnail=!0,yield Promise.resolve(!0)}))),(e=>b(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.getFiles=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return!1;const t=e[0].name,i="."+t.split(".")[t.split(".").length-1];if(!this.supportedResourceSuffix.IMAGE.includes(i.toLowerCase()))return this.handleToggle(),!1;const s=window.URL.createObjectURL(e[0]);return this.setState({files:s}),e},this.titleInputChange=(e,t=!1)=>{let i=e.target.value;i=i.length>250?i.slice(0,250):i;let s=(0,c.Immutable)(this.state.localAppItem);window.jimuConfig.isDevEdition&&(s=s.set("text","")),t&&(i=/^[ ]*$/.test(i)?this.props.appItem.title:i,i=i.replace(/(^\s*)|(\s*$)/g,"")),s=s.set("title",i),this.setState({localAppItem:s,currentTitleInput:i})},this.descriptInputChange=e=>{let t=(0,c.Immutable)(this.state.localAppItem);window.jimuConfig.isDevEdition&&(t=t.set("text","")),t=t.set("description",e),this.setState({currentDescriptInput:e,localAppItem:t})},this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:u[e]}):e,this.nlsCommonMessage=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:c.defaultMessages[e]}):c.defaultMessages[e],this.onConfirm=()=>{this.setState({loading:!0}),this.uploadThumbnail().then((()=>{this.changeItemsFolder().then((()=>{this.updateAppInfo()}),(e=>{this.setState({loading:!1}),console.error(e)}))}),(e=>{this.setState({loading:!1}),console.error(e)}))},this.updateAppInfo=()=>{const{appIndex:e}=this.props,t=this.state.localAppItem.asMutable({deep:!0});t.clearEmptyFields=!0,g.appServices.updateAppInfo(t).then((()=>{var i;this.isUpdateThumbnail?this.getItemData():null===(i=null==this?void 0:this.props)||void 0===i||i.updateAppList(t,e),this.setState({loading:!1}),this.props.onEditInfoOk()}),(e=>{this.setState({loading:!1}),console.error(e)}))},this.changeItemsFolder=()=>b(this,void 0,void 0,(function*(){const{id:e}=this.props.appItem,t=this.props.appItem.ownerFolder||"/",{ownerFolder:i}=this.state,s={itemId:e,folderId:this.state.ownerFolder,authentication:null};return t!==i&&i?yield g.appServices.changeAppFolder(s).then((()=>b(this,void 0,void 0,(function*(){const e=(0,c.Immutable)(this.state.localAppItem);return e.set("ownerFolder",i),this.setState({localAppItem:e}),yield Promise.resolve(!0)}))),(e=>b(this,void 0,void 0,(function*(){return yield Promise.reject(!1)})))):yield Promise.resolve(!0)})),this.nameOnChange=e=>{let t=e.target.value;t.length>250&&(t=t.slice(0,250)),this.setState({currentTitleInput:t})},this.getUserTags=()=>{if(window.jimuConfig.isDevEdition)return!1;const e=(0,c.getAppStore)().getState().user.username;g.appServices.getUserTags(e).then((e=>{var t;const i=null===(t=null==e?void 0:e.tags)||void 0===t?void 0:t.map((e=>e.tag));this.setState({userTags:i||[]})}))},this.getThumbnailUrl=()=>{const e=this.props.appItem.thumbnail;let t=e;const i=c.SessionManager.getInstance().getSessionByUrl(this.props.portalUrl);return t=t?this.props.portalUrl+"/sharing/rest/content/items/"+this.props.appItem.id+"/info/"+t+"?token="+(null==i?void 0:i.token):this.props.folderUrl+"./dist/runtime/assets/defaultthumb.png",e&&window.jimuConfig.isDevEdition&&(t=window.location.origin+"/apps/"+this.props.appItem.id+"/"+e),t},this.alignButtonWidth=(e,t)=>{this[e]=t},this.handleToggle=()=>{const{isShowAlertPopup:e}=this.state;this.setState({isShowAlertPopup:!e})},this.descriptionEditorFocus=e=>{e.stopPropagation(),this.props.setDescribtionFocusStatus(!0),this.setState({isDescriptionEditorEnabled:!0})},this.editInfoContentClick=e=>{var t;const i=e.target||e.srcElement;e.stopPropagation(),i&&(null===(t=null==i?void 0:i.className)||void 0===t?void 0:t.indexOf("info-content-textarea"))<0&&(this.props.setDescribtionFocusStatus(!1),this.setState({isDescriptionEditorEnabled:!1}))},this.onTagInputChange=e=>{const t=Object.assign({},this.state.localAppItem);t.tags=(0,c.Immutable)(e),this.setState({tags:e,localAppItem:(0,c.Immutable)(t)})},this.onSummaryChange=(e,t=!1)=>{e.stopPropagation();let i=e.target.value;window.jimuConfig.isDevEdition||(i=i.length>250?i.slice(0,250):i);let s=(0,c.Immutable)(this.state.localAppItem);t&&(i=i&&i.replace(/(^\s*)|(\s*$)/g,"")),s=s.set("snippet",i),this.setState({localAppItem:s,summary:i})},this.onFolderChange=e=>{const t=e.target.value;this.setState({ownerFolder:t})},this.state={localAppItem:(0,c.Immutable)(this.props.appItem),currentTitleInput:this.props.appItem.title,currentDescriptInput:this.props.appItem.description?this.props.appItem.description:"",summary:(null===(i=null===(t=null==this?void 0:this.props)||void 0===t?void 0:t.appItem)||void 0===i?void 0:i.snippet)||"",loading:!1,files:"",buttonWidth:"",isShowAlertPopup:!1,isDescriptionEditorEnabled:!1,RichTextEditor:null,tags:(null===(a=null===(s=null==this?void 0:this.props)||void 0===s?void 0:s.appItem)||void 0===a?void 0:a.tags)||[],userTags:[],ownerFolder:this.props.appItem.ownerFolder||"/"},this.fileInput=c.React.createRef(),this.isUpdateThumbnail=!1}componentDidMount(){var e;this.getUserTags(),this.getItemData(),null===(e=null==this?void 0:this.context)||void 0===e||e.getFolderList()}getStyle(){const e=this.props.theme,{buttonWidth:t}=this.state,i=e.colors&&e.colors.palette?e.colors.palette.dark[300]:"#9fa4a7",s=e.colors&&e.colors.palette?e.colors.palette.light[300]:"#282828",a=e.colors&&e.colors.palette?e.colors.palette.light[800]:"#6a6a6a",o=e.colors&&e.colors.palette?e.colors.palette.dark[400]:"#a8a8a8",l=e.colors&&e.colors.palette?e.colors.palette.primary[700]:"#00D8ED";return c.css`
      .app-editinfo {
        width: ${c.polished.rem(700)};
        height: auto;
        left: 50%;
        top: 50%;
        margin-left: ${c.polished.rem(-350)};
        transform: translateY(-50%);
        background: ${s};
        border: 1px solid ${a};
        padding-bottom: ${c.polished.rem(30)};
        .info-title {
          height: ${c.polished.rem(54)};
          border-bottom: 1px solid ${a};
          font-weight: 500;
        }

        .info-title-text {
          padding-left: ${c.polished.rem(30)};
          font-size: ${c.polished.rem(16)};
          color: ${o};
          overflow: hidden;
          max-width: 85%;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .info-title-close {
          margin-right: ${c.polished.rem(30)};
          cursor: pointer;
        }
        .input-wrapper {
          border: none;
        }
        .tag-text-input-container {
          -webkit-appearance: none;
        }
        .info-content {
          padding: ${c.polished.rem(40)} ${c.polished.rem(30)} 0;
          height: calc(100% - ${c.polished.rem(55)});

          .info-content-pic {
            width: ${c.polished.rem(240)};
            height: ${c.polished.rem(160)};
            background-size: cover;
            background-position: top center;
            margin-right: ${c.polished.rem(20)};
          }
          .edit-thumbnail-btn {
            width: ${c.polished.rem(240)};
            margin-top: ${c.polished.rem(11)};
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-sizing: border-box;
            display: block;
          }
          .edit-thumbnail-btn-con:hover .edit-thumbnail-btn {
            background: ${a};
          }
          .edit-thumbnail-inp {
            bottom: 0;
            left: 0;
            width: ${c.polished.rem(240)};
            height: ${c.polished.rem(34)};
            opacity: 0;
            cursor: pointer;
          }
          .info-content-btn-group {
            padding-top: ${c.polished.rem(36)};
          }

          .info-content-otherinfo {
            width: ${c.polished.rem(450)};

            .info-content-label {
              font-size: ${c.polished.rem(14)};
              line-height: ${c.polished.rem(18)};
              color: ${i};
              font-weight: 600;
              margin-bottom: ${c.polished.rem(10)} !important;
              overflow: hidden;
              text-overflow: ellipsis;
              box-sizing: border-box;
              max-width: ${c.polished.rem(380)};
            }

            .info-title-input {
              margin-bottom: ${c.polished.rem(16)};
            }

            .info-content-text {
            }
            .info-content-textarea-con {
              height: ${c.polished.rem(80)};
              margin-bottom: ${c.polished.rem(16)};
            }
            .info-content-textarea {
              width: ${c.polished.rem(378)};
              height: ${c.polished.rem(80)};
              resize: none;
              padding: ${c.polished.rem(4)} ${c.polished.rem(6)};
              box-sizing: border-box;
              font-size: ${c.polished.rem(14)};
            }
            .focus {
              border-color: ${l};
            }
            .info-content-btn {
              min-width: ${t||c.polished.rem(100)};
            }
            .select-choices-con {
              margin-bottom: ${c.polished.rem(16)};
            }
          }
        }
      }
    `}render(){const e=this.getThumbnailUrl(),t=this.props.theme.colors&&this.props.theme.colors.palette?this.props.theme.colors.palette.dark[400]:"#a8a8a8",{isShowAlertPopup:i,tags:s,userTags:a,summary:o,ownerFolder:l}=this.state,{folderListData:r}=this.props;return(0,c.jsx)("div",{css:this.getStyle(),className:"edit-info-con",onClick:e=>{this.editInfoContentClick(e)},"data-testid":"editInfo"},(0,c.jsx)("div",{className:"app-editinfo position-fixed"},(0,c.jsx)("div",{className:"bg-light-300 info-title align-items-center d-flex justify-content-between"},(0,c.jsx)("div",{className:"info-title-text",title:this.nls("editExperienceInfo")},this.props.isTemplateList?this.nls("editExperienceTemplateInfo"):this.nls("editExperienceInfo")),(0,c.jsx)(d.Button,{icon:!0,type:"tertiary",className:"info-title-close",onClick:e=>{e.stopPropagation(),this.props.onEditInfoCancel()}},(0,c.jsx)(w,{color:t}))),(0,c.jsx)("div",{className:"bg-light-300 info-content"},(0,c.jsx)("div",{className:"d-flex justify-content-center"},(0,c.jsx)("div",null,(0,c.jsx)("div",{"data-testid":"thumbnailCon",className:"info-content-pic",style:{backgroundImage:"url("+(this.state.files||e)+")"}}),(0,c.jsx)("div",{className:"position-relative edit-thumbnail-btn-con"},(0,c.jsx)(d.Button,{className:"edit-thumbnail-btn",title:this.nls("editThumbnail"),onClick:this.updateAppInfo},this.nls("editThumbnail")),(0,c.jsx)("input",{"data-testid":"thumbnailInput",title:this.nls("editThumbnail"),ref:this.fileInput,className:"position-absolute edit-thumbnail-inp",type:"file",accept:".png, .jpeg, .jpg, .gif, .bmp",onChange:this.getFiles}))),(0,c.jsx)("div",{className:"info-content-otherinfo"},(0,c.jsx)("div",{className:"info-content-label",title:this.nls("appListName")},this.nls("appListName")),(0,c.jsx)(d.TextInput,{value:this.state.currentTitleInput,className:"info-title-input",onChange:this.nameOnChange,onBlur:e=>{this.titleInputChange(e,!0)},onKeyUp:e=>{this.titleInputChange(e)}}),(0,c.jsx)("div",{className:"info-content-label",title:this.nls("summaryField")},this.nls("summaryField")),(0,c.jsx)(d.TextArea,{placeholder:this.nls("summaryPlaceholder"),value:o,className:"info-content-textarea form-control mb-3",onBlur:e=>{this.onSummaryChange(e,!0)},onKeyDown:e=>{this.onSummaryChange(e)},onChange:e=>{this.setState({summary:e.target.value})}}),!window.jimuConfig.isDevEdition&&(0,c.jsx)("div",{className:"select-choices-con"},(0,c.jsx)("div",{className:"info-content-label",title:this.nls("tags")},this.nls("tags")),(0,c.jsx)(d.TagInput,{data:s,selectListData:a,onChange:this.onTagInputChange,name:this.nls("tagsLowerCase"),menuProps:{maxHeight:80}})),!window.jimuConfig.isDevEdition&&(0,c.jsx)("div",null,(0,c.jsx)("div",{className:"info-content-label",title:this.nls("saveInFolder")},this.nls("saveInFolder")),(0,c.jsx)(d.Select,{value:l,onChange:this.onFolderChange},r.map((e=>(0,c.jsx)(d.Option,{value:e.value,key:e.value},e.text))))),(0,c.jsx)("div",{className:"d-flex justify-content-end info-content-btn-group"},(0,c.jsx)(d.Button,{type:"primary",className:"info-content-btn mr-2",ref:e=>{this.alignButtonWidth("okButton",e)},onClick:this.onConfirm,title:this.nlsCommonMessage("ok")},this.nlsCommonMessage("ok")),(0,c.jsx)(d.Button,{className:"info-content-btn",onClick:()=>{this.props.onEditInfoCancel()},ref:e=>{this.alignButtonWidth("cancelButton",e)},title:this.nlsCommonMessage("cancel")},this.nlsCommonMessage("cancel"))))))),this.state.loading&&(0,c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"}),(0,c.jsx)(d.AlertPopup,{isOpen:i,hideCancel:!0,toggle:this.handleToggle},(0,c.jsx)("div",{style:{fontSize:"1rem"}},this.nls("editAppErrorMessage"))))}}x.contextType=h;const y=(0,m.withTheme)(x);class I extends c.React.PureComponent{constructor(){super(...arguments),this.getStyle=()=>c.css`
      svg {
        color: #fff;
      }
      /* &.modal-header button.close {
        padding: 0;
        margin: 0;
      } */
    `,this.stopPropagation=e=>{e.stopPropagation()}}render(){const{isOpen:e}=this.props,t=this.props.intl?this.props.intl.formatMessage({id:"appListDelete",defaultMessage:u.appListDelete}):u.appListDelete,i=this.props.intl?this.props.intl.formatMessage({id:"popUpCancel",defaultMessage:u.popUpCancel}):u.popUpCancel,s=this.props.intl?this.props.intl.formatMessage({id:"itemDeleteRemind",defaultMessage:u.itemDeleteRemind}):u.itemDeleteRemind;return(0,c.jsx)(h.Consumer,null,(({deleteApp:a})=>(0,c.jsx)(d.Modal,{className:(0,c.classNames)("d-flex justify-content-center"),isOpen:e,centered:!0,toggle:this.props.deleteToggle,onClick:e=>{this.stopPropagation(e)}},(0,c.jsx)(d.ModalHeader,{tag:"h4",toggle:this.props.deleteToggle,className:"item-delete-header",css:this.getStyle()},t),(0,c.jsx)(d.ModalBody,null,s),(0,c.jsx)(d.ModalFooter,null,(0,c.jsx)(d.Button,{type:"danger",onClick:e=>{this.stopPropagation(e),a(this.props.itemId),this.props.deleteToggle()}},t),(0,c.jsx)(d.Button,{type:"secondary",onClick:e=>{this.stopPropagation(e),this.props.deleteToggle()}},i)))))}}var S=l(369),$=l.n(S);const j=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:$()},i))};class T extends c.React.PureComponent{constructor(e){super(e),this.eidtInfoStyle={width:"100%",height:"100%",maxWidth:"5000px",margin:0},this.getStyle=()=>c.css`
      .modal-content {
        background: none;
      }
    `,this.appLaunch=()=>{const e=this.props.isTemplateList?"template":"experience",t=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${e}/${this.props.appItem.id}/`:`${window.jimuConfig.mountPath}${e}/?id=${this.props.appItem.id}`;window.open(t)},this.viewDetails=()=>{const e=`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`;window.open(e)},this.showEditInfo=()=>{this.setState({isShownEditInfo:!0})},this.onEditInfoCancel=()=>{this.setState({isShownEditInfo:!1})},this.onEditInfoOk=()=>{this.setState({isShownEditInfo:!1})},this.deleteToggle=()=>{this.setState({isShowDeleteAlertPopup:!this.state.isShowDeleteAlertPopup})},this.setDescribtionFocusStatus=(e=!1)=>{this.setState({isDescriptionEditorFocus:e})},this.editInfoModalClick=e=>{e.stopPropagation(),this.setDescribtionFocusStatus(!1)},this.state={isOpen:!1,isShownEditInfo:!1,isShowDeleteAlertPopup:!1,isDescriptionEditorFocus:!1}}render(){const e=window.jimuConfig.isDevEdition,t=this.state.isShownEditInfo,{editPrivileges:i,isTemplateList:s,updateAppList:a,appIndex:o,isPublish:l,appItem:r}=this.props,{isShowDeleteAlertPopup:n,isDescriptionEditorFocus:p}=this.state,m=c.SessionManager.getInstance().getMainSession(),g=null==m?void 0:m.token;return(0,c.jsx)(h.Consumer,null,(({deleteApp:h,refreshList:m,duplicateAppItem:v})=>(0,c.jsx)("div",{css:this.getStyle(),className:this.props.className,title:this.props.intl?this.props.intl.formatMessage({id:"appListMore",defaultMessage:u.appListMore}):u.appListMore},(0,c.jsx)(d.Dropdown,{direction:"right",size:"sm",isOpen:this.state.isOpen,className:"app-list-dropdown",onClick:e=>e.stopPropagation(),toggle:()=>this.setState({isOpen:!this.state.isOpen})},(0,c.jsx)(d.DropdownToggle,{size:"sm",type:"tertiary"},(0,c.jsx)(j,{className:"app-list-iconfill app-list-icon-margin dropdown-icon",style:{marginRight:"3px"}})),(0,c.jsx)(d.DropdownMenu,{className:"app-list-dropdown"},i.canCreate&&(0,c.jsx)(d.DropdownItem,{className:"pb-1",onClick:()=>v(r),title:this.props.intl.formatMessage({id:"duplicate",defaultMessage:d.defaultMessages.duplicate})},this.props.intl.formatMessage({id:"duplicate",defaultMessage:d.defaultMessages.duplicate})),i.canEdit&&(0,c.jsx)(d.DropdownItem,{className:"pb-1",onClick:this.showEditInfo,title:this.props.intl.formatMessage({id:"editInfo",defaultMessage:u.editInfo})},this.props.intl.formatMessage({id:"editInfo",defaultMessage:u.editInfo})),!e&&(0,c.jsx)(d.DropdownItem,{className:"pb-1",onClick:this.viewDetails,title:this.props.intl.formatMessage({id:"viewDetail",defaultMessage:u.viewDetail})},this.props.intl.formatMessage({id:"viewDetail",defaultMessage:u.viewDetail})),i.canDelete&&(0,c.jsx)(d.DropdownItem,{className:"pb-1",onClick:()=>{this.deleteToggle()},title:this.props.intl.formatMessage({id:"appListDelete",defaultMessage:u.appListDelete})},this.props.intl.formatMessage({id:"appListDelete",defaultMessage:u.appListDelete})),e&&l&&(0,c.jsx)(d.DropdownItem,{href:`/download/${this.props.appItem.id}?locale=${this.props.intl.locale}&token=${g}`,target:"_blank"},this.props.intl.formatMessage({id:"download",defaultMessage:u.download})))),t&&(0,c.jsx)(d.Modal,{onClick:e=>{this.editInfoModalClick(e)},css:this.getStyle(),isOpen:t,style:this.eidtInfoStyle,contentClassName:"h-100 w-100"},(0,c.jsx)(y,{appIndex:o,updateAppList:a,appItem:this.props.appItem,portalUrl:this.props.portalUrl,folderUrl:this.props.folderUrl,onEditInfoCancel:this.onEditInfoCancel,intl:this.props.intl,isDescriptionEditorFocus:p,isTemplateList:s,setDescribtionFocusStatus:this.setDescribtionFocusStatus,folderListData:this.props.folderListData,onEditInfoOk:this.onEditInfoOk})),(0,c.jsx)(I,{isOpen:n,deleteToggle:this.deleteToggle,itemId:this.props.appItem.id,intl:this.props.intl}))))}}class N extends c.React.PureComponent{constructor(e){super(e),this.toggle=()=>{this.setState({tooltipOpen:!this.state.tooltipOpen})},this.handleItemClick=()=>{const e=this.judgeUserEditPrivileges(this.props.updateGroupItemId);if(this.props.isTemplateList||!this.props.isPrivilegeCheckEnd)return!1;if(e.canEdit){let e=this.getQueryString("locale");e=e?`&locale=${e}`:"";const t=window.jimuConfig.mountPath+"builder/?id="+this.props.appItem.id+e;window.location.href=t}else this.setState({isShowAlertPopup:!0})},this.editTemplateClick=()=>{if(!this.judgeUserEditPrivileges(this.props.updateGroupItemId).canEdit||!this.props.isPrivilegeCheckEnd)return!1;let e=this.getQueryString("locale");e=e?`&locale=${e}`:"";const t=window.jimuConfig.mountPath+"builder/?id="+this.props.appItem.id+e;window.location.href=t},this.appLaunch=e=>{e.stopPropagation()},this.checkIsOwner=()=>{const e=(0,c.getAppStore)().getState().user;return!(!e||!this.props.appItem.owner||(null==e?void 0:e.username)!==this.props.appItem.owner)},this.viewDetails=e=>{this.appLaunch(e);const t=`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`;window.open(t)},this.handleToggle=()=>{this.setState({isShowAlertPopup:!this.state.isShowAlertPopup})},this.initExtraState=()=>{const e=`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`;this.setState({detailUrl:e})},this.getThumbnail=()=>{const e=this.props.appItem.thumbnail,{isExbTeamCommonTemplate:t,id:i,isDefaultTemplate:s}=this.props.appItem,{portalUrl:a,folderUrl:o,isTemplateList:l}=this.props;let r=e;const n=l?"templateDefaultthumb.png":"defaultthumb.png",p=c.SessionManager.getInstance().getSessionByUrl(a),d=p&&(null==p?void 0:p.token)?"?token="+p.token:"";return r=r?a+"/sharing/rest/content/items/"+i+"/info/"+e+d:o+`./dist/runtime/assets/${n}`,e&&this.state.isDevEdition&&(r=window.location.origin+"/apps/"+i+"/"+e),s&&(r=e),t&&e&&(r=a+"/sharing/rest/content/items/"+i+"/info/"+e+d),r},this.getPreviewUrl=()=>{const{isTemplateList:e}=this.props,{id:t,isExbTeamCommonTemplate:i}=this.props.appItem;return c.urlUtils.getAppUrl({appId:t,isTemplate:e,isArcGisOnlineTemplate:i})},this.getShareState=e=>{const t={icon:this.state.IconSharedEveryone,tips:this.nls("everyone")};if(!e)return null;switch(e){case"public":t.tips=this.nls("everyone"),t.icon=this.state.IconSharedEveryone;break;case"private":t.tips=this.nls("noOne"),t.icon=this.state.IconSharedNoOne;break;case"org":t.tips=this.nls("organization"),t.icon=this.state.IconSharedOrganization;break;case"shared":t.tips=this.nls("group"),t.icon=this.state.IconSharedGroup}return t},this.getPublishStatus=e=>{const t=e.typeKeywords||[];let{publishStatus:i,publishStatusText:s}=this.state;t.forEach((e=>{if(e.includes("status:"))switch(e.split(": ")[1]){case p.Published:i=p.Published,s=this.nls("appListPublished");break;case p.Draft:i=p.Draft,s=this.nls("appListDraft");break;case p.Changed:i=p.Changed,s=this.nls("unpublishedChanges")}})),this.setState({publishStatus:i,publishStatusText:s})},this.isHideEditDropBtn=()=>!!this.state.isDevEdition||!this.props.appItem.isDefaultTemplate&&void 0,this.nls=(e,t=!1)=>t?this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:c.defaultMessages[e]}):e:this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:u[e]}):e,this.getFavoriteStatus=e=>{const{appItem:t}=this.props;let i=!1;return i=e.includes(t.id),i},this.judgeUserEditPrivileges=(e=(0,c.Immutable)([]))=>{const{appItem:t,capabilities:i}=this.props,s=null==t?void 0:t.userRole,{isDefaultTemplate:a,isExbTeamCommonTemplate:o}=t,l=(0,c.getAppStore)().getState().user,{canUpdateExperience:r,canDeleteExperience:p,canViewExperience:d,canCreateExperience:h}=i,m=e.asMutable().includes(t.id),u={canDelete:!1,canEdit:!1,canCreate:!1,canView:!1};u.canEdit=r||!1,u.canDelete=p||!1,u.canView=d||!1,u.canCreate=h||!1,m&&(u.canDelete=!1,u.canEdit=r,u.canCreate=h);const g=this.checkIsOwner()||s===n.OrgAdmin&&(null==t?void 0:t.isOrgItem);return g&&(u.canDelete=p,u.canEdit=r,u.canCreate=h),(a||o&&"ExB_team"!==(null==l?void 0:l.username))&&(u.canDelete=!1,u.canEdit=!1,u.canCreate=h),m||g||(u.canDelete=!1,u.canEdit=!1),(0,c.Immutable)(u)},this.state={tooltipOpen:!1,itemSelected:!1,isShowAlertPopup:!1,IconPlay:l(323),IconPeople:l(180),IconAppPreview:l(619),IconToolEdit:l(6),IconAdd:l(378),IconSharedEveryone:l(221),IconSharedGroup:l(298),IconSharedNoOne:l(430),IconSharedOrganization:l(744),star:l(611),view16:l(957),starOutline:l(682),isDevEdition:window.jimuConfig.isDevEdition,thumbnail:"",detailUrl:"",limitsTips:"",publishStatus:"",publishStatusText:""}}componentDidMount(){this.initExtraState(),this.getPublishStatus(this.props.appItem)}getQueryString(e){return c.queryString.parse(window.location.search)[e]||""}}var E=l(933),k=l.n(E);const C=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:k()},i))};var D=l(750),M=l.n(D);const L=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:M()},i))};var O=l(467),A=l.n(O);const P=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:A()},i))};class R extends N{render(){const{IconToolEdit:e,isDevEdition:t,isShowAlertPopup:i,publishStatus:s,publishStatusText:a,star:o,starOutline:l}=this.state,{appItem:r}=this.props,{id:n,type:m}=r,{updateAppList:u,appIndex:v}=this.props,f=this.getShareState(this.props.appItem.access),w=this.getFavoriteStatus(this.props.allFavoritesIdData),b=this.judgeUserEditPrivileges(this.props.updateGroupItemId),x=this.props.isTemplateList?"template":"experience";return c.React.createElement(h.Consumer,null,(({createApp:h,favoriteTogle:y})=>c.React.createElement(d.Card,{button:!0,className:"detailview-item",onClick:this.handleItemClick,style:{position:"relative",cursor:this.props.isTemplateList?"auto":"pointer"}},c.React.createElement("div",{className:"h-100 w-100",style:{position:"absolute"},"data-testid":"card-item"},c.React.createElement("div",{className:"w-100 app-list-detailview-pic position-relative",style:{backgroundImage:"url("+this.getThumbnail()+")"}},s&&c.React.createElement("div",{className:(0,c.classNames)("publish-status position-absolute text-truncate",s),title:a},a)),c.React.createElement(d.CardBody,{className:"w-100  justify-content-between flex-column item-message-con",style:{height:"48%"}},c.React.createElement("h2",{className:"app-list-h2 item-card-title",title:this.props.appItem.title},this.props.appItem.title),c.React.createElement("div",{className:"app-list-h3 app-list-detailview-name",title:this.props.appItem.owner},this.props.appItem.owner),c.React.createElement("div",{className:"app-list-h3 app-list-detailview-time"},this.props.appItem.modified&&c.React.createElement(c.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"})),!this.props.isTemplateList&&c.React.createElement("div",{className:"d-flex justify-content-between align-items-center edit-item-con"},t?c.React.createElement("div",{className:"app-list-h3"}):c.React.createElement("div",{className:"app-list-h3 item-views-number pl-1 pt-1 pb-1",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`},c.React.createElement(d.Button,{rel:"noreferrer",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,type:"tertiary",className:"border-0 mr-1 pr-1",onClick:this.viewDetails},c.React.createElement(P,{className:"app-list-iconfill mr-0"})),c.React.createElement("span",null,this.props.appItem.numViews)),c.React.createElement("div",{className:"d-flex align-items-center item-btn-box"},!t&&c.React.createElement(d.Button,{rel:"noreferrer",title:f.tips,type:"tertiary",className:"pl-1 pr-1 app-item-launch border-0 mr-2",onClick:this.viewDetails},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:f.icon})),!t&&b.canView&&c.React.createElement(d.Button,{rel:"noreferrer",title:w?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,c.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2",{favorite:w}),onClick:e=>{this.appLaunch(e),y(w,n)}},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:w?o:l})),b.canView&&c.React.createElement(d.Button,{type:"tertiary",tag:"a",href:window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${x}/${this.props.appItem.id}/`:`${window.jimuConfig.mountPath}${x}/?id=${this.props.appItem.id}`,rel:"noreferrer",target:"_blank",title:this.nls("launchApp"),className:" pl-1 pr-1 app-item-launch border-0 margin-4",onClick:this.appLaunch},c.React.createElement(C,{className:"app-list-iconfill mr-0"})),c.React.createElement(T,{appIndex:v,updateAppList:u,className:"app-item-more",portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:s!==p.Draft,isTemplateList:this.props.isTemplateList,folderListData:this.props.folderListData,editPrivileges:b}))),this.props.isTemplateList&&c.React.createElement("div",{className:"d-flex justify-content-between align-items-center edit-item-con"},c.React.createElement("div",{className:"item-btn-box template-item-btn-box"},b.canView&&c.React.createElement(d.Button,{type:"tertiary",tag:"a",href:this.getPreviewUrl(),rel:"noreferrer",target:"_blank",title:this.nls("launchApp"),className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",onClick:this.appLaunch},c.React.createElement(C,{className:"app-list-iconfill mr-0"})),!t&&m!==g.AppType.ExperienceType&&b.canView&&c.React.createElement(d.Button,{rel:"noreferrer",title:w?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,c.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2 float-left",{favorite:w}),onClick:e=>{this.appLaunch(e),y(w,n)}},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:w?o:l})),b.canEdit&&c.React.createElement(d.Button,{rel:"noreferrer",type:"tertiary",className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",title:this.nls("appListEdit"),onClick:this.editTemplateClick},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:e})),b.canCreate&&s!==p.Draft&&c.React.createElement(d.Button,{rel:"noreferrer",type:"tertiary",className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",onClick:e=>{this.appLaunch(e),h(r)},title:this.nls("createNewTitle")},c.React.createElement(L,{className:"app-list-iconfill mr-0"}))),c.React.createElement("div",{className:"d-flex align-items-center item-btn-box"},c.React.createElement(T,{className:"float-right app-item-more",appIndex:v,updateAppList:u,portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:s!==p.Draft,isTemplateList:this.props.isTemplateList,folderListData:this.props.folderListData,editPrivileges:b}))))),c.React.createElement(d.AlertPopup,{isOpen:i,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.handleToggle},c.React.createElement("div",{style:{fontSize:"1rem"}},this.nls("noEditContentPrivilegesError",!0))))))}}class F extends c.React.PureComponent{constructor(){super(...arguments),this.renderCardSkeleton=()=>(0,c.jsx)(d.Card,{button:!0,className:"detailview-item",css:this.getStyle()},(0,c.jsx)("div",{className:"h-100 w-100"},(0,c.jsx)("div",{className:"w-100 app-list-detailview-pic position-relative skeleton-pic"}),(0,c.jsx)(d.CardBody,{className:"w-100  justify-content-between flex-column item-message-con",style:{height:"48%"}},(0,c.jsx)("h2",{className:"app-list-h2 item-card-title skeleton-title"}),(0,c.jsx)("div",{className:"app-list-h3 app-list-detailview-name skeleton-name"}),(0,c.jsx)("div",{className:"app-list-h3 app-list-detailview-time skeleton-time"}),(0,c.jsx)("div",{className:"d-flex align-items-center item-btn-box skeleton-btn-box position-relative"},(0,c.jsx)("div",null,(0,c.jsx)("span",{className:"skeleton-btn"}),(0,c.jsx)("span",{className:"skeleton-btn skeleton-lg-btn"})),(0,c.jsx)("div",{className:"text-right flex-grow-1 right-btn-con"},(0,c.jsx)("span",{className:"skeleton-btn"}),(0,c.jsx)("span",{className:"skeleton-btn"}),(0,c.jsx)("span",{className:"skeleton-btn"}),(0,c.jsx)("span",{className:"skeleton-btn"})))))),this.renderListSkeleton=()=>{const e=window.jimuConfig.isDevEdition;return(0,c.jsx)("div",{className:"mb-3 ml-0 mr-0 position-relative app-item-backcolor listview-item item-list-con d-flex",css:this.getStyle()},(0,c.jsx)("div",{className:"p-0 position-absolute app-list-listview-pic-con"},(0,c.jsx)("div",{className:"app-list-listview-pic skeleton-list-pic"})),(0,c.jsx)("div",{className:(0,c.classNames)("d-flex align-items-center item-list-name-con",{"item-list-name-con-dev":e})},(0,c.jsx)("div",{className:"app-list-h2 d-flex align-items-center"},(0,c.jsx)("div",{className:"flex-grow-1 text-truncate skeleton-list-title"}))),(0,c.jsx)("div",{className:"d-flex align-items-center item-list-owner "},(0,c.jsx)("div",{className:"app-list-h3 app-list-listview-name item-list-border-l"},(0,c.jsx)("span",{className:"skeleton-list-name"}))),(0,c.jsx)("div",{className:"d-flex align-items-center item-list-border-l item-list-time"},(0,c.jsx)("div",{className:"app-list-h3 skeleton-list-time"})),!e&&(0,c.jsx)("div",{className:"d-flex align-items-center item-list-border-l app-list-views-con app-list-views"},!this.props.isTemplateList&&(0,c.jsx)("div",{className:"app-list-h3 app-list-listview-view"},(0,c.jsx)("span",{className:"skeleton-btn cir-btn"}),(0,c.jsx)("span",{className:"skeleton-btn skeleton-view-num"}))),(0,c.jsx)("div",{className:(0,c.classNames)("align-items-center d-flex item-list-icon-con justify-content-end skeleton-list-icon-con")},(0,c.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,c.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,c.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,c.jsx)("span",{className:"skeleton-btn cir-btn mr-16"})))}}getStyle(){var e,t,i,s,a,o,l,r,n;const p=this.props.theme;return c.css`
      .skeleton-pic,
      .skeleton-time,
      .skeleton-name,
      .skeleton-title,
      .skeleton-btn,
      .skeleton-list-pic,
      .skeleton-list-title,
      .skeleton-list-name,
      .skeleton-list-time {
        background: ${null===(i=null===(t=null===(e=null==p?void 0:p.colors)||void 0===e?void 0:e.palette)||void 0===t?void 0:t.secondary)||void 0===i?void 0:i[600]};
      }
      .item-message-con {
        .skeleton-title {
          height: ${c.polished.rem(32)};
        }
        .skeleton-name {
          height: ${c.polished.rem(18)};
          width: ${c.polished.rem(173)};
          margin-bottom: ${c.polished.rem(12)};
        }
        .skeleton-time {
          height: ${c.polished.rem(18)};
          width: ${c.polished.rem(120)};
          margin-bottom: ${c.polished.rem(12)};
        }
        .skeleton-btn-box {
          border-top: 1px solid ${null===(o=null===(a=null===(s=null==p?void 0:p.colors)||void 0===s?void 0:s.palette)||void 0===a?void 0:a.secondary)||void 0===o?void 0:o[600]};
          box-sizing: border-box;
          padding-top: ${c.polished.rem(10)};
        }
        .skeleton-btn {
          display: inline-block;
          width: ${c.polished.rem(16)};
          height: ${c.polished.rem(16)};
          border-radius: 50%;
          margin-right: ${c.polished.rem(4)};
        }
        .skeleton-lg-btn {
          border-radius: 0;
          width: ${c.polished.rem(32)};
        }
        .right-btn-con .skeleton-btn {
          margin-right: 0;
          margin-left: ${c.polished.rem(16)};
        }
      }
      &.listview-item {
        .item-list-owner .app-list-listview-name {
          margin-top: 0;
        }
        .app-list-listview-pic-con .skeleton-list-pic {
          background: ${null===(n=null===(r=null===(l=null==p?void 0:p.colors)||void 0===l?void 0:l.palette)||void 0===r?void 0:r.secondary)||void 0===n?void 0:n[600]};
        }
        .skeleton-list-title {
          width: ${c.polished.rem(200)};
          height: ${c.polished.rem(22)};
        }
        .skeleton-list-name {
          display: inline-block;
          width: ${c.polished.rem(120)};
          height: ${c.polished.rem(22)};
        }
        .skeleton-list-time {
          width: ${c.polished.rem(74)};
          height: ${c.polished.rem(22)};
        }
        .cir-btn {
          display: inline-block;
          width: ${c.polished.rem(16)};
          height: ${c.polished.rem(16)};
          border-radius: 50%;
        }
        .skeleton-view-num {
          width: ${c.polished.rem(32)};
          height: ${c.polished.rem(18)};
          margin-left: ${c.polished.rem(4)};
        }
        .mr-16 {
          margin-right: ${c.polished.rem(16)};
        }
      }
    `}render(){return this.props.isCardSkeleton?this.renderCardSkeleton():this.renderListSkeleton()}}class z extends c.React.PureComponent{constructor(){super(...arguments),this.renderSkeleton=()=>{var e;const t=[],i=this.context.skeletonNum||6;for(let s=0;s<i;s++)t.push(c.React.createElement(F,{key:s,theme:null===(e=null==this?void 0:this.context)||void 0===e?void 0:e.theme,isTemplateList:this.props.isTemplateList,isCardSkeleton:!0}));return t}}getViewContent(){var e;const t=this.props.apps.length,{isPrivilegeCheckEnd:i,updateAppList:s}=this.props;return c.React.createElement("div",{className:"app-list-detailview-content","data-testid":"app-item-list-card"},t>0&&this.props.apps.map(((e,t)=>c.React.createElement(R,{appIndex:t,updateAppList:s,allFavoritesIdData:this.props.allFavoritesIdData,updateGroupItemId:this.props.updateGroupItemId,portalUrl:this.props.portalUrl,intl:this.props.intl,key:e.id,folderUrl:this.props.folderUrl,appItem:e.asMutable({deep:!0}),itemIdx:t,capabilities:this.props.capabilities,folderListData:this.props.folderListData,isPrivilegeCheckEnd:i,isTemplateList:this.props.isTemplateList}))),(null===(e=null==this?void 0:this.context)||void 0===e?void 0:e.isLoadSkeleton)&&this.renderSkeleton())}render(){const e=this.getViewContent();return c.React.createElement("div",{className:"app-list-detailview"},e)}}z.contextType=h;class U extends N{render(){const{IconToolEdit:e,IconAdd:t,isDevEdition:i,publishStatus:s,publishStatusText:a,star:o,starOutline:l}=this.state,{isTemplateList:r,appIndex:n,appItem:m,updateAppList:u}=this.props,{id:v,modified:f,type:w}=m,b=this.getShareState(this.props.appItem.access),x=this.getFavoriteStatus(this.props.allFavoritesIdData),y=this.judgeUserEditPrivileges(this.props.updateGroupItemId),I=this.props.isTemplateList?"template":"experience";return c.React.createElement(h.Consumer,null,(({createApp:h,favoriteTogle:S})=>c.React.createElement("div",{onClick:this.handleItemClick,style:{cursor:r?"auto":"pointer"},className:(0,c.classNames)("mb-3 ml-0 mr-0 position-relative app-item-backcolor  listview-item item-list-con d-flex"),onMouseEnter:()=>{this.setState({itemSelected:!0})},onMouseLeave:()=>{this.setState({itemSelected:!1})},"data-testid":"list-item"},c.React.createElement("div",{className:"p-0 position-absolute app-list-listview-pic-con"},c.React.createElement("div",{className:"app-list-listview-pic",style:{backgroundImage:"url("+this.getThumbnail()+")"}})),c.React.createElement("div",{className:(0,c.classNames)("d-flex align-items-center item-list-name-con",{"item-list-name-con-dev":i})},c.React.createElement("div",{className:"app-list-h2 d-flex align-items-center",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.appItem.title},c.React.createElement("div",{className:"flex-grow-1 text-truncate"},this.props.appItem.title),s&&c.React.createElement("div",{className:(0,c.classNames)("publish-status text-truncate list-publish-status ",s),title:a},a))),c.React.createElement("div",{className:"d-flex align-items-center item-list-owner "},c.React.createElement("div",{className:"app-list-h3 app-list-listview-name item-list-border-l",title:this.props.appItem.owner},this.props.appItem.owner)),c.React.createElement("div",{className:"d-flex align-items-center item-list-border-l item-list-time"},c.React.createElement("div",{className:"app-list-h3"},f&&c.React.createElement(c.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"}))),!i&&c.React.createElement("div",{title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,className:"d-flex align-items-center item-list-border-l app-list-views-con app-list-views"},!r&&c.React.createElement("div",{className:"app-list-h3 app-list-listview-view pl-1 pt-1 pb-1"},c.React.createElement(d.Button,{rel:"noreferrer",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,type:"tertiary",className:"pr-1 border-0 mr-1",onClick:this.viewDetails},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:this.state.view16})),c.React.createElement("span",null,this.props.appItem.numViews))),c.React.createElement("div",{className:(0,c.classNames)("align-items-center d-flex item-list-icon-con justify-content-end",{templateIconCon:r,decIconCon:i})},!r&&c.React.createElement("div",{className:"d-flex align-items-center"},!i&&c.React.createElement(d.Button,{rel:"noreferrer",type:"tertiary",title:b.tips,className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",onClick:this.viewDetails},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:b.icon})),!i&&y.canView&&c.React.createElement(d.Button,{rel:"noreferrer",title:x?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,c.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2",{favorite:x}),onClick:e=>{this.appLaunch(e),S(x,v)}},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:x?o:l})),y.canView&&c.React.createElement(d.Button,{tag:"a","data-testid":"launchApp",href:window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${I}/${this.props.appItem.id}/`:`${window.jimuConfig.mountPath}${I}/?id=${this.props.appItem.id}`,rel:"noreferrer",target:"_blank",title:this.nls("launchApp"),className:"float-right  btn  app-item-launch border-0 margin-4",type:"tertiary",onClick:this.appLaunch},c.React.createElement(C,{className:"app-list-iconfill mr-0"})),c.React.createElement(T,{updateAppList:u,appIndex:n,className:"float-right mr-2",portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:s!==p.Draft,isTemplateList:r,folderListData:this.props.folderListData,editPrivileges:y})),r&&c.React.createElement("div",{className:(0,c.classNames)("d-flex align-items-center justify-content-end",!this.checkIsOwner()&&"icon-con-padding-r")},y.canView&&c.React.createElement(d.Button,{type:"tertiary",tag:"a",href:window.jimuConfig.useStructuralUrl?`../${I}/${this.props.appItem.id}/`:`../${I}/?id=${this.props.appItem.id}`,rel:"noreferrer",target:"_blank",title:this.nls("launchApp"),className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",onClick:this.appLaunch},c.React.createElement(C,{className:"app-list-iconfill mr-0"})),!i&&w!==g.AppType.ExperienceType&&y.canView&&c.React.createElement(d.Button,{rel:"noreferrer",title:x?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,c.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2 float-right",{favorite:x}),onClick:e=>{this.appLaunch(e),S(x,v)}},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:x?o:l})),y.canEdit&&c.React.createElement(d.Button,{rel:"noreferrer",type:"tertiary",className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",title:this.nls("appListEdit"),onClick:this.editTemplateClick},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:e})),y.canCreate&&s!==p.Draft&&c.React.createElement(d.Button,{rel:"noreferrer",type:"tertiary",className:"float-right pl-1 pr-1 app-item-launch border-0 margin-4",title:this.nls("createNewTitle"),onClick:e=>{this.appLaunch(e),h(m)}},c.React.createElement(d.Icon,{className:"app-list-iconfill mr-0",icon:t})),c.React.createElement(T,{className:"float-right mr-2",updateAppList:u,appIndex:n,portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isTemplateList:r,isPublish:s!==p.Draft,folderListData:this.props.folderListData,editPrivileges:y}))),c.React.createElement(d.AlertPopup,{isOpen:this.state.isShowAlertPopup,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.handleToggle},c.React.createElement("div",{style:{fontSize:"1rem"}},this.nls("noEditContentPrivilegesError",!0))))))}}class B extends c.React.PureComponent{constructor(e){super(e),this.renderSkeleton=()=>{var e;const t=this.context.skeletonNum||6,i=[];for(let s=0;s<t;s++)i.push(c.React.createElement(F,{key:s,theme:null===(e=null==this?void 0:this.context)||void 0===e?void 0:e.theme,isCardSkeleton:!1,isTemplateList:this.props.isTemplateList}));return i},this.toggle=()=>{this.setState({tooltipOpen:!this.state.tooltipOpen})},this.state={tooltipOpen:!1}}getViewContent(){const e=this.props.apps.length,{isPrivilegeCheckEnd:t,updateAppList:i}=this.props;if(e<1)return null;{let e=null,s=null;return e=this.props.apps.map(((e,s)=>c.React.createElement(U,{appIndex:s,updateAppList:i,allFavoritesIdData:this.props.allFavoritesIdData,updateGroupItemId:this.props.updateGroupItemId,portalUrl:this.props.portalUrl,folderUrl:this.props.folderUrl,key:e.id,itemIdx:s,appItem:e.asMutable({deep:!0}),intl:this.props.intl,capabilities:this.props.capabilities,folderListData:this.props.folderListData,isPrivilegeCheckEnd:t,isTemplateList:this.props.isTemplateList}))),s=c.React.createElement(d.Container,{className:"app-list-listview-container",style:{maxWidth:"100%"}},e),s}}render(){var e;const t=this.getViewContent();return c.React.createElement("div",{className:"app-list-listview w-100","data-testid":"app-item-list-list"},t,c.React.createElement(d.Container,{className:"app-list-listview-container",style:{maxWidth:"100%"}},(null===(e=null==this?void 0:this.context)||void 0===e?void 0:e.isLoadSkeleton)&&this.renderSkeleton()))}}B.contextType=h;class V extends c.React.PureComponent{render(){const{apps:e,isDetailContent:t,portalUrl:i,intl:s,folderUrl:a,switchListView:o,isTemplateList:l,allFavoritesIdData:r,capabilities:n,updateGroupItemId:p,folderListData:d,isPrivilegeCheckEnd:h,updateAppList:m}=this.props;return c.React.createElement("div",{className:"app-list-view"},t&&c.React.createElement(z,{updateAppList:m,allFavoritesIdData:r,updateGroupItemId:p,portalUrl:i,intl:s,folderUrl:a,apps:e,capabilities:n,switchListView:o,folderListData:d,isPrivilegeCheckEnd:h,isTemplateList:l}),!t&&c.React.createElement(B,{updateAppList:m,allFavoritesIdData:r,updateGroupItemId:p,portalUrl:this.props.portalUrl,intl:this.props.intl,folderUrl:a,apps:e,capabilities:n,switchListView:o,folderListData:d,isPrivilegeCheckEnd:h,isTemplateList:l}))}}function H(e){return c.css`
    &.invalid-message {
      text-align: center;
      top: 50%;
      font-size: ${c.polished.rem(16)};
      color: ${e.colors.palette.dark[600]};
      min-width: ${c.polished.rem(800)};
      width: 100%;
      box-sizing: border-box;
      padding:0 ${c.polished.rem(50)};
    }
    .loading-con {
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: ${c.polished.rgba(e.colors.white,.2)};
    }
    .widget-builder-app-list {
      overflow-y: auto;

      .widget-builder-app-list-screen {
        width:824px;
        margin: auto;
      }

      button.app-list-newapp:hover{
        color: ${e.colors.black} !important;
      }

      .modal-content {
        background:none;
      }

      .app-list-newapp {
        padding-left: ${c.polished.rem(16)};
        padding-right: ${c.polished.rem(16)};
        font-size: ${c.polished.rem(16)};
        margin-left: ${c.polished.rem(20)};
        height:${c.polished.rem(40)};
        white-space: nowrap;
        .app-list-newapp-icon {
          margin-right: ${c.polished.rem(8)};
        }
      }

      .app-list-search-container {
        padding-left: ${c.polished.rem(16)};
      }

      .app-list-h1 {
        font-size: ${c.polished.rem(24)};
      }

      .app-list-h2 {
        font-size: ${c.polished.rem(16)};
      }

      .app-list-h3 {
        font-size: ${c.polished.rem(13)};
      }

      .app-list-maxwidth {
        max-width: ${75}rem;
        top:40px;
      }

      .app-list-banner {
        overflow: hidden;
        width: 100%;
        height: ${5}rem;
        align-items: center;
        .list-title {
          font-size:${1.25}rem;
          color: ${e.colors.palette.dark[600]};
          margin-bottom: 0;
        }
      }

      .app-list-filterbar {
        margin-left: auto;
        margin-right: auto;
        width: 100%;
        padding-top: ${1.875}rem;
        padding-bottom: ${1.875}rem;
        border-top: 1px solid ${e.colors.palette.secondary[800]};
        .search-con {
          position:relative;
          align-items:center;
          border-radius:2px;
          background:${e.colors.palette.light[200]};
          /* width:${c.polished.rem(257)}; */
          width:${c.polished.rem(228)};
        }
        .app-list-switchview-con {
          border-radius: 2px;
          overflow:hidden;
          display: inline-block;
          vertical-align: middle;
        }
        .app-list-switchview {
          border-radius: 0;
        }
        .app-list-switchview-right {
          border-radius: 0;
        }
        .app-list-searchIconFill {
          color: ${e.colors.palette.dark[600]};
        }
        .app-list-searchbox:focus + .clear-con{
          display: block;
        }
        .clear-con {
          right: ${c.polished.rem(6)};
          cursor: pointer;
          color: ${e.colors.palette.dark[600]};
          transition: all ease .5s;
          /* display: none; */
        }
        .clear-con:hover {
          color: ${e.colors.black};
        }
        .app-list-searchbox {
          color: ${e.colors.black};
          width: 100%;
          height: ${2}rem;
          font-size:${.875}rem;
          box-sizing: border-box;
        }
        .app-list-searchbox::-ms-clear{
          display: none;
        }
        .app-list-clear {
          cursor: pointer;
        }
        .app-list-searchbox::-webkit-input-placeholder {
          color: ${e.colors.palette.dark[400]};
        }
        .app-list-searchbox:-moz-placeholder {
          color: ${e.colors.palette.dark[400]};
        }
        .app-list-searchbox:-ms-input-placeholder {
          color: ${e.colors.palette.dark[400]};
        }
        .filterbar-input {
          width: ${8.75}rem;
          margin-right:${c.polished.rem(10)};
          height:${c.polished.rem(32)};
          line-height:${c.polished.rem(32)};
          cursor: pointer;
          display: inline-block;
          vertical-align: middle;
        }

        .app-list-filterbar-title {
          padding-left: ${c.polished.rem(16)};
          padding-right: ${c.polished.rem(16)};
        }
      }
      .favorite {
        color: ${e.colors.palette.warning[500]};
      }
      .margin-4 {
        margin-right: ${c.polished.rem(4)};
      }
      .app-list-item-scroll-con {
        height: calc(100% - 200px);
        overflow-y: auto;
        min-width: 824px;
      }
      .app-list-content {
        width: 100%;
        padding-bottom: ${3.125}rem;
      }
      .top-space {
        height: ${11.625}rem;
      }
      .app-list-detailview {
        width: 100%;

        .app-list-detailview-name {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          /* max-width: ${c.polished.rem(120)}; */
        }

        .app-list-detailview-content {
          width: 100%;

          display: flex;
          flex-wrap: wrap;

          .app-list-detailview-pic {
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            height: ${c.polished.rem(160)};
          }
          .app-list-detailview-pic-cursor {
            cursor: pointer;
          }
        }

        .dropdown-toggle::after {
          display: none !important;
        }
      }

      .app-list-listview {

        .app-list-listview-name {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .app-list-listview-view {
          &{
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
          }
          button {
            vertical-align: middle;
          }
          button:hover {
            color:${e.colors.palette.dark[600]};
          }
          span {
            display: inline-block;
            vertical-align: middle;
            margin-bottom: ${c.polished.rem(-2)};
            color:${e.colors.palette.dark[600]};
          }
        }
        .app-list-views-con {
          padding-right: 5px;
        }
        .app-list-listview-container {
          position: relative;
          padding-left: ${c.polished.rem(16)};
          padding-right: ${c.polished.rem(16)};
        }

        .app-list-listview-pic {
          width:${c.polished.rem(60)};
          height:${c.polished.rem(40)};
          left:0;
          top:0;
          background-size: cover;
          background-position: center center;
          background-color: ${e.colors.palette.dark[600]};
          position: inherit;
        }
        .app-list-detailview-pic-cursor {
          cursor: pointer;
        }
        .app-list-listview-pic-con {
          z-index: 10;
        }
      }

      .detailview-item {
        width: ${c.polished.rem(244)};
        height: ${c.polished.rem(330)};
        margin: 0 ${c.polished.rem(15)} ${c.polished.rem(30)} ${c.polished.rem(15)};
        border: 1px solid ${e.colors.palette.light[300]};
        background: ${e.colors.palette.light[500]}
      }

      .app-item-more {
        margin-right: -0.625rem;
      }

      .app-item-backcolor {
        background-color: ${e.colors.palette.light[500]};
      }

      .app-item-launch:focus {
        box-shadow: none !important;
      }
      .icon-con-padding-r {
        padding-right:${c.polished.rem(5)};
      }
      .app-list-icon-margin {
        fill: #BCC4CD !important;
        margin-right: 0;
        margin-left: 0;
      }

      .app-list-dropdown {
        padding: 0;
        margin: 0;
        min-width: 0;
      }

      .dropdown-toggle::after {
        display: none !important;
      }

      .app-list-searchIconFill {
        fill: ${e.colors.palette.dark[600]} !important;
        color: ${e.colors.palette.dark[600]} !important;
      }

      .item-message-con {
        padding:${c.polished.rem(12)};
        padding-bottom:0;
      }
      .item-card-title {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
        height:${c.polished.rem(46)};
        color:${e.colors.palette.dark[800]};
        font-size:${1}rem;
        margin-bottom:${c.polished.rem(18)};
      }
      .app-list-detailview-name, .app-list-detailview-time {
        color:${e.colors.palette.dark[600]};
        font-size:${.8125}rem;
        line-height:${1}rem;
        min-height:${1}rem;
        margin-bottom:${c.polished.rem(9)};
      }
      .edit-item-con {
        & {
          border-top:1px solid ${e.colors.palette.light[800]};
          padding-top:${c.polished.rem(4)};
        }
        .item-views-number {
          color:${e.colors.palette.dark[600]};
          max-width: ${c.polished.rem(118)};
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        }
        .item-views-number button {
          vertical-align: middle;
        }
        .item-views-number button:hover {
          color:${e.colors.palette.dark[600]};
        }
        .item-views-number span {
          display: inline-block;
          line-height: ${c.polished.rem(30)};
          vertical-align: middle;
          margin-bottom: ${c.polished.rem(-2)};
        }
        .template-item-btn-box {
          margin-left: ${c.polished.rem(-4)};
        }
      }
      .description-con {
        & {
          background-color: ${c.polished.rgba(e.colors.white,.8)};
          left:0;
          top:0;
          right:0;
          bottom:0;
          box-sizing: border-box;
          padding:${c.polished.rem(16)};
          color:${e.colors.palette.dark[800]};
          font-size:${.75}rem;
          opacity: 0;
          transition: all ease .2s;
          overflow-y:scroll;
        }
        div {

        }
      }
      .dropdown-toggle svg.jimu-icon {
        transform: rotate(0deg);
        margin-right: 3px;
      }
      .app-list-detailview-pic:hover .description-con {
        opacity: 1;
      }
      .publish-status {
        background: ${e.colors.palette.warning[800]};
        height: ${c.polished.rem(18)};
        line-height: ${c.polished.rem(18)};
        right: ${c.polished.rem(8)};
        top: ${c.polished.rem(8)};
        color: ${e.colors.palette.warning[100]};
        padding: 0 ${c.polished.rem(6)};
        border-radius: 2px;
        font-size: ${c.polished.rem(10)};
        box-sizing: border-box;
        font-weight: bold;
      }
      .list-publish-status {
        max-width: ${c.polished.rem(100)};
        margin: 0 ${c.polished.rem(16)} 0 ${c.polished.rem(10)};
        min-width: ${c.polished.rem(40)};
        text-align: center;
      }
      .Published {
        color: ${e.colors.palette.success[100]};
        background: ${e.colors.palette.success[800]};
      }
      .Changed {
        color: ${e.colors.palette.danger[100]};
        background: ${e.colors.palette.danger[800]};
      }
      .item-list-con {
        & {
          height:${c.polished.rem(44)};
          background: ${e.colors.palette.light[500]};
          border: 2px solid ${e.colors.palette.light[300]};;
          transition: all ease .3s;
        }
        &:hover {
          border: 2px solid ${e.colors.palette.primary[700]};
        }
        .item-list-name-con {
          padding-left:${c.polished.rem(76)};
          font-size:${1}rem;
          color:${e.colors.palette.dark[800]};
          flex-grow: 1;
          max-width: 36%;
        }
        .item-list-owner {
          width: ${c.polished.rem(160)};
          box-sizing: border-box;
        }
        .item-list-time {
          width: ${c.polished.rem(99)};
        }
        .app-list-views {
          width: ${c.polished.rem(80)};
        }
        .item-list-icon-con {
          padding-right:0;
          width: ${c.polished.rem(167)};
        }

        .item-list-icon-con>div {
          height: ${c.polished.rem(24)};
        }
        .item-list-name-con-dev {
          max-width: 46%;
        }
        .item-list-name-con-default {
          max-width: 83%;
        }
        .app-list-h3 {
          color:${e.colors.palette.dark[600]};
        }
        .item-list-border-l {
          border-left: 1px solid ${e.colors.palette.secondary[800]};
          box-sizing:border-box;
          padding-left:${c.polished.rem(16)};
          height:${c.polished.rem(24)};
          margin-top:${c.polished.rem(8)};
          box-sizing: border-box;
        }

      }
      @media only screen and (min-width: 1280px) {
        .widget-builder-app-list-screen {
          width:1100px;
        }
        .app-list-filterbar .search-con {
            width:${c.polished.rem(400)};
        }
        .app-list-filterbar .filterbar-input {
          width: ${c.polished.rem(170)};
          margin-right:${c.polished.rem(20)};
        }
        .item-list-con {
          .item-list-name-con {
            max-width: 53%;
          }
          .item-list-name-con-dev {
            max-width: 60%;
          }
          .item-list-name-con-default {
            max-width: 88%;
          }
        }
      }
      @media only screen and (min-width: 1400px) {
        .widget-builder-app-list-screen {
            width:1372px;
        }
        .app-list-filterbar .filterbar-input {
          width: ${c.polished.rem(200)};
        }
        .item-list-con {
          .item-list-name-con{
            max-width: 48%;
          }
          .item-list-owner {
            width: ${c.polished.rem(260)};
          }
          .item-list-time {
            width: ${c.polished.rem(159)};
          }
          .app-list-views {
            width: ${c.polished.rem(106)};
          }
          .item-list-name-con-dev {
            max-width: 59%;
          }
          .item-list-name-con-default {
            max-width: 90%;
          }
        }
      }

      @media only screen and (min-width: 1680px) {
        .widget-builder-app-list-screen {
            width:1654px;
        }
        .item-list-con {
          .item-list-name-con{
            max-width: 57.5%;
          }
          .item-list-name-con-dev {
            max-width: 64%;
          }
          .item-list-name-con-default {
            max-width: 90%;
          }
        }
      }
    }
  `}class G extends c.React.PureComponent{constructor(t){super(t),this.getEmptyText=()=>{const{isTemplateList:t,accessType:i}=this.props;let{emptyTextTop:s,emptyTextBottom:a}=this.state;switch(i){case e.Me:case e.Anyone:t?(s=this.nls("noItemsYet"),a=this.nls("templateEmptyText")):s=this.nls("createExperience");break;case e.NotMe:s=this.nls("sharedEmptyText");break;case e.MyFavorites:s=this.nls("noItemsYet"),a=this.nls("favoritesEmptyText");break;case e.Public:s=this.nls("noPublicItems");break;case e.Default:s=this.nls("noItemsYet")}this.setState({emptyTextTop:s,emptyTextBottom:a})},this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:u[e]}):e,this.state={emptyTextTop:"",emptyTextBottom:""}}componentDidMount(){this.getEmptyText()}getStyle(){const e=this.props.theme,t=e.colors&&e.colors.palette?e.colors.palette.dark[400]:"#a8a8a8",i=e.colors&&e.colors.palette?e.colors.palette.dark[600]:"#c5c5c5",s=this.props.folderUrl+"./dist/runtime/assets/empty.png",a=this.props.folderUrl+"./dist/runtime/assets/no_item.png";return c.css`
      & {
        width: 100%;
        margin-top: ${c.polished.rem(120)};
      }
      div {
        text-align: center;
      }
      .empty-con {
        width: 100%;
        top: 50%;
      }
      .icon-con {
        width: ${c.polished.rem(458)};
        height: ${c.polished.rem(303)};
        background: url(${s}) no-repeat left top;
        background-size: contain;
        margin: 0 auto;
        opacity: 0.4;
      }
      .search-empty {
        background-image: url(${a});
        height: ${c.polished.rem(458/1.32)};
      }
      .create-experience {
        color: ${i};
        font-size: ${c.polished.rem(16)};
        line-height: ${c.polished.rem(16)};
        margin-top: ${c.polished.rem(30)};
        font-weight: 500;
      }
      .remind-to-click {
        color: ${t};
        font-size: ${c.polished.rem(14)};
        line-height: ${c.polished.rem(14)};
        margin-top: ${c.polished.rem(20)};
      }
      .remind-to-click span {
        color: ${i};
        font-weight: 500;
      }
      @media only screen and (max-width: 1600px) {
        & {
          margin-top: ${c.polished.rem(80)};
        }
      }
      @media only screen and (max-width: 1360px) {
        & {
          width: 100%;
          margin-top: ${c.polished.rem(0)};
        }
        .icon-con {
          width: ${c.polished.rem(200)};
          height: ${c.polished.rem(132)};
        }
        .search-empty {
          height: ${c.polished.rem(200/1.32)};
        }
        .create-experience {
          margin-top: ${c.polished.rem(20)};
        }
        .remind-to-click {
          margin-top: ${c.polished.rem(10)};
        }
      }
      @media only screen and (max-width: 1176px) {
        & {
          margin-top: ${c.polished.rem(20)};
        }
      }
    `}render(){const{accessType:t,isTemplateList:i,searchText:s}=this.props,{emptyTextTop:a,emptyTextBottom:o}=this.state,l=this.props.intl.formatMessage({id:"toCreate",defaultMessage:u.toCreate},{createNewElement:(0,c.jsx)("span",{key:"toCreate"},"+ ",this.nls("newApp"))});return(0,c.jsx)("div",{css:this.getStyle(),className:"app-list-empty-con"},0===s.length&&(0,c.jsx)("div",{className:"empty-con"},(0,c.jsx)("div",{className:"icon-con"}),a&&(0,c.jsx)("div",{className:"create-experience"},a),o&&(0,c.jsx)("div",{className:"create-experience"},o),!i&&(t===e.Me||t===e.Anyone)&&(0,c.jsx)("div",{className:"remind-to-click"},l)),s.length>0&&(0,c.jsx)("div",{className:"empty-con"},(0,c.jsx)("div",{className:"icon-con search-empty"}),(0,c.jsx)("div",{className:"create-experience"},i?this.nls("noTemplates"):this.nls("noSearchResult"))))}}const q=(0,m.withTheme)(G);var _=l(788),W=l.n(_);const Q=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:W()},i))};var Y=l(371),K=l.n(Y);const J=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:K()},i))};class X extends c.React.PureComponent{constructor(e){super(e),this.getTextAndIndexById=(e,t)=>{let{text:i}=this.state;return e.forEach(((e,s)=>{t===e.value&&(i=e.text)})),i},this.toggleDropdown=()=>{const{dropdownOpen:e}=this.state;this.setState({dropdownOpen:!e})},this.optionClick=(e,t,i)=>{const{onChange:s,onOptionClick:a,value:o}=this.props;this.setState({text:t}),this.toggleDropdown(),o!==i&&s&&s(i),a&&a(i)},this.state={dropdownOpen:!1,text:""}}componentDidMount(){}getStyle(){const{colors:e}=this.props.theme;return c.css`
      .dropdown button,
      .dropdown button:not(:disabled):not(.disabled):active {
        background: ${e.palette.light[200]};
        padding-right: 0;
      }
      .dropdown button {
        color: ${e.black};
      }
      .dropdown span {
        display: flex;
        align-items: center;
        svg {
          margin-right: ${c.polished.rem(6)};
        }
      }
    `}getDropdownStyle(){const{colors:e}=this.props.theme;return c.css`
      & {
        background: ${e.palette.secondary[400]};
        border: 1px solid ${e.palette.secondary[600]};
        border-radius: 2px;
        font-size: ${c.polished.rem(14)};
        padding: 0;
      }
      .dropdown-menu--inner {
        max-height: ${c.polished.rem(200)};
      }
      .dropdown-menu--inner .active {
        background: ${e.palette.primary[500]};
      }
      .icon-con {
        width: ${c.polished.rem(12)};
        height: ${c.polished.rem(12)};
        display: inline-block;
        vertical-align: middle;
        margin-right: ${c.polished.rem(8)};
      }
      .icon-con svg {
        display: block;
      }
    `}render(){const{dropdownOpen:e}=this.state,{dropDownData:t,isShowSelectIcon:i,className:s,value:a}=this.props,o=this.getTextAndIndexById(t,a);return(0,c.jsx)("div",{className:(0,c.classNames)("d-inline-block align-middle",s),css:this.getStyle()},(0,c.jsx)(d.Dropdown,{size:"sm",toggle:this.toggleDropdown,isOpen:e,className:"h-100",autoWidth:!0},(0,c.jsx)(d.DropdownToggle,{size:"sm",type:"tertiary",className:"dropdown d-flex filterbar-input",title:o},(0,c.jsx)("div",{className:"flex-grow-1 text-left text-truncate"},o),(0,c.jsx)(Q,{size:"s",className:"toollist-item-icon"})),(0,c.jsx)(d.DropdownMenu,{css:this.getDropdownStyle()},t.map(((e,t)=>(0,c.jsx)(d.DropdownItem,{key:t,onClick:t=>{this.optionClick(t,e.text,e.value)},className:(0,c.classNames)({active:a===e.value}),title:e.text},i&&(0,c.jsx)("span",{className:"icon-con"},a===e.value&&(0,c.jsx)(J,{size:"s"})),(0,c.jsx)("div",{className:"text-truncate"},e.text)))))))}}const Z=(0,m.withTheme)(X);var ee=l(224),te=l.n(ee);const ie=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:te()},i))};var se=l(159),ae=l.n(se);const oe=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:ae()},i))};var le=l(484),re=l.n(le);const ne=e=>{const{className:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i}(e,["className"]),s=(0,c.classNames)("jimu-icon-component",t);return c.React.createElement(d.Icon,Object.assign({className:s,icon:re()},i))};var pe=function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function l(e){try{n(s.next(e))}catch(e){o(e)}}function r(e){try{n(s.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};class ce extends c.React.PureComponent{constructor(l){super(l),this.searchPromise=null,this.isLoadModuleForBuilder=!0,this.scrollPosition=0,this.isHasPreload=!1,this.nextStart=null,this.appListTotal=null,this.isHadSearchList=!1,this.preloadData=()=>{if(!(0,c.getAppStore)().getState().portalSelf)return!1;this.getRole(),this.checkUserPrivilege(),this.getFoldersAndGroup(),this.getParamsAndRefresh(),this.initDropdownData(),this.contentNode&&(this.contentNode.addEventListener("scroll",this.onScrollHandle.bind(this)),this.contentNode.scrollTop=ce.scrollTop),this.isHasPreload=!0},this.preloadModule=()=>{if(!this.isLoadModuleForBuilder)return!1;const e=[c.moduleLoader.loadModule("jimu-arcgis"),c.moduleLoader.loadModule("jimu-for-builder"),c.moduleLoader.loadModule("jimu-layouts/layout-runtime.js"),c.moduleLoader.loadModule("jimu-for-builder/service.js"),c.moduleLoader.loadModule("jimu-layouts/layout-builder.js"),c.moduleLoader.loadModule("jimu-ui/advanced/style-setting-components.js"),c.moduleLoader.loadModule("jimu-ui/basic/color-picker.js"),c.moduleLoader.loadModule("jimu-ui/advanced/setting-components.js"),c.moduleLoader.loadModule("jimu-ui/advanced/theme-components.js"),c.moduleLoader.loadModule("jimu-ui/advanced/data-source-selector.js"),c.moduleLoader.loadModule("jimu-ui/basic/item-selector.js"),c.moduleLoader.loadModule("jimu-ui/advanced/resource-selector.js"),c.moduleLoader.loadModule("jimu-core/data-source.js"),c.moduleLoader.loadModule("jimu-ui/basic/imagecrop.js"),c.moduleLoader.loadModule("jimu-core/react-dom/server.js")];Promise.all(e).then((e=>{this.isLoadModuleForBuilder=!1}))},this.getRole=()=>{var e,t;let{userRole:i}=this.state;switch(null===(t=null===(e=this.props)||void 0===e?void 0:e.user)||void 0===t?void 0:t.role){case n.OrgAdmin:i=n.OrgAdmin;break;case n.OrgPublisher:i=n.OrgPublisher;break;case n.OrgUser:i=n.OrgUser;break;default:i=n.CustomRoles}this.setState({userRole:i})},this.initDropdownData=()=>{const{sortDropdownData:t,classifyDropdownData:i}=this.state;window.jimuConfig.isDevEdition||(t.push({value:"numViews",text:this.nls("applistViews")}),i.push({value:e.MyFavorites,text:this.nls("myFavorites")}),i.push({value:e.NotMe,text:this.nls("sharedWithMe")})),this.setState({sortDropdownData:t,classifyDropdownData:i})},this.getGroupList=()=>{var e;if(window.jimuConfig.isDevEdition)return!1;const t=(null===(e=this.props.user)||void 0===e?void 0:e.groups)||(0,c.Immutable)([]),s=[{value:i.AllGroup,text:this.nls("allApp")},{value:i.Org,text:this.nls("myOrganization",!0)}],{updateGroupIdData:a}=this.state;t.forEach((e=>{const t={value:e.id,text:e.title};e.capabilities.indexOf("updateitemcontrol")>-1&&a.push(e.id),s.push(t)})),this.setState({groupListData:s,updateGroupIdData:a})},this.getFolderList=()=>!window.jimuConfig.isDevEdition&&g.appServices.getFolders({num:1}).then((e=>{const t=e||[];this.initFolderListData(t)}),(e=>Promise.reject(e))),this.initFolderListData=e=>{const{user:i}=this.props,s=(null==i?void 0:i.username)||"",a=[{value:t.AllFolder,text:this.nls("allApp")}];s&&a.push({value:"root",text:s}),e.forEach((e=>{const t={value:e.id,text:e.title};a.push(t)})),this.setState({folderListData:a})},this.nls=(e,t=!1)=>t?this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:d.defaultMessages[e]}):e:this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:u[e]}):e,this.getRequestOption=(e,t=!1,i=o.My)=>{let s=(0,c.Immutable)({});s=s.merge({q:this.getSharedRequestOptionAttrQ(i)}),e&&(s="title"===e?s.merge({sortField:e,sortOrder:"asc"}):s.merge({sortField:e,sortOrder:"desc"})),window.jimuConfig.isDevEdition&&(s=s.merge({portalUrl:this.props.portalUrl}));const a=this.getPageNumAndStartNum(t,i);return s=s.merge({num:a.num,start:a.start}),s},this.getPageNumAndStartNum=(e,t=o.Group)=>{const i={num:30,start:1},{exbAdminTemplate:s,myTemplate:a}=this.state;if(e)switch(t){case o.ExbAdmin:i.start=s.length+1;break;default:i.start=a.length+1}return i},this.getSharedRequestOptionAttrQ=(e=o.Group)=>{const{groupId:t,folderId:i,userRole:s,searchTextForRequest:a}=this.state,l=c.SessionManager.getInstance().getMainSession(),r=this.props.user,p=this.getExperienceType(),{isTemplateList:d}=this.props.config,h=(null==r?void 0:r.favGroupId)||"",m=(null==l?void 0:l.username)||"",u=a?`(${a})`:"";if(!l||!r)return`type: ${p} ${u}`;const g=(null==r?void 0:r.groups.map((e=>e.id)))||[],v=`type: ${this.getExperienceType()}`,f=g.length>0?g.join(" OR "):"",w=f?"OR "+f:"",b=`NOT owner:${m}`,x="(access:shared OR access:public OR access:org)",y=s===n.OrgAdmin?"(access:org OR access:private)":"access:org",I=s===n.OrgAdmin?"(access:org OR access:private)":"(access:org)",S=d?I:y,$=f?`((orgid:${null==r?void 0:r.orgId} ${y}) OR (group: (${f}) ${x}))`:`(orgid:${null==r?void 0:r.orgId} ${y})`,j=`(orgid:${null==r?void 0:r.orgId} ${S}) OR (group: (${h} ${w}))`;switch(e){case o.Group:return`group:(${t}) type: ${p} ${x} NOT owner:${m} ${u}`;case o.Org:return`orgid:${null==r?void 0:r.orgId} ${v} ${y} NOT owner:${m} ${u}`;case o.OrgAndGroupNotMe:return`${$} ${v} ${b} ${u}`;case o.All:return window.jimuConfig.isDevEdition?`type: ${p} ${u}`:`${v} (${j} OR (owner:${m} AND NOT owner:ExB_team)) ${u}`;case o.ExbAdmin:return`type: "Web Experience Template" AND owner:ExB_team ${u}`;case o.My:return`type: ${p} orgid:${null==r?void 0:r.orgId} AND owner:${m} ${u}`;case o.Folder:return`type: ${p} ownerfolder: ${i} AND owner:${m} ${u}`;case o.Favorites:case o.AllFavorites:return`group: "${h}" type: ${p} ${u}`;case o.PubLic:return`type: ${p} access:public NOT owner:${m} AND NOT owner:ExB_team ${u}`}},this.refresh=(e,t=!1)=>{e&&!this.isRefuseSearchRequest()&&(this.searchPromise=null,this.searchPromise=this.appServiceSearchApp(e),this.searchPromise.then((e=>{const i=e.results;this.searchPromise?(this.refreshSetState(i,t),this.nextStart=e.nextStart,this.appListTotal=e.total,this.setState({isLoadSkeleton:!1})):this.setState({isLoadSkeleton:!1})}),(()=>{this.setState({isLoadSkeleton:!1})})))},this.refreshSetState=(e,t=!1)=>{const i=t?this.state.apps.asMutable({deep:!0}):[],s=t?this.state.myTemplate.asMutable({deep:!0}):[];let a=[];a=t?s.concat(e):e,e=this.initAppInfo(e),this.setState({myTemplate:(0,c.Immutable)(a),apps:(0,c.Immutable)(i.concat(e))},(()=>{this.getItemsGroups((0,c.Immutable)(e),!1,t),this.getItemsGroups((0,c.Immutable)(e),!0,t),this.isHadSearchList=!0})),clearTimeout(this.preloadModulesTimeout),this.preloadModulesTimeout=setTimeout((()=>{this.preloadModule()}),1e3)},this.initAppInfo=e=>{const{userRole:t}=this.state;return e.map((e=>{var i;return e.isLocalApp=window.jimuConfig.isDevEdition,e.portalUrl=null===(i=null==this?void 0:this.props)||void 0===i?void 0:i.portalUrl,e.userRole=t,e}))},this.isRefuseSearchRequest=()=>{const{accessType:t}=this.state,{isTemplateList:i}=this.props.config;return!(!window.jimuConfig.isDevEdition||!i||t!==e.NotMe)},this.getItemsGroups=(t,i=!1,s=!1)=>{if(window.jimuConfig.isDevEdition)return!1;const a=this.props.user,o=null==a?void 0:a.favGroupId,{updateGroupIdData:l,accessType:r}=this.state,n=s?this.state.allFavoritesIdData.asMutable({deep:!0}):[],p=s?this.state.updateGroupItemId.asMutable({deep:!0}):[];if(r===e.Me&&i||0===t.length||i&&0===l.length)return!1;let d=i?p:n;const h={items:t.map((e=>e.id)).join(","),groups:i?l.join(","):o};g.appServices.getAppGroups(h).then((e=>{var t,s;for(const i in e)null===(s=null===(t=e[i])||void 0===t?void 0:t.items)||void 0===s||s.forEach((e=>{d=d.concat([e.itemId])}));i?this.setState({updateGroupItemId:(0,c.Immutable)(d)}):this.setState({allFavoritesIdData:(0,c.Immutable)(d)})}))},this.appServiceSearchApp=e=>pe(this,void 0,void 0,(function*(){return yield g.appServices.searchApp(e,g.SearchType.Other)})),this.newApp=()=>{let e=`${window.jimuConfig.mountPath}builder/`;const t=this.getFolderIdForCreateApp();e=window.jimuConfig.useStructuralUrl?`${e}page/template`:`${e}?page=template`;const i=this.getQueryString("locale");i&&(e=c.urlUtils.appendQueryParam(e,"locale",i)),t&&(e=c.urlUtils.appendQueryParam(e,"folderId",t)),e=c.urlUtils.appendQueryParam(e,"redirect","homePage"),window.location.assign(e)},this.deleteApp=e=>{this.setState({loading:!0}),g.appServices.deleteApp(e).then((()=>{this.setState({loading:!1}),this.removeItem(e)}),(e=>{const t="CONT_0048"===(null==e?void 0:e.code)?this.nls("unableDelete"):this.nls("deleteError");this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})}))},this.refreshList=(e=!0)=>{this.setState({filterTitle:this.props.config.isTemplateList?this.nls("templateLabelByModified"):this.nls("labelByModified")}),e&&this.setState({searchText:""}),setTimeout((()=>{this.getParamsAndRefresh()}),1e3)},this.getFilterTitle=()=>{},this.duplicateAppItem=e=>{this.setState({loading:!0});const t=this.getFolderIdForCreateApp();g.appServices.duplicateApp(e,t).then((e=>{this.setState({loading:!1}),e&&this.refreshList(!1)}),(e=>{const t=e&&e.indexOf("Resource does not exist")>-1?this.nls("noResource"):this.nls("duplicateError");this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})}))},this.createApp=e=>{let t=this.getQueryString("locale");t=t?`&locale=${t}`:"",this.setState({loading:!0});const i=this.getFolderIdForCreateApp();g.appServices.createAppByItemTemplate(e,i).then((e=>{if(e){const i=window.jimuConfig.mountPath+"builder/?id="+e+t;window.location.href=i}this.setState({loading:!1})}),(e=>{const t=e&&e.indexOf("Resource does not exist")>-1?this.nls("noResource"):this.nls("createError");this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})}))},this.switchListView=e=>{this.setState({isDetailContent:e})},this.accessChange=s=>{let{subclassification:a}=this.state;s===e.Me?a=t.AllFolder:s===e.NotMe&&(a=i.AllGroup),this.setState({accessType:s,subclassification:a,subclassificationValue:a},(()=>{this.getParamsAndRefresh()}))},this.sharedAccessChange=e=>{const t=e.target.value;if(t===s.Default){const e=this.props.config.isTemplateList?this.nls("templateLabelByTitle"):this.nls("labelByTitle");this.setState({filterField:"title",filterTitle:e})}this.setState({sharedAccesstype:t},(()=>{this.getParamsAndRefresh()}))},this.filterFieldChange=e=>{let t="";const{isTemplateList:i}=this.props.config;e===a.Title?t=i?this.nls("templateLabelByTitle"):this.nls("labelByTitle"):e===a.NumViews?t=i?this.nls("templateLabelByView"):this.nls("labelByView"):e===a.Modified&&(t=i?this.nls("templateLabelByModified"):this.nls("labelByModified")),this.setState({filterField:e,filterTitle:t},(()=>{0!==this.state.apps.length&&this.getParamsAndRefresh()}))},this.handleKeydown=e=>{const t=e.target.value;"Enter"===e.key&&t&&this.setState({searchTextForRequest:t},(()=>{clearTimeout(this.onSearchTextInputed),this.getParamsAndRefresh()}))},this.searchTextChange=e=>{const t=e.target.value,i=t.length<3&&t.length>0;let{searchTextForRequest:s}=this.state;s=i?s:t,this.setState({searchText:t,searchTextForRequest:s},(()=>{if(i)return!1;clearTimeout(this.onSearchTextInputed),this.onSearchTextInputed=setTimeout((()=>{this.getParamsAndRefresh()}),500)}))},this.clearSearchText=()=>{const{searchTextForRequest:e}=this.state;clearTimeout(this.onSearchTextInputed),this.setState({searchText:"",searchTextForRequest:""},(()=>{e&&this.getParamsAndRefresh()}))},this._matchearchText=e=>{const{searchText:t}=this.state;return!t||!e||e.toLowerCase().indexOf(t.toLowerCase())>-1},this.getSubclassification=s=>{let{folderId:a,groupId:o,subclassification:l}=this.state;const{accessType:r}=this.state;switch(r){case e.Me:s===t.AllFolder?(l=t.AllFolder,a=""):(l=t.OtherFolder,a=s);break;case e.NotMe:s===i.AllGroup||s===i.Org?(l=s,o=""):(l=i.OtherGroup,o=s)}this.setState({folderId:a,groupId:o,subclassification:l,subclassificationValue:s},(()=>{this.getParamsAndRefresh()}))},this.favoriteTogle=(e,t)=>pe(this,void 0,void 0,(function*(){const i=this.props.user,s={everyone:!1,org:!1,groups:null==i?void 0:i.favGroupId,items:t};return this.setState({loading:!0}),e?yield this.removeFromFavorites(s):yield this.addToFavorite(s)})),this.addToFavorite=e=>pe(this,void 0,void 0,(function*(){const t=this.state.allFavoritesIdData.asMutable();return yield g.appServices.addToFavorites(e).then((i=>pe(this,void 0,void 0,(function*(){return t.push(e.items),this.setState({allFavoritesIdData:(0,c.Immutable)(t),loading:!1}),yield Promise.resolve(i)}))),(e=>pe(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.removeFromFavorites=t=>pe(this,void 0,void 0,(function*(){const{accessType:i,allFavoritesIdData:s}=this.state,a=s.filter((e=>e!==t.items));return g.appServices.removeFromFavorites(t).then((s=>pe(this,void 0,void 0,(function*(){return this.setState({loading:!1,allFavoritesIdData:(0,c.Immutable)(a)}),i===e.MyFavorites&&this.removeItem(t.items),yield Promise.resolve(s)}))),(e=>pe(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.removeItem=e=>{const t=this.state.apps.asMutable({deep:!0}),i=this.state.myTemplate.asMutable({deep:!0}),s=t.filter((t=>t.id!==e)),a=i.filter((t=>t.id!==e));this.setState({apps:(0,c.Immutable)(s),myTemplate:(0,c.Immutable)(a)})},this.getSubclassificationData=t=>{const{folderListData:i,groupListData:s}=this.state;let a=[];return t===e.Me&&(a=i),t===e.NotMe&&(a=s),a},this.isShowClassifyDropdown=()=>{const t=!!c.SessionManager.getInstance().getMainSession(),i=window.jimuConfig.isDevEdition,{accessType:s}=this.state;return t&&(s===e.Me||s===e.NotMe)&&!i},this.checkUserPrivilege=()=>pe(this,void 0,void 0,(function*(){const{CheckTarget:e}=c.privilegeUtils,{capabilities:t}=this.state;return yield c.privilegeUtils.checkExbAccess(e.AppList).then((e=>{this.setState({valid:null==e?void 0:e.valid,invalidMessage:null==e?void 0:e.invalidMessage,capabilities:(null==e?void 0:e.capabilities)||t,isPrivilegeCheckEnd:!0})}))})),this.toggleAlertPopup=()=>{this.setState({isShowAlertPopup:!this.state.isShowAlertPopup,alertPopupMessage:""})},this.filterUserFolder=()=>this.state.folderListData.map((e=>e.value.includes("root")?{value:"/",text:e.text}:e)).filter((e=>!e.value.includes("AllFolder"))),this.updateAppList=(e,t)=>{if(!e)return;const i=this.state.apps.asMutable({deep:!0});i[t]=e,this.setState({apps:(0,c.Immutable)(i)})},this.isShowAccessTypeDropdown=()=>{const{userRole:e}=this.state;return!(!c.SessionManager.getInstance().getMainSession()||window.jimuConfig.isDevEdition&&(!window.jimuConfig.isDevEdition||e!==n.OrgAdmin))},this.getItemRowNumber=()=>{var e;const t=null===(e=this.appListContainer)||void 0===e?void 0:e.clientWidth;return Math.floor(t/244)},this.getSearchInputSuffixElement=e=>e.length>0&&(0,c.jsx)("div",{onClick:this.clearSearchText},(0,c.jsx)(w,{autoFlip:!0,size:14,className:"app-list-clear "})),this.getSearchInputprefixElement=()=>(0,c.jsx)("div",{onClick:()=>{this.getParamsAndRefresh()}},(0,c.jsx)(ie,{autoFlip:!0,className:"app-list-searchIconFill"})),this.state={apps:(0,c.Immutable)([]),exbAdminTemplate:(0,c.Immutable)([]),myTemplate:(0,c.Immutable)([]),isDetailContent:!0,accessType:e.Me,filterTitle:this.props.config.isTemplateList?this.nls("templateLabelByModified"):this.nls("labelByModified"),filterField:a.Modified,searchText:"",searchTextForRequest:"",loading:!1,isLoadSkeleton:!1,experienceType:g.AppType.ExperienceType,sharedAccesstype:s.Default,isRoleViewer:!0,folderId:"",groupId:"",subclassification:t.AllFolder,subclassificationValue:t.AllFolder,folderListData:[],groupListData:[],allFavoritesIdData:(0,c.Immutable)([]),updateGroupIdData:[],updateGroupItemId:(0,c.Immutable)([]),userRole:n.CustomRoles,valid:!0,invalidMessage:"",isShowAlertPopup:!1,alertPopupMessage:"",isPrivilegeCheckEnd:!1,capabilities:{canCreateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canUpdateExperience:!1,canViewExperience:!1},classifyDropdownData:[{value:e.Anyone,text:this.nls("allApp")},{value:e.Me,text:this.nls("ownByMe")}],sortDropdownData:[{value:"modified",text:this.nls("orderByModified")},{value:"title",text:this.nls("orderByTitle")}]},this.onScrollHandle=this.onScrollHandle.bind(this)}componentDidMount(){this.props.isTest&&this.preloadData()}componentDidUpdate(e){const{config:t,queryObject:i,portalUrl:s}=this.props,a=t.isTemplateList||!1,o="templatelist"===(null==i?void 0:i.views),l=(null==e?void 0:e.portalUrl)!==s,r=o===a&&!this.isHasPreload;(l||r)&&this.preloadData(),(null==e?void 0:e.user)!==this.props.user&&this.isHasPreload&&this.getParamsAndRefresh(),(null==e?void 0:e.user)!==this.props.user&&this.getRole()}getFoldersAndGroup(){this.getFolderList(),this.getGroupList()}onScrollHandle(e){const t=e.target.clientHeight,i=e.target.scrollHeight-2,s=e.target.scrollTop;if(s>this.scrollPosition){const e=t+s>=i;!this.state.isLoadSkeleton&&e&&0!==this.state.apps.length&&this.getParamsAndRefresh(!0)}this.scrollPosition=s}componentWillUnmount(){this.contentNode&&(this.contentNode.removeEventListener("scroll",this.onScrollHandle.bind(this)),ce.scrollTop=this.contentNode.scrollTop)}getExperienceType(){let e=g.AppType.ExperienceType;return this.props.config.isTemplateList&&(e=g.AppType.TemplateType),this.setState({experienceType:e}),`"${e}"`}getQueryString(e){return c.queryString.parse(window.location.search)[e]||""}getParamsAndRefresh(s=!1){const a=this.nextStart,l=this.appListTotal,r=a&&l&&(a>l||a<0)&&s;if(!this.props.user||r)return;s?this.isHadSearchList=!1:(this.nextStart=null,this.appListTotal=null,this.setState({apps:(0,c.Immutable)([])})),this.setState({isLoadSkeleton:!0});const{accessType:n,subclassification:p}=this.state;if(n===e.Default)return this.setState({isLoadSkeleton:!1}),!1;let d=o.My;switch(n){case e.Me:d=p===t.AllFolder?o.My:o.Folder;break;case e.Anyone:d=o.All;break;case e.NotMe:d=p===i.AllGroup?o.OrgAndGroupNotMe:p===i.Org?o.Org:o.Group;break;case e.MyFavorites:d=o.Favorites;break;case e.Public:d=o.PubLic}const h=this.getRequestOption(this.state.filterField,s,d);this.refresh(h,s)}experiencesRefresh(e=!1){const t=this.getRequestOption(this.state.filterField,e);this.setState({isLoadSkeleton:!0}),this.refresh(t,e)}getFolderIdForCreateApp(){const{folderId:e}=this.state,t=!e.includes("root");return e&&!window.jimuConfig.isDevEdition&&t?e:null}render(){const{isDetailContent:e,loading:t,accessType:i,classifyDropdownData:s,sortDropdownData:a,subclassificationValue:o,allFavoritesIdData:l,capabilities:r,updateGroupItemId:n,valid:p,invalidMessage:m,apps:u,isShowAlertPopup:g,alertPopupMessage:v,searchText:f,isPrivilegeCheckEnd:w,isLoadSkeleton:b}=this.state,x=this.props.config.isTemplateList||!1,y=this.getSubclassificationData(i),I=this.getItemRowNumber(),S={deleteApp:this.deleteApp,refreshList:this.refreshList,duplicateAppItem:this.duplicateAppItem,createApp:this.createApp,favoriteTogle:this.favoriteTogle,getFolderList:this.getFolderList,isLoadSkeleton:b,theme:this.props.theme,skeletonNum:I};return p||this.props.isTest?(0,c.jsx)(h.Provider,{value:S},(0,c.jsx)("div",{css:H(this.props.theme),className:"h-100","data-testid":"app-list"},(0,c.jsx)("div",{className:"widget-builder-app-list bg-light-300 h-100"},(0,c.jsx)("div",{className:"banner-con bg-light-300"},(0,c.jsx)("div",{className:"widget-builder-app-list-screen"},(0,c.jsx)("div",{style:{overflow:"hidden"},className:"app-list-search-container"},(0,c.jsx)("div",{className:"app-list-banner d-flex justify-content-between",style:{position:"relative"}},(0,c.jsx)("h2",{className:" list-title"},this.state.filterTitle),!x&&r.canCreateExperience&&(0,c.jsx)(d.Button,{className:"float-left btn-lg pt-0 pb-0 app-list-newapp mr-4",size:"lg",type:"primary",onClick:this.newApp},(0,c.jsx)(L,{autoFlip:!0,className:"app-list-newapp-icon"}),this.nls("newApp"))))),(0,c.jsx)("div",{className:"app-list-filterbar "},(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center app-list-filterbar-title widget-builder-app-list-screen"},(0,c.jsx)("div",{className:"search-con d-flex position-relative"},(0,c.jsx)(d.TextInput,{className:"float-left app-list-searchbox app-list-h1 flex-sm-fill",placeholder:this.nls("homePageSearch"),onChange:this.searchTextChange,value:f,prefix:this.getSearchInputprefixElement(),suffix:this.getSearchInputSuffixElement(f),ref:e=>{this.searchInput=e},onKeyDown:e=>{this.handleKeydown(e)}})),(0,c.jsx)("div",{className:"text-right align-middle"},this.isShowAccessTypeDropdown()&&(0,c.jsx)(Z,{onChange:this.accessChange,value:i,isShowSelectIcon:!0,dropDownData:s}),this.isShowClassifyDropdown()&&y.length>0&&(0,c.jsx)(Z,{onChange:this.getSubclassification,value:o,isShowSelectIcon:!0,dropDownData:y}),(0,c.jsx)(Z,{onChange:this.filterFieldChange,value:this.state.filterField,isShowSelectIcon:!0,dropDownData:a}),(0,c.jsx)("div",{className:"app-list-switchview-con","data-testid":"icon-view-con"},(0,c.jsx)(d.Button,{icon:!0,type:e?"primary":void 0,title:this.nls("cardView"),className:" app-list-switchview ",onClick:()=>this.switchListView(!0),"data-testid":"icon-view-card"},(0,c.jsx)(oe,{autoFlip:!0,className:"app-list-iconfill app-list-iconmargin",size:14})),(0,c.jsx)(d.Button,{icon:!0,"data-testid":"icon-view-list",type:e?void 0:"primary",title:this.nls("listView"),className:" app-list-switchview app-list-switchview-btton app-list-switchview-right",onClick:()=>this.switchListView(!1)},(0,c.jsx)(ne,{autoFlip:!0,className:"app-list-iconfill app-list-iconmargin",size:14}))))))),(0,c.jsx)("div",{className:"app-list-item-scroll-con",ref:e=>this.contentNode=e},(0,c.jsx)("div",{className:"widget-builder-app-list-screen",ref:e=>{this.appListContainer=e}},(0,c.jsx)("div",{className:"app-list-content",id:"itemContent"},(0,c.jsx)(V,{isDetailContent:this.state.isDetailContent,portalUrl:this.props.portalUrl,intl:this.props.intl,folderUrl:this.props.context.folderUrl,apps:u,switchListView:this.switchListView,isTemplateList:x,allFavoritesIdData:l,capabilities:r,updateGroupItemId:n,folderListData:this.filterUserFolder(),isPrivilegeCheckEnd:w,updateAppList:this.updateAppList}))),u.length<1&&!t&&!b&&this.isHadSearchList&&(0,c.jsx)(q,{searchText:f,isTemplateList:x,accessType:i,intl:this.props.intl,portalUrl:this.props.portalUrl,folderUrl:this.props.context.folderUrl}))),this.state.loading&&(0,c.jsx)("div",{className:"loading-con"},(0,c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"})),(0,c.jsx)(d.AlertPopup,{isOpen:g,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.toggleAlertPopup},(0,c.jsx)("div",{style:{fontSize:"1rem"}},v)))):(0,c.jsx)("div",{css:H(this.props.theme),className:"invalid-message position-absolute"},m)}}ce.scrollTop=0,ce.mapExtraStateProps=(e,t)=>({queryObject:e.queryObject})})(),r})())}}}));