System.register(["jimu-core","jimu-core/dnd","jimu-for-builder","jimu-for-builder/templates","jimu-layouts/layout-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/basic/list-tree"],(function(e,t){var i={},s={},o={},n={},a={},l={},r={},c={},p={},d={},g={},h={},u={};return{setters:[function(e){i.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,i.AnimationPlayMode=e.AnimationPlayMode,i.AnimationType=e.AnimationType,i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.DataActionManager=e.DataActionManager,i.DialogInteractionType=e.DialogInteractionType,i.DialogMode=e.DialogMode,i.DialogPosition=e.DialogPosition,i.ErrorBoundary=e.ErrorBoundary,i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.LayoutType=e.LayoutType,i.LinkType=e.LinkType,i.PageMode=e.PageMode,i.PagePart=e.PagePart,i.PageType=e.PageType,i.React=e.React,i.ReactRedux=e.ReactRedux,i.WidgetType=e.WidgetType,i.appActions=e.appActions,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.getMessageTypeLabel=e.getMessageTypeLabel,i.i18n=e.i18n,i.injectIntl=e.injectIntl,i.jsx=e.jsx,i.lodash=e.lodash,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.urlUtils=e.urlUtils,i.utils=e.utils,i.version=e.version},function(e){s.interact=e.interact},function(e){o.AppDataActionManager=e.AppDataActionManager,o.AppMessageManager=e.AppMessageManager,o.WidgetSettingManager=e.WidgetSettingManager,o.builderAppSync=e.builderAppSync,o.getAppConfigAction=e.getAppConfigAction,o.helpUtils=e.helpUtils,o.templateUtils=e.templateUtils,o.utils=e.utils},function(e){n.getScreenTemplates=e.getScreenTemplates},function(e){a.ColumnLayoutItemSetting=e.ColumnLayoutItemSetting,a.FixedLayoutItemSetting=e.FixedLayoutItemSetting,a.FlowLayoutItemSetting=e.FlowLayoutItemSetting,a.FlowLayoutSetting=e.FlowLayoutSetting,a.RowLayoutItemSetting=e.RowLayoutItemSetting},function(e){l.DEFAULT_AUTOPLAY_INTERVAL=e.DEFAULT_AUTOPLAY_INTERVAL,l.LayoutItemSizeModes=e.LayoutItemSizeModes,l.searchUtils=e.searchUtils,l.utils=e.utils},function(e){r.withTheme=e.withTheme},function(e){c.Button=e.Button,c.ButtonGroup=e.ButtonGroup,c.Checkbox=e.Checkbox,c.Collapse=e.Collapse,c.Dropdown=e.Dropdown,c.DropdownButton=e.DropdownButton,c.DropdownItem=e.DropdownItem,c.DropdownMenu=e.DropdownMenu,c.FillType=e.FillType,c.Icon=e.Icon,c.Label=e.Label,c.Link=e.Link,c.Loading=e.Loading,c.LoadingType=e.LoadingType,c.MultiSelect=e.MultiSelect,c.NumericInput=e.NumericInput,c.PanelHeader=e.PanelHeader,c.Radio=e.Radio,c.Select=e.Select,c.Sides=e.Sides,c.Slider=e.Slider,c.Switch=e.Switch,c.Tab=e.Tab,c.Tabs=e.Tabs,c.TextArea=e.TextArea,c.TextInput=e.TextInput,c.Tooltip=e.Tooltip,c.UnitTypes=e.UnitTypes,c.defaultMessages=e.defaultMessages,c.utils=e.utils},function(e){p.IconPicker=e.IconPicker},function(e){d.DirectionSelector=e.DirectionSelector,d.LinkSettingPopup=e.LinkSettingPopup,d.OpenTypes=e.OpenTypes,d.SettingCollapse=e.SettingCollapse,d.SettingRow=e.SettingRow,d.SettingSection=e.SettingSection,d.SidePopper=e.SidePopper,d.TemplateSelector=e.TemplateSelector},function(e){g.AnimationSettingComponent=e.AnimationSettingComponent,g.BackgroundSetting=e.BackgroundSetting,g.BorderRadiusSetting=e.BorderRadiusSetting,g.BorderSetting=e.BorderSetting,g.BoxShadowSetting=e.BoxShadowSetting,g.FourSides=e.FourSides,g.InputUnit=e.InputUnit,g.SizeEditor=e.SizeEditor},function(e){h.ThemeColorPicker=e.ThemeColorPicker},function(e){u.List=e.List,u.TreeItemActionType=e.TreeItemActionType}],execute:function(){e((()=>{var e={748:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 10-6.586 4.533l-.077-1.008A5.5 5.5 0 1112 6.5zm-9 0a3.501 3.501 0 002.88 3.445L5.8 8.901a2.501 2.501 0 113.194-2.224l.949.456A3.5 3.5 0 103 6.5zM15.5 11l-5 1-3 4-1-9.5 9 4.5zm-5.57.094l-1.702 2.269-.542-5.152 4.76 2.38-2.517.503z" fill="#000"></path></svg>'},9338:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 1H7v2h2V1zM9 5H7v2h2V5zM7 9h2v2H7V9zM9 13H7v2h2v-2z" fill="#000"></path></svg>'},5369:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 7a1 1 0 100 2 1 1 0 000-2zm5 1a1 1 0 112 0 1 1 0 01-2 0zm6 0a1 1 0 112 0 1 1 0 01-2 0z" fill="#000"></path></svg>'},1553:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 01.556.188l1.42 2.394a.43.43 0 01-.091.547 21.98 21.98 0 01-1.49 1.194 5.17 5.17 0 01-.007 1.183l1.464 1.119a.43.43 0 01.111.563l-1.42 2.394a.454.454 0 01-.53.197 22.445 22.445 0 01-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 01-.445.376H6.574a.446.446 0 01-.44-.35 21.019 21.019 0 01-.317-1.853 5.34 5.34 0 01-1.047-.598l-1.728.675a.455.455 0 01-.556-.187l-1.42-2.395a.43.43 0 01.091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 01.008-1.183L1.19 6.243a.43.43 0 01-.112-.562l1.42-2.395a.455.455 0 01.531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 016.6.994h2.839zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 00-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 00.02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 00.98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 00-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48zm-1.067 3a3 3 0 110 6 3 3 0 010-6zm0 1a2 2 0 100 4 2 2 0 000-4z" fill="#000"></path></svg>'},8683:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 5H2v6h4V5zM1 4v8h6V4H1zM14 5h-4v6h4V5zM9 4v8h6V4H9z" fill="#000"></path></svg>'},760:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2h12v4H2V2zM1 7V1h14v6H1zm1 3h12v4H2v-4zm-1 5V9h14v6H1z" fill="#000"></path></svg>'},9788:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.146 4.653a.485.485 0 01.708 0L8 10.24l5.146-5.587a.485.485 0 01.708 0 .538.538 0 010 .738l-5.5 5.956a.485.485 0 01-.708 0l-5.5-5.956a.538.538 0 010-.738z" fill="#000"></path></svg>'},4201:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 14a.5.5 0 000-1h-6l3.953-3.459a.5.5 0 00-.658-.752L8 11.234V1.5a.5.5 0 00-1 0v9.734L4.206 8.789a.5.5 0 00-.659.752L7.5 13h-6a.5.5 0 000 1h12z" fill="#000"></path></svg>'},4703:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 0a.5.5 0 00-.5.5v14a.5.5 0 001 0V.5a.5.5 0 00-.5-.5zM0 7.5c0 .291.231.527.516.527h3.508L2.527 9.6a.535.535 0 000 .746.508.508 0 00.73 0L6 7.5 3.257 4.654a.508.508 0 00-.73 0 .535.535 0 000 .746l1.497 1.573H.516A.522.522 0 000 7.5zm15 0a.522.522 0 01-.516.527h-3.508L12.473 9.6a.535.535 0 010 .746.508.508 0 01-.73 0L9 7.5l2.743-2.846a.508.508 0 01.73 0 .535.535 0 010 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527z" fill="#000"></path></svg>'},1528:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 13.5a.5.5 0 001 0v-6l3.459 3.953a.5.5 0 00.752-.658L3.766 8H13.5a.5.5 0 000-1H3.766l2.445-2.794a.5.5 0 10-.752-.659L2 7.5v-6a.5.5 0 00-1 0v12z" fill="#000"></path></svg>'},7319:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5a.5.5 0 00-1 0v6L9.541 3.547a.5.5 0 10-.752.658L11.234 7H1.5a.5.5 0 000 1h9.734l-2.445 2.794a.5.5 0 10.752.659L13 7.5v6a.5.5 0 001 0v-12z" fill="#000"></path></svg>'},3166:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 1a.5.5 0 000 1h6L3.547 5.459a.5.5 0 10.658.752L7 3.766V13.5a.5.5 0 001 0V3.766l2.794 2.445a.5.5 0 10.659-.752L7.5 2h6a.5.5 0 000-1h-12z" fill="#000"></path></svg>'},5234:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2h4v4H2V2zM1 7V1h6v6H1zm1 3h4v4H2v-4zm-1 5V9h6v6H1zM14 2h-4v4h4V2zM9 1v6h6V1H9zm2.5 14v-2.5H9v-1h2.5V9h1v2.5H15v1h-2.5V15h-1z" fill="#000"></path></svg>'},5339:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.745 8l6.1 6.1a.527.527 0 11-.745.746L8 8.746l-6.1 6.1a.527.527 0 11-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 01.746-.746l6.1 6.1 6.1-6.1a.527.527 0 01.746.746L8.746 8z" fill="#000"></path></svg>'},9216:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.226 1.312c-.403-.404-1.044-.417-1.431-.03L2.49 8.587l-.48 2.674a.637.637 0 00.73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431l-1.462-1.462zm-8.113 9.575l.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991-1.781.32zm7.473-6.012l1.402-1.4-1.462-1.463-1.401 1.402 1.461 1.461z" fill="#000"></path><path d="M1.5 14a.5.5 0 000 1h13a.5.5 0 000-1h-13z" fill="#000"></path></svg>'},9395:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.522.522 0 00.527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.508.508 0 000-.73L7.5 0 3.654 3.743a.508.508 0 000 .73c.206.202.54.202.746 0l2.573-2.497v9.508zM1 8v7h13V8h1v8H0V8h1z" fill="#000"></path></svg>'},4750:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 0a.5.5 0 00-.5.5V7H.5a.5.5 0 000 1H7v6.5a.5.5 0 001 0V8h6.5a.5.5 0 000-1H8V.5a.5.5 0 00-.5-.5z" fill="#000"></path></svg>'},224:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5a5.5 5.5 0 11-11 0 5.5 5.5 0 0111 0zm-1.27 4.936a6.5 6.5 0 11.707-.707l4.136 4.137a.5.5 0 11-.707.707l-4.137-4.137z" fill="#000"></path></svg>'},4357:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6.5a.5.5 0 011 0v6a.5.5 0 01-1 0v-6zM9.5 6a.5.5 0 00-.5.5v6a.5.5 0 001 0v-6a.5.5 0 00-.5-.5z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0H5a1 1 0 00-1 1v2H.5a.5.5 0 000 1h1.6l.81 11.1a1 1 0 00.995.9h8.19a1 1 0 00.995-.9L13.9 4h1.6a.5.5 0 000-1H12V1a1 1 0 00-1-1zm0 3V1H5v2h6zm1.895 1h-9.79l.8 11h8.19l.8-11z" fill="#000"></path></svg>'},1397:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 8A7 7 0 111 8a7 7 0 0114 0zm1 0A8 8 0 110 8a8 8 0 0116 0zm-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597zm.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792 0-.48.348-.804.78-.804.42 0 .768.324.768.804z" fill="#000"></path></svg>'},8866:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.5a1 1 0 100-2 1 1 0 000 2zM6.5 7.5A.5.5 0 017 7h1.5v4.5h1a.5.5 0 010 1h-3a.5.5 0 010-1h1V8H7a.5.5 0 01-.5-.5z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16A8 8 0 118 0a8 8 0 010 16zm0-1A7 7 0 108 1a7 7 0 000 14z" fill="#000"></path></svg>'},7972:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.305 7.294L10.693.215a.79.79 0 011.083 0c.299.287.299.751 0 1.038L4.736 8l7.04 6.747c.299.287.299.751 0 1.038a.79.79 0 01-1.083 0l-7.388-7.08a.968.968 0 010-1.41z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},3321:e=>{e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},325:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.637 15.866L30.951 27.18a2.667 2.667 0 01-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 01.781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 014.552.781l11.314 11.314L27.18.781a2.667 2.667 0 013.771 3.771L19.637 15.866z"></path></svg>'},8777:e=>{e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.667 10H1a1 1 0 01-1-1V3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H8.333l.448 1.342a.5.5 0 01-.475.658H3.694a.5.5 0 01-.475-.658L3.667 10zM1 3h10v6H1V3zm3.72 7l-.333 1h3.226l-.334-1H4.721z" fill="#000"></path></svg>'},6450:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h50v4H14z"></path></svg>'},6717:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="9" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},5241:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="16" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},9185:e=>{e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 0a2 2 0 012 2v16a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2h16zm1 5H1v13a1 1 0 00.883.993L2 19h16a1 1 0 00.993-.883L19 18V5zm-8.5 9a.5.5 0 010 1h-7a.5.5 0 010-1h7zm6-4a.5.5 0 010 1h-13a.5.5 0 010-1h13zM18 1H2a1 1 0 00-.993.883L1 2v2h18V2a1 1 0 00-.883-.993L18 1zM2.5 2a.5.5 0 110 1 .5.5 0 010-1zm2 0a.5.5 0 110 1 .5.5 0 010-1zm2 0a.5.5 0 110 1 .5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},9751:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.84a.502.502 0 010 .71L6 10.97A3.515 3.515 0 111.03 6l1.42-1.42a.502.502 0 11.71.71L1.74 6.71a2.51 2.51 0 103.55 3.55l1.42-1.42a.502.502 0 01.71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 10-3.55-3.55L5.29 3.16a.502.502 0 11-.71-.71L6 1.03A3.515 3.515 0 1110.97 6L9.55 7.42a.502.502 0 11-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 01.71.71L4.58 8.13a.502.502 0 01-.71-.71z" fill="#000" fill-rule="nonzero"></path></svg>'},8590:e=>{e.exports='<svg viewBox="0 0 9 12" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 0A2.5 2.5 0 017 2.5V4h1a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h1V2.5A2.5 2.5 0 014.5 0zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2zm0-6a1.5 1.5 0 00-1.493 1.356L3 2.5V4h3V2.5a1.5 1.5 0 00-1.356-1.493L4.5 1z" fill="#000" fill-rule="nonzero"></path></svg>'},1768:e=>{e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 9a.5.5 0 000 1h1a.5.5 0 000-1h-1z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm1 0h4v7H4V4z" fill="#000"></path></svg>'},1542:e=>{e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 2h-7v9h7V2zm-7-1a1 1 0 00-1 1v9a1 1 0 001 1h7a1 1 0 001-1V2a1 1 0 00-1-1h-7z" fill="#000"></path></svg>'},8922:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M4.586 8.657l6.01-6.01a.5.5 0 01.707.707l-6.01 6.01a1 1 0 01-1.414 0L.697 6.182a.5.5 0 01.707-.707l3.182 3.182z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},8907:e=>{e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm8.282-1.718a.961.961 0 011.359 0l4.077 4.077a.961.961 0 01-1.359 1.36l-4.077-4.078a.961.961 0 010-1.36z" fill="#000" fill-rule="nonzero"></path></svg>'},7486:e=>{e.exports='<svg viewBox="0 0 11 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 2.5C6 1.12 7.122 0 8.507 0c1.263 0 2.308.932 2.481 2.144l.011.145a.487.487 0 01-.463.51l-.024.001a.525.525 0 01-.524-.483 1.28 1.28 0 00-.023-.185 1.504 1.504 0 00-1.313-1.125L8.507 1c-.782 0-1.425.595-1.497 1.356l-.007.144V4H8a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h5V2.5zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2z" fill="#000" fill-rule="nonzero"></path></svg>'},7893:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJDb21wb25lbnRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IiQxNS1JdGVtLVNlbGVjdG9yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTA2LjAwMDAwMCwgLTMwOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJBdXRvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MDUuMDAwMDAwLCAzMDcuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDciIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IkxheW91dCIgZmlsbD0iIzUyNTI1MiIgeD0iNiIgeT0iMTQiIHdpZHRoPSI5MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iU2Nyb2xsLWJhciIgZmlsbD0iIzZBNkE2QSIgeD0iMTAxIiB5PSIzIiB3aWR0aD0iMyIgaGVpZ2h0PSI0MCIgcng9IjEuNSI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},4479:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IkNvbXBvbmVudHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iJDE1LUl0ZW0tU2VsZWN0b3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODcuMDAwMDAwLCAtMzA4LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IkN1c3RvbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg2LjAwMDAwMCwgMzA3LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iTGF5b3V0IiBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMTQiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMjgyODI4IiB4PSI4NyIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjY4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSI4NyIgeTE9IjAiIHgyPSI4NyIgeTI9IjY4IiBpZD0iRGFzaC1saW5lIiBzdHJva2U9IiM1MjUyNTIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjQsNCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMjgyODI4IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjIwIiB5MT0iMCIgeDI9IjIwIiB5Mj0iNjgiIGlkPSJEYXNoLWxpbmUiIHN0cm9rZT0iIzUyNTI1MiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iNCw0Ij48L2xpbmU+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJTY3JvbGwtYmFyIiBmaWxsPSIjNkE2QTZBIiB4PSIxMDEiIHk9IjMiIHdpZHRoPSIzIiBoZWlnaHQ9IjQwIiByeD0iMS41Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},1810:e=>{"use strict";e.exports=i},2008:e=>{"use strict";e.exports=s},3297:e=>{"use strict";e.exports=o},2986:e=>{"use strict";e.exports=n},9883:e=>{"use strict";e.exports=a},9169:e=>{"use strict";e.exports=l},3016:e=>{"use strict";e.exports=r},1835:e=>{"use strict";e.exports=c},831:e=>{"use strict";e.exports=p},3080:e=>{"use strict";e.exports=d},9820:e=>{"use strict";e.exports=g},3817:e=>{"use strict";e.exports=h},2165:e=>{"use strict";e.exports=u}},t={};function m(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,m),o.exports}m.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return m.d(t,{a:t}),t},m.d=(e,t)=>{for(var i in t)m.o(t,i)&&!m.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},m.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="";var f={};return m.p=window.jimuConfig.baseUrl,(()=>{"use strict";m.r(f),m.d(f,{default:()=>_t});var e=m(1810);const t={previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"Add view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view"};var i=m(3297),s=m(1835);class o extends e.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.formatMessage(e),this.onSettingChange=(e,t)=>(0,i.getAppConfigAction)().editWidget(e,t).exec(),this.renderWidgetSetting=t=>{const o=this.props.widgetsSettingRuntimeInfo[t]&&this.props.widgetsSettingRuntimeInfo[t].isClassLoaded?i.WidgetSettingManager.getInstance().getWidgetSettingClass(t):null;return o&&this.props.widgetJson.config?e.React.createElement(e.ErrorBoundary,null,e.React.createElement(o,{key:t,widgetId:t,onSettingChange:this.onSettingChange})):e.React.createElement(s.Loading,{type:s.LoadingType.Secondary})}}componentDidUpdate(){this.loadWidgetSettingClass()}componentDidMount(){this.loadWidgetSettingClass()}loadWidgetSettingClass(){const{widgetId:e}=this.props;e&&!i.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&i.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)}render(){if(!this.props.widgetJson)return e.React.createElement(s.Loading,{type:s.LoadingType.Secondary});const{widgetId:t}=this.props;return e.React.createElement("div",{className:"setting-container h-100"},t?this.renderWidgetSetting(t):e.React.createElement("div",null,"  ",this.formatMessage("noWidget")))}}const n=e.ReactRedux.connect(((e,t)=>({widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]})))(o);var a=m(3080),l=m(3817),r=m(9820);const c={width:110};class p extends e.React.PureComponent{constructor(t){super(t),this.isOpen=()=>{const{pagePart:e,pageId:t}=this.props,i=this.getAppConfig();return"body"===e||!!(i&&i.pages[t]&&i[e]&&i.pages[t][e])},this.formatMessage=e=>this.props.formatMessage(e),this.onSwitchChange=()=>{const{pageId:t,pagePart:s,emptyLayout:o}=this.props,n=this.getAppConfig(),a=n.pages[t];let l=n[s];const r=(0,i.getAppConfigAction)();if(!l){const t=e.appConfigUtils.getUniqueId(n,"layout"),i=(0,e.Immutable)(Object.assign(Object.assign({},o),{id:t,type:e.LayoutType.FixedLayout})).setIn(["setting","lockDescendants"],!0);l=(0,e.Immutable)({}).setIn(["layout",e.BrowserSizeMode.Large],t).setIn(["height",e.BrowserSizeMode.Large],75),"header"===s?r.editHeader(l,[i]):r.editFooter(l,[i])}const c=a.set(s,!a[s]);r.editPage(c).exec(),"body"===s||c[s]||i.builderAppSync.publichActivePagePartChangeToApp(e.PagePart.Body),this.setState({isOpen:c[s]})},this.onHeightChange=e=>{const t=s.utils.stringOfLinearUnit(e),{pagePart:o,browserSizeMode:n}=this.props,a=this.getAppConfig();"header"===o?(0,i.getAppConfigAction)().editHeader(a.header.setIn(["height",n],t)).exec():(0,i.getAppConfigAction)().editFooter(a.footer.setIn(["height",n],t)).exec()},this.onStickHeaderChange=e=>{const t=this.getAppConfig();(0,i.getAppConfigAction)().editHeader(t.header.set("sticky",e.target.checked)).exec()},this.onBackgroundColorChange=e=>{const{pageId:t,pagePart:s}=this.props,o=this.getAppConfig(),n=o.pages[t];"body"===s?(0,i.getAppConfigAction)().editPage(n.set("bodyBackgroundColor",e)).exec():"header"===s?(0,i.getAppConfigAction)().editHeader(o.header.set("backgroundColor",e)).exec():(0,i.getAppConfigAction)().editFooter(o.footer.set("backgroundColor",e)).exec()},this.state={isOpen:this.isOpen()}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}componentDidUpdate(e){if(this.props.pageId!==e.pageId){const{pageJson:e,pagePart:t}=this.props;this.setState({isOpen:"body"===t||e&&e[t]})}}render(){var t,i,o,n,p,d,g,h,u;const m={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},{pageId:f,pagePart:v,browserSizeMode:x,theme:w,header:I}=this.props,y=this.getAppConfig(),S=y.pages[f];let b;b="body"===v?S.bodyBackgroundColor:null===(t=y[v])||void 0===t?void 0:t.backgroundColor,!b&&w&&(b="header"===v?null===(i=w.header)||void 0===i?void 0:i.bg:"footer"===v?null===(o=w.footer)||void 0===o?void 0:o.bg:null===(n=w.body)||void 0===n?void 0:n.bg);const j=e.React.createElement("div",{className:"setting-title d-flex justify-content-between"},e.React.createElement("div",null,e.React.createElement("span",null,m[this.props.pagePart])),e.React.createElement("div",{className:"d-flex align-items-center"},"body"===v?null:e.React.createElement(s.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange}))),C=y.mainSizeMode,A=null===(d=null===(p=y[v])||void 0===p?void 0:p.height)||void 0===d?void 0:d[x],M=null===(h=null===(g=y[v])||void 0===g?void 0:g.height)||void 0===h?void 0:h[C],T=s.utils.stringOfLinearUnit(null!==(u=null!=A?A:M)&&void 0!==u?u:75);return e.React.createElement(a.SettingSection,{title:j},e.React.createElement(s.Collapse,{isOpen:this.state.isOpen},"body"===v?null:e.React.createElement(a.SettingRow,{label:`${this.formatMessage("dynamicHeight")}`},e.React.createElement(r.InputUnit,{value:T,min:0,onChange:this.onHeightChange,style:c})),e.React.createElement(a.SettingRow,{label:this.formatMessage("dsFill")},e.React.createElement(l.ThemeColorPicker,{specificTheme:w,value:b,onChange:this.onBackgroundColorChange})),"header"===v&&S.mode===e.PageMode.AutoScroll&&e.React.createElement(a.SettingRow,{label:e.React.createElement(s.Label,{check:!0,className:"justify-content-start align-items-start"},e.React.createElement(s.Checkbox,{className:"mr-2",checked:Boolean(null==I?void 0:I.sticky),onChange:this.onStickHeaderChange}),this.formatMessage("keepFixedOnScroll"))})))}}var d=m(9883),g=m(9169),h=m(8866),u=m.n(h);const v=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:u()},o))},x={};class w extends e.React.PureComponent{constructor(t){super(t),this.onMaxWidthChange=e=>{let t=this.props.pageJson;t=t.set("maxWidth",e),(0,i.getAppConfigAction)().editPage(t).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.setPageWidthModeAuto=()=>{let e=this.props.pageJson;e=e.without("maxWidth"),(0,i.getAppConfigAction)().editPage(e).exec()},this.setPageWidthModeFixed=()=>{let e=this.props.pageJson;e=e.set("maxWidth",1024),(0,i.getAppConfigAction)().editPage(e).exec()},this.openWithDialogChanged=e=>{let t=this.props.pageJson;t=t.set("autoOpenDialogId",e.target.value),(0,i.getAppConfigAction)().editPage(t).exec()},this.onEffectSettingChange=(t,s)=>{const{pageJson:o}=this.props;(0,i.getAppConfigAction)().editPage(o.set("oneByOneEffect",s)).exec(),(null==s?void 0:s.type)!==e.AnimationType.None&&i.builderAppSync.publishAnimationPreviewToApp({pageId:o.id,playMode:t,id:Symbol("preview animation")})},this.previewAnimation=t=>{const{pageJson:s}=this.props;s.oneByOneEffect&&s.oneByOneEffect.type!==e.AnimationType.None&&i.builderAppSync.publishAnimationPreviewToApp({pageId:s.id,playMode:t,id:Symbol("preview animation")})},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}layoutSetting(){var t;const{pageId:i}=this.props,s=this.getAppConfig(),o=s.pages[i];if(o&&o.layout){const i=g.searchUtils.findLayoutId(o.layout,null===(t=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.browserSizeMode,s.mainSizeMode),n=s.layouts[i];if(n&&n.type===e.LayoutType.FlowLayout)return(0,e.jsx)(d.FlowLayoutSetting,{layoutId:i,formatMessage:this.props.formatMessage})}}getDialogList(){const t=[{value:"",index:-1,label:this.formatMessage("none")}],i=this.props.dialogs;return i&&(Object.keys(i).forEach((s=>{i[s].isSplash||i[s].mode!==e.DialogMode.Fixed||t.push({value:s,index:i[s].index,label:i[s].label})})),t.sort(((e,t)=>e.index-t.index))),t}getStyle(){const{theme:t}=this.props;return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    input, select {
      width: 130px;
      max-width: 130px;
    }
    .setting-row-label{
      line-height: 30px;
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: ${t.colors.palette.dark[400]};
    }
    .content-width-item {
      width: calc(50% - 4px);
      .img-container {
        width: auto;
        height: auto;
        cursor: pointer;
        outline: 1px solid ${t.colors.palette.light[800]};
        background-color: ${t.colors.white};
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 5px;
        &.active {
          outline: 2px solid ${t.colors.palette.primary[600]};
        }
      }
      span {
        overflow-x: hidden;
        text-overflow: ellipsis;
        width: 100%;
      }
    }

    `}render(){const{pageMode:t,maxWidth:i,pageJson:o}=this.props;if(!o)return null;const n=this.props.pageJson.autoOpenDialogId||"",l=o.oneByOneEffect,c=o.maxWidth>0?0:1;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)("div",{className:"setting-row-label"},this.formatMessage("openWithWindow"),(0,e.jsx)(s.Tooltip,{title:this.formatMessage("openWithWindowTip"),placement:"bottom"},(0,e.jsx)("div",{className:"ml-2 d-inline"},(0,e.jsx)(v,{size:"s"})))),(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(s.Select,{size:"sm",value:n,onChange:this.openWithDialogChanged},this.getDialogList().map(((t,i)=>(0,e.jsx)("option",{value:t.value,key:i,selected:t.value===n},t.label)))))),t===e.PageMode.AutoScroll&&(0,e.jsx)(a.SettingSection,{title:this.formatMessage("contentWidth")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between"},(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)("div",{className:"img-container "+(0===c?"active":""),onClick:this.setPageWidthModeFixed},(0,e.jsx)(s.Icon,{autoFlip:!0,width:0===c?105:107,height:0===c?66:68,icon:m(4479)})),(0,e.jsx)("span",{className:"text-center"},this.formatMessage("dsCustom"))),(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)("div",{className:"img-container "+(1===c?"active":""),onClick:this.setPageWidthModeAuto},(0,e.jsx)(s.Icon,{autoFlip:!0,width:1===c?105:107,height:1===c?66:68,icon:m(7893)})),(0,e.jsx)("span",{className:"text-center"},this.formatMessage("dsAuto"))))),0===c&&(0,e.jsx)(a.SettingRow,{label:this.formatMessage("maxWidth")},(0,e.jsx)(s.NumericInput,{className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(i)?"":i,style:{width:"110px"}}))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("animation")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.AnimationSettingComponent,{contentId:o.id,oneByOneSetting:l,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!1,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,e.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"body",pageJson:this.props.pageJson,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,e.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"header",pageJson:this.props.pageJson,header:this.props.header,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,e.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:this.props.dispatch,pageJson:this.props.pageJson,pageId:this.props.pageId,pagePart:"footer",footer:this.props.footer,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),this.layoutSetting())}}const I=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a,l,r,c;return{pageJson:null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.pages[t.pageId],dialogs:null===(n=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===n?void 0:n.dialogs,header:null===(l=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===l?void 0:l.header,footer:null===(c=null===(r=e.appStateInBuilder)||void 0===r?void 0:r.appConfig)||void 0===c?void 0:c.footer}}))(w),y=m(8590),S=m(7486),b=m(6450),j=m(6717),C=m(5241),A=m(8777),M=m(1542),T=m(1768),N="480px",k="432px",P="var(--light)";class R extends e.React.PureComponent{constructor(t){var o,n;super(t),this.getDefaultText=(e=this.props.dialogJson.confirmBeforeClose)=>{let t="";return this.props.dialogJson.interactionType&&(t=this.formatMessage(e?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")),t},this.formatMessage=e=>this.props.formatMessage(e),this.getFormatedValue=(e,t)=>t.toFixed(e===s.UnitTypes.PIXEL?0:1),this.onTextChanged=e=>{this.setState({text:e.target.value})},this.onButtonTextChanged=e=>{this.setState({buttonText:e.target.value})},this.onTextBLur=e=>{const t=this.defaultText;this.textBlur("text",e,t)},this.onButtonTextBLur=e=>{const t=this.formatMessage("ok");this.textBlur("buttonText",e,t)},this.textBlur=(e,t,i)=>{if(i===(t=t.trim())&&(t=""),this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t),""===t){const t={};t[e]=i,this.setState(t)}},this.updateDialogMask=e=>{this.editDialogProperty("overlayColor",e)},this.getDialogBackgroud=()=>{var e;const{dialogJson:t}=this.props;return(null===(e=t.dialogBackground)||void 0===e?void 0:e.color)===P?t.dialogBackground.set("color",""):t.dialogBackground},this.updateDialogBackgroud=e=>{""===e.color&&(e.color=P),this.editDialogProperty("dialogBackground",e)},this.updateBorder=e=>{this.editDialogProperty("border",e)},this.updateBorderRadius=e=>{this.editDialogProperty("borderRadius",e)},this.updateShadow=e=>{this.editDialogProperty("boxShadow",e)},this.onEffectSettingChange=(t,s)=>{const{dialogJson:o}=this.props,n=t===e.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";(0,i.getAppConfigAction)().editDialog(o.set(n,s)).exec(),i.builderAppSync.publishAnimationPreviewToApp({dialogId:o.id,playMode:t,id:Symbol("preview dialog animation")})},this.previewAnimation=e=>{const{dialogJson:t}=this.props;(t.effect||t.oneByOneEffect)&&i.builderAppSync.publishAnimationPreviewToApp({dialogId:t.id,playMode:e,id:Symbol("preview dialog animation")})},this.getBrowserIcons=t=>{const i=!this.props.dialogJson.layout[e.BrowserSizeMode.Medium],o=!this.props.dialogJson.layout[e.BrowserSizeMode.Small],n=this.props.browserSizeMode===e.BrowserSizeMode.Large||!this.props.dialogJson.layout[this.props.browserSizeMode],a=this.props.browserSizeMode===e.BrowserSizeMode.Large&&i||this.props.browserSizeMode===e.BrowserSizeMode.Medium||this.props.browserSizeMode===e.BrowserSizeMode.Small&&i&&o,l=this.props.browserSizeMode===e.BrowserSizeMode.Large&&o||this.props.browserSizeMode===e.BrowserSizeMode.Medium&&i&&o||this.props.browserSizeMode===e.BrowserSizeMode.Small,r=this.props.theme.colors.palette.dark[200],c=this.props.formatMessage("applyToLargeScreen"),p=this.props.formatMessage("applyToMediumScreen"),d=this.props.formatMessage("applyToSmallScreen");return(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center"},n&&(0,e.jsx)(s.Icon,{size:t,icon:A,color:r,title:c}),a&&(0,e.jsx)(s.Icon,{size:t,icon:M,color:r,className:n?"ml-1":"",title:p}),l&&(0,e.jsx)(s.Icon,{size:t,icon:T,color:r,className:n||a?"ml-1":"",title:d}))},this.defaultText=this.getDefaultText(),this.state={text:(null===(o=this.interactionStyles)||void 0===o?void 0:o.text)||this.defaultText,buttonText:(null===(n=this.interactionStyles)||void 0===n?void 0:n.buttonText)||this.formatMessage("ok")},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}componentDidUpdate(e){var t,i,s,o,n,a;this.props.dialogJson.interactionStyles&&((null===(t=this.props.dialogJson.interactionStyles)||void 0===t?void 0:t.text)===(null===(i=e.dialogJson.interactionStyles)||void 0===i?void 0:i.text)&&(null===(s=this.props.dialogJson.interactionStyles)||void 0===s?void 0:s.buttonText)===(null===(o=e.dialogJson.interactionStyles)||void 0===o?void 0:o.buttonText)||(this.defaultText=this.getDefaultText(),this.setState({text:(null===(n=this.interactionStyles)||void 0===n?void 0:n.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")})))}getDialogBrowserSizeMode(){return this.props.dialogJson.layout[this.props.browserSizeMode]?this.props.browserSizeMode:e.BrowserSizeMode.Large}defaultInteractionStyles(){return{text:"",textSize:"13px",buttonText:"",buttonTextSize:"16px"}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{dialogs:{empty:{}}}}editDialogProperty(e,t){(0,i.getAppConfigAction)().editDialogProperty(this.props.dialogId,e,t).exec()}editDialog(e){(0,i.getAppConfigAction)().editDialog(e).exec()}setDialogMode(t){let i=this.props.dialogJson;if(t===i.mode)return;const o=this.getDialogBrowserSizeMode();let n=i.sizeMode[o];if(t===e.DialogMode.Anchored){let t=N,a=k;if(n.position===e.DialogPosition.Center){const i=e.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode);t=n.width.includes(s.UnitTypes.PIXEL)?n.width:i.width*parseFloat(n.width.split("%")[0])/100+"px",a=n.height.includes(s.UnitTypes.PIXEL)?n.height:i.height*parseFloat(n.height.split("%")[0])/100+"px"}n=n.set("width",t).set("height",a).set("position",null),i=i.setIn(["sizeMode",o],n).set("overlayColor",null)}else i=i.setIn(["sizeMode",o,"position"],e.DialogPosition.Center).set("overlayColor","var(--dark-900)");i=i.set("mode",t).set("interactionType",null).set("interactionStyles",null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(i)}setDialogPosition(t){const i=this.getDialogBrowserSizeMode();let s=this.props.dialogJson.sizeMode[i];s=s.set("position",t),s=t===e.DialogPosition.Left||t===e.DialogPosition.Right?s.set("aspectRatio",!1).set("width","260px"):t===e.DialogPosition.Top||t===e.DialogPosition.Bottom?s.set("aspectRatio",!1).set("height","300px"):s.set("width",N).set("height",k);const o=this.props.dialogJson.setIn(["sizeMode",i],s);this.editDialog(o)}getDialogSize(e){const t=this.props.dialogJson.sizeMode[this.getDialogBrowserSizeMode()][e];if(!t)return null;const i=t.indexOf(s.UnitTypes.PIXEL)>=0?s.UnitTypes.PIXEL:s.UnitTypes.PERCENTAGE;return{distance:t.split(i)[0],unit:i}}setDialogSize(t,i){const o=this.getDialogBrowserSizeMode();let n=this.props.dialogJson;const a=n.sizeMode[o];if((a[t].indexOf(s.UnitTypes.PIXEL)>=0?s.UnitTypes.PIXEL:s.UnitTypes.PERCENTAGE)!==i.unit){const o=e.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode),n="height"===t?o.height:o.width;i.unit===s.UnitTypes.PIXEL?i.distance=n*i.distance/100:i.distance=100*i.distance/n}else if(a.aspectRatio){const e="width"===t?"height":"width",l=a[e].indexOf(s.UnitTypes.PIXEL)>=0?s.UnitTypes.PIXEL:s.UnitTypes.PERCENTAGE,r=i.distance*parseFloat(a[e].split(l)[0])/parseFloat(a[t].split(i.unit)[0]),c=this.getFormatedValue(l,r)+l;n=n.setIn(["sizeMode",o,e],c)}i.distance=this.getFormatedValue(i.unit,i.distance),n=n.setIn(["sizeMode",o,t],i.distance+i.unit),this.editDialog(n)}getFontSize(e){const t=this.interactionStyles[e],i=t.indexOf(s.UnitTypes.PIXEL)>=0?s.UnitTypes.PIXEL:s.UnitTypes.REM;return{distance:t.split(i)[0],unit:i}}setInteraction(t){let i=this.props.dialogJson;i=i.set("interactionType",t?e.DialogInteractionType.NoButton:null).set("interactionStyles",t?this.defaultInteractionStyles():null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(i)}changeInteractionType(e){let t=this.props.dialogJson;e!==t.interactionType&&(t=t.set("interactionType",e),this.editDialog(t))}setConfirmationType(e){this.defaultText=this.getDefaultText(e),""===this.props.dialogJson.interactionStyles.text&&this.setState({text:this.defaultText});let t=this.props.dialogJson;t=t.set("confirmBeforeClose",e).set("alwaysShowConfirmation",!e),this.editDialog(t)}updateAspectRatio(e){const t=this.props.dialogJson.setIn(["sizeMode",this.getDialogBrowserSizeMode(),"aspectRatio"],e);this.editDialog(t)}updateInteractionStyles(e,t){this.editDialogProperty("interactionStyles",this.interactionStyles.set(e,t))}updateCheckboxTextSize(e,t){this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t)}getStyle(){return e.css`
      .mode-radio{
        cursor: pointer;
        &.mode-label-disabled{
          cursor: inherit;
        }
      }
      .mode-label{
        margin-left: 0.5rem;
        cursor: pointer;
        &.mode-label-disabled{
          cursor: inherit;
          color: var(--dark-200);
        }
      }
      .confirmation-container {
        .confirmation-item{
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }
      }

      .position-size-setting{
        display: flex;
        justify-content: space-between;

        .position-container{
          position: relative;
          width: 90px;
          height: 90px;
          border: 1px solid var(--light-500);

          .content {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            padding: 6px;
            justify-content: space-between;
          }

          .w-part {
            width: 19px;
            position: relative;
            z-index: 0;
            &.w-center {
              width: 24px;
              justify-content: space-between;
            }
          }
          .h-part {
            width: 100%;
            height: 19px;
            position: relative;
            z-index: 0;
            &.h-center {
              height: 24px;
            }
          }

          .from-left {
            &.line-h{
              &:after {
                left: 6px;
              }
              &.is-selected:after {
                border-left: none;
              }
            }
          }
          .from-top {
            &.line-v{
              &:after {
                position: absolute;
                top: 6px;
              }
              &.is-selected:after {
                border-top: none;
              }
            }
          }

          .from-center {
            border: 2px solid var(--dark-100);
          }

          .from-right {
            &.line-h{
              &:before {
                position: absolute;
                right: 0;
              }
              &:after {

                right: 6px;
              }
              &.is-selected:after {
                border-right: none;
              }
            }
          }

          .from-bottom {
            &.line-v{
              &:before {
                position: absolute;
                bottom: 0;
              }
              &:after {
                position: absolute;
                top: -2px;
              }
              &.is-selected:after {
                border-bottom: none;
              }
            }
          }
          .line-h.is-selected,
          .line-v.is-selected {
            border-color: var(--primary-700);

            &:before, &:after{
              background: var(--primary-100);
              border: 2px solid var(--primary-700);
            }
          }
          .line-h {
            position: absolute;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            z-index: 0;
            cursor: pointer;

            &:before {
              content: '';
              width: 6px;
              height: 100%;
              background: var(--dark-100);
            }
            &.is-selected:before {
              width: 8px;
            }

            &:after {
              position: absolute;
              top: 9px;
              content: '';
              height: 6px;
              width: 15px;
              background: var(--dark-100);
            }
            &.is-selected:after {
              height: 8px;
            }
          }
          .line-v {
            position: absolute;
            height: 100%;
            width: 100%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            z-index: 0;
            cursor: pointer;

            &:before {
              content: '';
              width: 100%;
              height: 6px;
              background: var(--dark-100);
            }
            &.is-selected:before {
              height: 8px;
            }

            &:after {
              content: '';
              width: 6px;
              height: 15px;
              background: var(--dark-100);
            }
            &.is-selected:after {
              width: 8px;
            }
          }
          .line-center {
            height: 100%;
            width: 100%;
            z-index: 0;
            cursor: pointer;
            background: var(--dark-100);
            &.is-selected {
              background: var(--primary-100);
              border-color: var(--primary-700);
            }
          }
        }

        .size-container{
          width: calc(100% - 106px);
          height: 90px;
          display: flex;
          flex-direction: column;
          justify-content: space-between;

          .size-label{
            color: var(--dark-400);
          }

          .size-input{
            margin-left: 6px;
            width: 100%;
            &.size-auto-input{
              color: var(--dark-400);
              background: var(--light-400);
            }
          }
        }
      }


      .size-setting{
        width: 100%;

        .size-container{
          height: 26px;
          display: flex;
          justify-content: space-between;

          .unit-container{
            display: flex;
            width: calc(50% - 18px);

            .size-label{
              color: var(--dark-400);
            }

            .size-input{
              margin-left: 6px;
            }
          }
        }

      }

      .interaction-container{
        .interaction-type-container{
          display: flex;
          justify-content: space-between;
          .jimu-btn{
            padding: 0;
            background-color: var(--light-200);
            border: 2px solid transparent;
            &.active{
              border: 2px solid var(--primary-600);
            }
          }
        }
      }

    `}render(){const{dialogJson:t}=this.props,o=t.isSplash||i.utils.getPageListByDialogId(this.getAppConfig().pages,t.id).length>0;if(!t.id)return null;const n=t.mode===e.DialogMode.Anchored?[s.UnitTypes.PIXEL]:[s.UnitTypes.PIXEL,s.UnitTypes.PERCENTAGE];this.interactionStyles=t.interactionStyles?t.interactionStyles:this.defaultInteractionStyles();const c=t.sizeMode[this.getDialogBrowserSizeMode()];return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,e.jsx)(a.SettingSection,{title:this.formatMessage("mode")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("fixedModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(s.Radio,{className:"mode-radio",onChange:()=>this.setDialogMode(e.DialogMode.Fixed),checked:t.mode===e.DialogMode.Fixed}),(0,e.jsx)("label",{className:"mode-label",onClick:()=>this.setDialogMode(e.DialogMode.Fixed)},this.formatMessage("fixedMode")))))),(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:o?this.formatMessage(t.isSplash?"splashDlgWarning":"pageDlgWarning"):this.formatMessage("anchoredModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(s.Radio,{className:(0,e.classNames)("mode-radio",o?"mode-radio-disabled":""),onChange:()=>this.setDialogMode(e.DialogMode.Anchored),checked:t.mode===e.DialogMode.Anchored,disabled:o}),(0,e.jsx)("label",{className:(0,e.classNames)("mode-label",o?"mode-label-disabled":""),onClick:()=>!o&&this.setDialogMode(e.DialogMode.Anchored)},this.formatMessage("anchoredMode"))))))),!this.props.lockLayout&&(0,e.jsx)(a.SettingSection,null,(0,e.jsx)("div",{className:"d-flex mb-3"},(0,e.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate setting-text-level-1"},t.mode===e.DialogMode.Fixed?`${this.formatMessage("position")} & ${this.formatMessage("size")}`:this.formatMessage("size")),this.getBrowserIcons(12)),(0,e.jsx)(a.SettingRow,null,t.mode===e.DialogMode.Fixed?(0,e.jsx)("div",{className:"position-size-setting"},(0,e.jsx)("div",{className:"position-container"},(0,e.jsx)("div",{className:"content d-flex"},(0,e.jsx)("div",{className:"w-part flex-column justify-content-center align-items-center"},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("left")},(0,e.jsx)("div",{className:(0,e.classNames)("from-left line-h flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Left}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Left)}})))),(0,e.jsx)("div",{className:"d-flex w-part w-center h-100 flex-column"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("top")},(0,e.jsx)("div",{className:"h-part"},(0,e.jsx)("div",{className:(0,e.classNames)("from-top line-v flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Top}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Top)}}))),(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("center")},(0,e.jsx)("div",{className:"h-part h-center"},(0,e.jsx)("div",{className:(0,e.classNames)("from-center line-center flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Center}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Center)}}))),(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("bottom")},(0,e.jsx)("div",{className:"h-part"},(0,e.jsx)("div",{className:(0,e.classNames)("from-bottom line-v flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Bottom}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Bottom)}})))),(0,e.jsx)("div",{className:"w-part flex-column"},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("right")},(0,e.jsx)("div",{className:(0,e.classNames)("from-right line-h flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Right}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Right)}})))))),(0,e.jsx)("div",{className:"size-container"},(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,e.jsx)("label",{className:"size-label"},"W")),t.mode!==e.DialogMode.Fixed||c.position!==e.DialogPosition.Top&&c.position!==e.DialogPosition.Bottom?(0,e.jsx)(r.InputUnit,{className:"size-input",units:n,value:this.getDialogSize("width"),min:0,max:this.getDialogSize("width").unit===s.UnitTypes.PERCENTAGE?100:Number.POSITIVE_INFINITY,onChange:e=>this.setDialogSize("width",e)}):(0,e.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))),(0,e.jsx)("div",{className:"d-flex justify-content-center"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:c.position!==e.DialogPosition.Center?"":this.formatMessage("aspectRatio")},(0,e.jsx)(s.Button,{icon:!0,type:"tertiary",disabled:c.position!==e.DialogPosition.Center,onClick:()=>this.updateAspectRatio(!c.aspectRatio)},(0,e.jsx)(s.Icon,{size:12,icon:c.aspectRatio?y:S})))),(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,e.jsx)("label",{className:"size-label"},"H")),t.mode!==e.DialogMode.Fixed||c.position!==e.DialogPosition.Left&&c.position!==e.DialogPosition.Right?(0,e.jsx)(r.InputUnit,{className:"size-input",units:n,value:this.getDialogSize("height"),min:0,onChange:e=>this.setDialogSize("height",e)}):(0,e.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))))):(0,e.jsx)("div",{className:"size-setting"},(0,e.jsx)("div",{className:"size-container"},(0,e.jsx)("div",{className:"unit-container"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,e.jsx)("label",{className:"size-label"},"W")),(0,e.jsx)(r.InputUnit,{className:"size-input",units:n,value:this.getDialogSize("width"),min:0,onChange:e=>this.setDialogSize("width",e)})),(0,e.jsx)("div",null,(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("aspectRatio")},(0,e.jsx)(s.Button,{icon:!0,type:"tertiary",size:"sm",onClick:()=>this.updateAspectRatio(!c.aspectRatio)},(0,e.jsx)(s.Icon,{size:12,icon:c.aspectRatio?y:S})))),(0,e.jsx)("div",{className:"unit-container"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,e.jsx)("label",{className:"size-label"},"H")),(0,e.jsx)(r.InputUnit,{className:"size-input",units:n,value:this.getDialogSize("height"),min:0,onChange:e=>this.setDialogSize("height",e)})))))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("closeOptions")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(s.Label,{check:!0,className:"justify-content-start align-items-start"},(0,e.jsx)(s.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:t.closeWhenClickOverlay,onChange:()=>this.editDialogProperty("closeWhenClickOverlay",!t.closeWhenClickOverlay)}),this.formatMessage("clickOutside"))),t.mode===e.DialogMode.Fixed&&(0,e.jsx)("div",{className:"mt-3"},(0,e.jsx)(a.SettingRow,{label:this.formatMessage("interaction")},(0,e.jsx)(s.Switch,{checked:!!t.interactionType,onChange:(e,t)=>this.setInteraction(t)})),t.interactionType&&(0,e.jsx)("div",{className:"interaction-container mt-3"},(0,e.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("style")}),(0,e.jsx)("div",{className:"interaction-type-container mt-3 mb-3"},(0,e.jsx)(s.Tooltip,{title:this.formatMessage("interactionStyle1"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.NoButton),active:t.interactionType===e.DialogInteractionType.NoButton},(0,e.jsx)(s.Icon,{width:65,height:26,icon:b,flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(s.Tooltip,{title:this.formatMessage("interactionStyle2"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.ButtonInline),active:t.interactionType===e.DialogInteractionType.ButtonInline},(0,e.jsx)(s.Icon,{width:65,height:26,icon:j,flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(s.Tooltip,{title:this.formatMessage("interactionStyle3"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.ButtonBlock),active:t.interactionType===e.DialogInteractionType.ButtonBlock},(0,e.jsx)(s.Icon,{width:65,height:26,icon:C,flip:this.isRTL?"horizontal":null})))),(0,e.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("type")}),(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(s.Radio,{className:"mode-radio",onChange:()=>this.setConfirmationType(!0),checked:t.confirmBeforeClose}),(0,e.jsx)("label",{className:"mode-label",onClick:()=>this.setConfirmationType(!0)},this.formatMessage("confirmation"))))),(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(s.Radio,{className:"mode-radio",onChange:()=>this.setConfirmationType(!1),checked:!t.confirmBeforeClose}),(0,e.jsx)("label",{className:"mode-label",onClick:()=>this.setConfirmationType(!1)},this.formatMessage("preventDisplayAgain"))))),(0,e.jsx)("div",{className:"confirmation-container mt-3 mb-3"},(0,e.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxText")}),(0,e.jsx)("div",{className:"confirmation-item"},(0,e.jsx)(s.TextArea,{className:"w-100",style:{height:"60px"},spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.text,onChange:this.onTextChanged,onAcceptValue:this.onTextBLur})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(r.InputUnit,{style:{width:"80px"},units:[s.UnitTypes.PIXEL,s.UnitTypes.REM],value:this.getFontSize("textSize"),onChange:e=>{this.updateCheckboxTextSize("textSize",e.distance+e.unit)}})),t.interactionType!==e.DialogInteractionType.NoButton&&(0,e.jsx)("div",null,(0,e.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxButtonText")}),(0,e.jsx)(a.SettingRow,{className:"confirmation-item"},(0,e.jsx)(s.TextInput,{type:"text",size:"sm",className:"w-100",spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.buttonText,onChange:this.onButtonTextChanged,onAcceptValue:this.onButtonTextBLur})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(r.InputUnit,{style:{width:"80px"},units:[s.UnitTypes.PIXEL,s.UnitTypes.REM],value:this.getFontSize("buttonTextSize"),onChange:e=>{this.updateCheckboxTextSize("buttonTextSize",e.distance+e.unit)}})))),t.confirmBeforeClose&&(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(s.Label,{check:!0,className:"justify-content-start align-items-start"},(0,e.jsx)(s.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:t.alwaysShowConfirmation,onChange:()=>this.editDialogProperty("alwaysShowConfirmation",!t.alwaysShowConfirmation)}),this.formatMessage("alwaysShow")))))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("animation")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.AnimationSettingComponent,{contentId:t.id,effectSetting:t.effect,oneByOneSetting:t.oneByOneEffect,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),t.mode===e.DialogMode.Fixed&&(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,{label:this.formatMessage("maskColor")},(0,e.jsx)(l.ThemeColorPicker,{specificTheme:this.props.appTheme,value:t.overlayColor,onChange:this.updateDialogMask}))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("background")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.BackgroundSetting,{background:this.getDialogBackgroud(),onChange:this.updateDialogBackgroud}))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("border")},(0,e.jsx)(a.SettingRow,{flow:"wrap"},(0,e.jsx)(r.BorderSetting,{value:t.border,onChange:this.updateBorder})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("borderRadius"),flow:"wrap"},(0,e.jsx)(r.BorderRadiusSetting,{value:t.borderRadius,onChange:this.updateBorderRadius}))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("boxShadow")},(0,e.jsx)(a.SettingRow,{flow:"wrap"},(0,e.jsx)(r.BoxShadowSetting,{value:t.boxShadow,onChange:this.updateShadow}))))}}const D=e.ReactRedux.connect(((e,t)=>{var i,s,o;return{lockLayout:null===(o=null===(s=null===(i=null==e?void 0:e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.forBuilderAttributes)||void 0===o?void 0:o.lockLayout,dialogJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs[t.dialogId]||{}}}))(R);var z=m(3016);const L=m(325),B=m(8922),O=m(9751),E={value:"",openType:a.OpenTypes.NewWindow,linkType:e.LinkType.WebAddress};class U extends e.React.PureComponent{constructor(t){super(t),this.linkSettingTrigger=e.React.createRef(),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.settingLinkConfirm=e=>{this.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&this.setState({currentUrl:e.value}),this.changeUrl(e.value,e.openType)},this.changeUrl=(t,s)=>{const o=this.props.appConfig.pages[this.props.pageId],n=(0,e.Immutable)(o).merge({linkUrl:t||"#",openTarget:s});(0,i.getAppConfigAction)().editPage(n).exec(),E.value=t,E.openType=s},this.changeIcon=t=>{const s=this.props.appConfig.pages[this.props.pageId],o=(0,e.Immutable)(s).merge({icon:t});(0,i.getAppConfigAction)().editPage(o).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:this.props.currentUrl||""},this.fileInput=e.React.createRef()}resetLinkParam(){E.value="",E.openType=a.OpenTypes.NewWindow;const e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!==e.linkUrl&&(E.value=e.linkUrl),e&&e.openTarget&&(E.openType=e.openTarget)}getStyle(t){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){var t;const{isSetImageUrl:i,currentImgUrlInput:o,isShowLinkSetting:n}=this.state;return this.resetLinkParam(),(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(a.SettingSection,null,i&&(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(s.TextInput,{className:"border-0 w-100",value:o,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)(s.Icon,{icon:B,className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(s.Icon,{icon:L,className:"float-right"})))),(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(s.Button,{className:"w-100 text-dark set-link-btn",onClick:()=>{this.setState({isShowLinkSetting:!n})},ref:this.linkSettingTrigger},(0,e.jsx)(s.Icon,{icon:O,className:"mr-3"}),"Set link"))),n&&(0,e.jsx)(a.LinkSettingPopup,{isOpen:n,isLinkPageSetting:!0,linkParam:(0,e.Immutable)(E),onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,trigger:null===(t=this.linkSettingTrigger)||void 0===t?void 0:t.current}))}}U.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const W=(0,z.withTheme)(U),F=m(325),V=m(8922);class H extends e.React.PureComponent{constructor(t){super(t),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.formatMessage=e=>this.props.formatMessage(e),this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.changeIcon=t=>{const s=this.props.appConfig.pages[this.props.pageId],o=(0,e.Immutable)(s).merge({icon:t});(0,i.getAppConfigAction)().editPage(o).exec()},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getStyle(){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){const{isSetImageUrl:t,currentImgUrlInput:i}=this.state;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(s.TextInput,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),t&&(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(s.TextInput,{className:"border-0 w-100",value:i,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)(s.Icon,{icon:V,className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(s.Icon,{icon:F,className:"float-right"}))))))}}H.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});var $=m(2165),G=m(5369),J=m.n(G);const _=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:J()},o))};class Z extends e.React.PureComponent{constructor(t){super(t),this.formatMessage=e=>this.props.formatMessage(e),this._select=e=>{e.stopPropagation(),this.props.onSelect(this.props.view.id)},this._enableEditing=e=>{e.stopPropagation(),this.setState({editingLabel:!0})},this._disableEditing=()=>{this._onLabelUpdate(this.inputRef.value),this.setState({editingLabel:!1})},this._onLabelUpdate=t=>{if(t&&`${t}`.trim().length>0){const{view:s}=this.props,o=(0,e.Immutable)(s).set("label",t);(0,i.getAppConfigAction)().editView(o).exec()}else this.inputRef.value=this.props.view.label},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={editingLabel:!1,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeView.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}componentDidMount(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_removeView(){const{view:e,sectionId:t,selected:s}=this.props,o=(0,i.getAppConfigAction)().appConfig.sections[t].views;if(s){const s=o.indexOf(e.id);let n;n=s>0?o[s-1]:o[1],i.builderAppSync.publishSectionNavInfoToApp(t,{currentViewId:n,useProgress:!1})}(0,i.getAppConfigAction)().removeView(e.id,t).exec()}_duplicateView(){if(!this.props.view)return;const t=(0,i.getAppConfigAction)(),s=t.duplicateView(this.props.view.id,this.props.sectionId,!0);t.exec(),e.lodash.defer((()=>{this.props.onSelect(s.id)}))}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){return e.css`
    padding: 2px 2px 2px 10px;
    cursor: pointer;
    position: relative;
    .drop-down {
      width: 24px;
      text-align:right;
      .popover{
        .popover-inner {
          box-shadow: 0 0 0;
        }
      }
    }
    .view-item-drag:hover {
      cursor: pointer !important;
    }
    .label-con {
      width: ${e.polished.rem(123)};
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    }
    .label-input {
      width: ${e.polished.rem(123)};
    }
    .view-item-drag {
      z-index: 1;
      background-color: transparent;
      box-shadow: none;
    }
    `}render(){const{editable:t}=this.props,{label:i}=this.props.view,{editingLabel:o}=this.state;o&&this._focusInput();const n=t?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1",onClick:this._select,"data-testid":"viewItem"},(0,e.jsx)("div",{className:"w-100 view-item-drag d-flex justify-content-between"},(0,e.jsx)("div",{className:"d-flex align-items-center"},!o&&(0,e.jsx)("div",{title:i,className:"label-con",onDoubleClick:this._enableEditing},i),o&&(0,e.jsx)("div",null,(0,e.jsx)(s.TextInput,{title:i,className:"label-input",type:"text",defaultValue:i,ref:e=>{this.inputRef=e},onAcceptValue:this._disableEditing}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,e.jsx)("div",{title:this.formatMessage("titleOption")},(0,e.jsx)(s.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(s.DropdownButton,{arrow:!1,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(_,{size:"s"})),(0,e.jsx)(s.DropdownMenu,null,n.map(((t,i)=>(0,e.jsx)(s.DropdownItem,{key:i,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}class K extends e.React.PureComponent{constructor(){super(...arguments),this.getEchoBackground=()=>{var e;const{view:t,appTheme:i}=this.props,o=t.backgroundPosition?t.backgroundPosition.toUpperCase():"";let n,a;return n=null==t.backgroundColor&&i?null===(e=null==i?void 0:i.body)||void 0===e?void 0:e.bg:""===t.backgroundColor?"rgba(0,0,0,0)":t.backgroundColor?t.backgroundColor:"",t.backgroundIMage&&(a="object"==typeof t.backgroundIMage?t.backgroundIMage:{}),{fillType:o?s.FillType[o]:s.FillType.FIT,color:n,image:a}},this.onBackgroundStyleChange=t=>{this.setState({config:t});const s=t.image?t.image:{},o=(0,e.Immutable)({id:this.props.view.id,label:this.props.view.label,layout:this.props.view.layout,backgroundPosition:t.fillType,backgroundColor:t.color?t.color:null,backgroundIMage:s});(0,i.getAppConfigAction)().editView(o).exec()},this.onLazyLoadChange=t=>{const{view:s}=this.props;(0,i.getAppConfigAction)().editView((0,e.Immutable)(s).set("lazyLoad",t.target.checked)).exec()}}render(){var t;const{view:i}=this.props;return i?(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(a.SettingSection,{title:this.props.formatMessage("background")},(0,e.jsx)(a.SettingRow,{className:"background-setting-con",flow:"wrap"},(0,e.jsx)(r.BackgroundSetting,{background:this.getEchoBackground(),onChange:e=>this.onBackgroundStyleChange(e)}))),(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"d-flex align-items-center w-100"},(0,e.jsx)("label",null,(0,e.jsx)(s.Checkbox,{checked:null!==(t=i.lazyLoad)&&void 0!==t&&t,onChange:this.onLazyLoadChange}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("lazyLoading"))),(0,e.jsx)(s.Tooltip,{placement:"bottom",showArrow:!0,title:this.props.formatMessage("lazyLoadingTip")},(0,e.jsx)("div",{className:"ml-auto"},(0,e.jsx)(v,{size:"s"}))))))):null}}var X=m(1528),Y=m.n(X);const Q=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Y()},o))};var q=m(3166),ee=m.n(q);const te=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:ee()},o))};var ie=m(7319),se=m.n(ie);const oe=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:se()},o))};var ne=m(4201),ae=m.n(ne);const le=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:ae()},o))};class re extends e.React.PureComponent{constructor(){super(...arguments),this.snapLeft=()=>{this.props.onDirectionChange("l")},this.snapRight=()=>{this.props.onDirectionChange("r")},this.snapTop=()=>{this.props.onDirectionChange("t")},this.snapBottom=()=>{this.props.onDirectionChange("b")}}render(){const{direction:t,formatMessage:i}=this.props;return(0,e.jsx)(s.ButtonGroup,{size:"sm"},(0,e.jsx)(s.Tooltip,{placement:"bottom",title:g.utils.isRTL()?i("right"):i("left")},(0,e.jsx)(s.Button,{icon:!0,active:"l"===t,onClick:this.snapLeft},(0,e.jsx)(Q,{size:"s",autoFlip:!0}))),(0,e.jsx)(s.Tooltip,{placement:"bottom",title:i("top")},(0,e.jsx)(s.Button,{icon:!0,active:"t"===t,onClick:this.snapTop},(0,e.jsx)(te,{size:"s"}))),(0,e.jsx)(s.Tooltip,{placement:"bottom",title:g.utils.isRTL()?i("left"):i("right")},(0,e.jsx)(s.Button,{icon:!0,active:"r"===t,onClick:this.snapRight},(0,e.jsx)(oe,{size:"s",autoFlip:!0}))),(0,e.jsx)(s.Tooltip,{placement:"bottom",title:i("bottom")},(0,e.jsx)(s.Button,{icon:!0,active:"b"===t,onClick:this.snapBottom},(0,e.jsx)(le,{size:"s"}))))}}var ce=m(4750),pe=m.n(ce);const de=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:pe()},o))},ge=[s.UnitTypes.PIXEL];class he extends e.React.PureComponent{constructor(t){super(t),this.formatMessage=(t,i=!1)=>i?this.props.intl.formatMessage({id:t,defaultMessage:e.defaultMessages[t]}):this.props.formatMessage(t),this._addView=()=>{const{section:t}=this.props,s=(0,i.getAppConfigAction)().appConfig,o=(0,e.Immutable)({}).merge({id:e.appConfigUtils.getUniqueId(s,"view"),label:e.appConfigUtils.getUniqueLabel(s,"view",this.formatMessage("view",!0))});(0,i.getAppConfigAction)().addView(o,t.id).exec(),e.lodash.defer((()=>{this._selectView(o.id)}))},this._duplicateView=()=>{const{activeViewId:t,sectionId:s}=this.props,o=(0,i.getAppConfigAction)(),n=o.duplicateView(t,s,!0);o.exec(),e.lodash.defer((()=>{this._selectView(n.id)}))},this._showViewList=()=>{this.setState({isShowViewList:!0})},this._hideViewList=()=>{this.setState({isShowViewList:!1})},this._selectView=(e,t=!1)=>{const{section:s,activeViewId:o}=this.props;o!==e&&i.builderAppSync.publishSectionNavInfoToApp(s.id,{previousViewId:this.props.activeViewId,currentViewId:e,useProgress:!1}),t&&this.setState({showViewSetting:!0})},this.getStyle=()=>e.css`
      .toc-dropzone {
        margin-top: 0.5rem;
      }
      .toc-dropzone .jimu-widget-setting--row.row{
        margin-top: 0;
      }
      .jimu-widget-setting--row-label{
        color:${this.props.theme.colors.palette.dark[600]};
      }
    `,this.hideViewSetting=()=>{this.setState({showViewSetting:!1})},this.onAutoPlayChanged=t=>{const{section:s}=this.props,o=(0,e.Immutable)(s).set("autoPlay",t.target.checked);(0,i.getAppConfigAction)().editSection(o).exec()},this.onLoopChanged=t=>{const{section:s}=this.props,o=(0,e.Immutable)(s).set("loop",t.target.checked);(0,i.getAppConfigAction)().editSection(o).exec()},this.onIntervalChanged=t=>{const s=+t;if(s>=1){const{section:t}=this.props,o=(0,e.Immutable)(t).set("interval",s);(0,i.getAppConfigAction)().editSection(o).exec()}},this.updateNav=(t,s,o)=>{const{section:n}=this.props,a=(0,e.Immutable)(n).setIn([t,s],o);(0,i.getAppConfigAction)().editSection(a).exec()},this.viewListRef=e.React.createRef(),this.state={showViewSetting:!1,isShowViewList:!0}}render(){var t,o,n,l,c,p,d,h,u,m,f,v,x,w,I,y,S,b,j;const{section:C,views:A,theme:M,dispatch:T,activeViewId:N,editable:k}=this.props,{showViewSetting:P}=this.state;if(!C)return null;const R=e.css`
      cursor:pointer;
      margin-top: ${e.polished.rem(-8)};

      .toggle-view {
        transform: ${this.state.isShowViewList?null:"rotate(180deg)"};
      }
    `,D=A.find((e=>e.id===N)),z=null!==(o=null===(t=C.dotsNav)||void 0===t?void 0:t.position)&&void 0!==o?o:"b";return(0,e.jsx)("div",{className:"flexbox-layout-setting h-100",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 w-100"},(0,e.jsx)(a.SettingCollapse,{css:e.css`border-bottom: 1px solid var(--light-800)`,label:this.formatMessage("views"),className:"p-3",isOpen:this.state.isShowViewList,onRequestOpen:this._showViewList,onRequestClose:this._hideViewList},(0,e.jsx)(a.SettingRow,{className:"mt-3"},(0,e.jsx)(s.Button,{css:R,className:"w-100",type:"primary",onClick:this._addView,title:this.formatMessage("newView")},(0,e.jsx)(de,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("newView")))),(0,e.jsx)("div",{ref:this.viewListRef,className:"toc-dropzone"},(0,e.jsx)($.List,{size:"sm",className:"selected-fields-list",itemsJson:Array.from(A).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(t,s)=>{const{itemJsons:o}=s.props,[,n]=o,a=n.map((e=>e.itemStateDetailContent)),l=(0,e.Immutable)(C).set("views",a.map((e=>e.id)));(0,i.getAppConfigAction)().editSection(l).exec(),this._selectView(N)},isItemFocused:(e,t)=>{const{itemJsons:[i]}=t.props;return N===i.itemStateDetailContent.id},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:$.TreeItemActionType.RenderOverrideItem,children:[{name:$.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:$.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:$.TreeItemActionType.RenderOverrideItemBody,children:[{name:$.TreeItemActionType.RenderOverrideItemDragHandle},{name:$.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,o=s[0],n=o.itemStateDetailContent,a=+o.itemKey;return(0,e.jsx)(Z,{index:a,canRemove:A.length>1,formatMessage:this.formatMessage,isLastItem:a===A.length-1,dispatch:T,sectionId:C.id,theme:M,view:n,isFirstItem:0===a,onSelect:e=>this._selectView(e,!0),selected:N===n.id,editable:k})}}))),(0,e.jsx)(a.SettingSection,{title:this.formatMessage("tools")},(0,e.jsx)(a.SettingRow,{label:this.formatMessage("arrows")},(0,e.jsx)(s.Switch,{checked:null===(n=C.arrowsNav)||void 0===n?void 0:n.visible,onChange:()=>{var e,t;return this.updateNav("arrowsNav","visible",!(null!==(t=null===(e=C.arrowsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(l=C.arrowsNav)||void 0===l?void 0:l.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(a.SettingRow,{label:this.formatMessage("direction")},(0,e.jsx)(a.DirectionSelector,{size:"sm",vertical:"v"===C.arrowsNav.direction,onChange:e=>this.updateNav("arrowsNav","direction",e?"v":"h")})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("size"),flow:"wrap"},(0,e.jsx)(s.Slider,{min:5,max:100,step:1,value:null!==(c=C.arrowsNav.size)&&void 0!==c?c:12,css:e.css`width: 50%`,onChange:e=>this.updateNav("arrowsNav","size",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:5,max:100,units:ge,value:`${null!==(p=C.arrowsNav.size)&&void 0!==p?p:12}px`,onChange:e=>this.updateNav("arrowsNav","size",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("offset"),flow:"wrap"},(0,e.jsx)(s.Slider,{min:-100,max:100,step:1,value:null!==(d=C.arrowsNav.offset)&&void 0!==d?d:0,css:e.css`width: 50%`,onChange:e=>this.updateNav("arrowsNav","offset",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:-100,max:100,units:ge,value:`${null!==(h=C.arrowsNav.offset)&&void 0!==h?h:0}px`,onChange:e=>this.updateNav("arrowsNav","offset",e.distance),css:e.css`width: 40%; margin-left: auto;`}))),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("dots")},(0,e.jsx)(s.Switch,{checked:null===(u=C.dotsNav)||void 0===u?void 0:u.visible,onChange:()=>{var e,t;return this.updateNav("dotsNav","visible",!(null!==(t=null===(e=C.dotsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(m=C.dotsNav)||void 0===m?void 0:m.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(a.SettingRow,{label:this.formatMessage("position")},(0,e.jsx)(re,{direction:z,formatMessage:this.formatMessage,onDirectionChange:e=>this.updateNav("dotsNav","position",e)})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("size"),flow:"wrap"},(0,e.jsx)(s.Slider,{min:5,max:30,step:1,value:null!==(f=C.dotsNav.size)&&void 0!==f?f:8,css:e.css`width: 50%`,onChange:e=>this.updateNav("dotsNav","size",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:5,max:30,units:ge,value:`${null!==(v=C.dotsNav.size)&&void 0!==v?v:8}px`,onChange:e=>this.updateNav("dotsNav","size",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("offset"),flow:"wrap"},(0,e.jsx)(s.Slider,{min:-100,max:100,step:1,value:null!==(x=C.dotsNav.offset)&&void 0!==x?x:50,css:e.css`width: 50%`,onChange:e=>this.updateNav("dotsNav","offset",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:-100,max:100,units:ge,value:`${null!==(w=C.dotsNav.offset)&&void 0!==w?w:50}px`,onChange:e=>this.updateNav("dotsNav","offset",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("spacing"),flow:"wrap"},(0,e.jsx)(s.Slider,{min:0,max:30,step:1,value:null!==(I=C.dotsNav.spacing)&&void 0!==I?I:10,css:e.css`width: 50%`,onChange:e=>this.updateNav("dotsNav","spacing",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:0,max:30,units:ge,value:`${null!==(y=C.dotsNav.spacing)&&void 0!==y?y:10}px`,onChange:e=>this.updateNav("dotsNav","spacing",e.distance),css:e.css`width: 40%; margin-left: auto;`})))),(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,{label:this.formatMessage("autoPlay")},(0,e.jsx)(s.Switch,{checked:C.autoPlay,onChange:this.onAutoPlayChanged})),C.autoPlay&&(0,e.jsx)(a.SettingRow,{label:this.formatMessage("interval")},(0,e.jsx)(s.NumericInput,{size:"sm",css:e.css`width: 4rem`,value:null!==(S=C.interval)&&void 0!==S?S:g.DEFAULT_AUTOPLAY_INTERVAL,min:1,onChange:this.onIntervalChanged})),C.autoPlay&&(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(s.Label,{check:!0},(0,e.jsx)(s.Checkbox,{checked:null===(b=C.loop)||void 0===b||b,onChange:this.onLoopChanged,className:"mr-2"}),this.formatMessage("loop")))),(0,e.jsx)(a.SidePopper,{isOpen:P,position:"right",toggle:this.hideViewSetting,trigger:null===(j=this.viewListRef)||void 0===j?void 0:j.current},(0,e.jsx)("div",null,(0,e.jsx)(s.PanelHeader,{className:"p-3",title:null==D?void 0:D.label,onClose:this.hideViewSetting}),(0,e.jsx)(K,{formatMessage:this.formatMessage,appTheme:this.props.appTheme,view:D})))))}}const ue=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,p,d,g;const{sectionId:h}=i,{appConfig:u}=t.appStateInBuilder,m=u.sections[h];if(!m)return null;const f=m.views.map((e=>u.views[e])),v=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===n?void 0:n[m.id],x=null!==(a=null==v?void 0:v.currentViewId)&&void 0!==a?a:m.views[0],w=null!==(p=null===(c=null===(r=null===(l=t.appStateInBuilder)||void 0===l?void 0:l.appConfig)||void 0===r?void 0:r.forBuilderAttributes)||void 0===c?void 0:c.lockLayout)&&void 0!==p&&p,I=null===(g=null===(d=t.appStateInBuilder)||void 0===d?void 0:d.appRuntimeInfo)||void 0===g?void 0:g.appMode;return{section:m,views:f,activeViewId:x,browserSizeMode:t.appStateInBuilder&&t.appStateInBuilder.browserSizeMode,editable:I===e.AppMode.Design&&!w}}))(he);var me=m(2986);class fe extends e.React.PureComponent{constructor(t){super(t),this.formatMessage=e=>this.props.formatMessage(e),this._select=e=>{e.stopPropagation(),this.props.onSelect(this.props.index)},this._enableEditing=e=>{e.stopPropagation(),this.setState({editingLabel:!0})},this._disableEditing=()=>{this._onLabelUpdate(this.inputRef.value),this.setState({editingLabel:!1})},this._onLabelUpdate=t=>{const{screen:s}=this.props;if(t&&`${t}`.trim().length>0){const o=(0,e.Immutable)(s).set("label",t);(0,i.getAppConfigAction)().editScreen(o).exec()}else this.inputRef.value=s.label},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={editingLabel:!1,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeScreen.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}componentDidMount(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_removeScreen(e){e.stopPropagation();const{index:t}=this.props;this.props.onRemove(t)}_duplicateView(){const{index:e}=this.props;this.props.onDuplicate(e)}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){const{theme:t}=this.props;return e.css`
      padding: 2px 2px 2px 10px;
      cursor: pointer;
      position: relative;
      height: ${e.polished.rem(32)};

      .drop-down {
        width: 24px;
        text-align: right;
        .popover {
          .popover-inner {
            box-shadow: 0 0 0;
          }
        }
      }
      .drag-icon {
        visibility: hidden;
        color: ${t.colors.palette.dark[600]};
        cursor: move;
      }
      .screen-item-drag:hover {
        cursor: pointer !important;
      }
      .label-con {
        width: ${e.polished.rem(123)};
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .label-input {
        width: ${e.polished.rem(123)};
      }
      .screen-item-drag {
        z-index: 1;
        background-color: transparent;
        box-shadow: none;
      }
    `}render(){const{index:t,browserSizeMode:i,editable:o}=this.props,{label:n}=this.props.screen,{editingLabel:a}=this.state,l=o&&i===e.BrowserSizeMode.Large?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return a&&this._focusInput(),(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1",onClick:this._select,"data-testid":"screenItem"},(0,e.jsx)("div",{className:"w-100 screen-item-drag d-flex justify-content-between","data-index":t},(0,e.jsx)("div",{className:"d-flex align-items-center"},!a&&(0,e.jsx)("div",{title:n,className:"label-con",onDoubleClick:this._enableEditing},n),a&&(0,e.jsx)("div",null,(0,e.jsx)(s.TextInput,{title:n,className:"label-input",type:"text",defaultValue:n,ref:e=>{this.inputRef=e},onAcceptValue:this._disableEditing}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,e.jsx)("div",{title:this.formatMessage("titleOption"),css:e.css`
              & > div {
                height: 100%;
              }
            `},(0,e.jsx)(s.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(s.DropdownButton,{arrow:!1,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(_,{size:"s"})),(0,e.jsx)(s.DropdownMenu,null,l.map(((t,i)=>(0,e.jsx)(s.DropdownItem,{key:i,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}const ve=e.ReactRedux.connect(((e,t)=>{const{screenId:i}=t,{appConfig:s}=e.appStateInBuilder;return{screen:s.screens[i]}}))(fe);var xe=m(4703),we=m.n(xe);const Ie=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:we()},o))},ye=[s.UnitTypes.PIXEL,s.UnitTypes.PERCENTAGE],Se=[s.Sides.T,s.Sides.R,s.Sides.B,s.Sides.L];class be extends e.React.PureComponent{constructor(t){super(t),this.onMainBackgroundChange=e=>{const{screen:t}=this.props,s=t.setIn(["main","background"],e);(0,i.getAppConfigAction)().editScreen(s).exec()},this.onSideBackgroundChange=e=>{const{screen:t}=this.props,s=t.setIn(["panel","background"],e);(0,i.getAppConfigAction)().editScreen(s).exec()},this.setOverlay=e=>{const{screen:t}=this.props;let s=t.setIn(["panel","overlay"],e);e||(s=s.setIn(["panel","offset"],0),"center"===t.panel.side&&(s=s.setIn(["panel","side"],"left"))),(0,i.getAppConfigAction)().editScreen(s).exec()},this.updateWidth=e=>{var t,o,n;const{screen:a,viewportSize:l}=this.props,{distance:r,unit:c}=e;let p;if(g.utils.isPercentage(null===(t=a.panel)||void 0===t?void 0:t.size)&&c===s.UnitTypes.PIXEL){const t=g.utils.fromRatio(null===(o=a.panel)||void 0===o?void 0:o.size,l.width);p=a.setIn(["panel","size"],`${Math.round(t)}${e.unit}`)}else if(g.utils.isPercentage(null===(n=a.panel)||void 0===n?void 0:n.size)||c!==s.UnitTypes.PERCENTAGE)p=a.setIn(["panel","size"],`${e.distance}${e.unit}`);else{const e=g.utils.toRatio(r,l.width);p=a.setIn(["panel","size"],`${e}`)}(0,i.getAppConfigAction)().editScreen(p).exec()},this.updateSide=e=>{const{screen:t}=this.props,s=t.setIn(["panel","side"],e);(0,i.getAppConfigAction)().editScreen(s).exec()},this.updateOffsetX=e=>{const{screen:t}=this.props,s=t.setIn(["panel","offset"],`${e}px`);(0,i.getAppConfigAction)().editScreen(s).exec()},this.updatePadding=e=>{const{screen:t}=this.props,s=t.setIn(["panel","padding"],e);(0,i.getAppConfigAction)().editScreen(s).exec()},this.handleGapChange=e=>{const{screen:t}=this.props,s=(0,i.getAppConfigAction)(),o=t.setIn(["panel","gap"],e.distance);s.editScreen(o),Object.keys(t.panel.layout).map((e=>t.panel.layout[e])).forEach((t=>{s.editLayoutSetting({layoutId:t},{space:e.distance})})),s.exec()},this._getStyle=()=>{const t=this.props.theme?this.props.theme.colors.palette.dark[600]:"#c5c5c5",i=this.props.theme?this.props.theme.colors.palette.dark[600]:"#a8a8a8";return e.css`
      height: calc(100% - 40px);
      overflow: auto;
      & {
        width: 100%;
      }
      .inner-section {
        border-bottom: none;
        padding-bottom: 0;
      }
      .back-btn-con {
        margin: 1rem 0.25rem 0;
        cursor: pointer;
        align-items: center;
      }
      .screen-group-title {
        margin: 1rem 1rem 0;
      }
      .background-set-back {
        color: ${i};
        font-weight: 500;
      }
      .background-setting-con .form-group {
        margin-bottom: ${e.polished.rem(16)};
      }
      .background-setting-header {
        color: ${t};
        font-weight: 500;
      }
    `},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}render(){var t,i,o;const{screen:n,formatMessage:l}=this.props;return n?(0,e.jsx)("div",{css:this._getStyle(),className:"pb-2"},(0,e.jsx)("div",{className:"screen-group-title"},l("mainStage")),(0,e.jsx)(a.SettingSection,{title:l("background")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.BackgroundSetting,{background:n.main.background,onChange:e=>this.onMainBackgroundChange(e)}))),n.panel&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{className:"screen-group-title"},l("scrollingPanel")),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("mode")},(0,e.jsx)("div",null,(0,e.jsx)(s.Label,{className:"mr-3"},(0,e.jsx)(s.Radio,{className:"mr-2",onChange:()=>this.setOverlay(!1),value:"docked",checked:!(null!==(t=n.panel.overlay)&&void 0!==t&&t)}),l("docked"))),(0,e.jsx)("div",null,(0,e.jsx)(s.Label,{className:"mr-3"},(0,e.jsx)(s.Radio,{className:"mr-2",onChange:()=>this.setOverlay(!0),value:"floating",checked:n.panel.overlay}),l("floatingScreen")))),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("size")},(0,e.jsx)(a.SettingRow,{label:l("width")},(0,e.jsx)("div",{style:{width:110}},(0,e.jsx)(r.SizeEditor,{label:"W",availableUnits:ye,mode:g.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:n.panel.size,onChange:this.updateWidth})))),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("position")},(0,e.jsx)(a.SettingRow,{label:l("align")},(0,e.jsx)(s.ButtonGroup,{size:"sm"},(0,e.jsx)(s.Tooltip,{title:l(this.isRTL?"right":"left"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,active:"left"===n.panel.side,onClick:()=>this.updateSide("left")},(0,e.jsx)(Q,{size:"s",autoFlip:!0}))),n.panel.overlay&&(0,e.jsx)(s.Tooltip,{title:l("center"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,active:"center"===n.panel.side,onClick:()=>this.updateSide("center")},(0,e.jsx)(Ie,{size:"s"}))),(0,e.jsx)(s.Tooltip,{title:l(this.isRTL?"left":"right"),placement:"bottom"},(0,e.jsx)(s.Button,{icon:!0,active:"right"===n.panel.side,onClick:()=>this.updateSide("right")},(0,e.jsx)(oe,{size:"s",autoFlip:!0}))))),(null===(i=n.panel)||void 0===i?void 0:i.overlay)&&(0,e.jsx)(a.SettingRow,{label:l("offsetX")},(0,e.jsx)(s.NumericInput,{value:parseInt(null!==(o=n.panel.offset)&&void 0!==o?o:"0"),onChange:this.updateOffsetX,size:"sm",css:e.css`width: 110px`}))),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("gap")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.InputUnit,{className:"w-100",value:{distance:n.panel.gap>=0?n.panel.gap:10,unit:void 0},min:0,onChange:this.handleGapChange}))),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("padding")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.FourSides,{showTip:!0,sides:Se,value:n.panel.padding,onChange:this.updatePadding}))),(0,e.jsx)(a.SettingSection,{className:"inner-section",title:l("background")},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(r.BackgroundSetting,{background:n.panel.background,onChange:e=>this.onSideBackgroundChange(e)}))))):null}}const je=e.ReactRedux.connect(((t,i)=>{const{screenId:s}=i,{appConfig:o}=t.appStateInBuilder,n=e.utils.findViewportSize(o,t.browserSizeMode||e.BrowserSizeMode.Large);return{screen:o.screens[s],viewportSize:n}}))(be);class Ce extends e.React.PureComponent{constructor(t){super(t),this.sidePopperTrigger=e.React.createRef(),this.formatMessage=(t,i=!1)=>i?this.props.intl.formatMessage({id:t,defaultMessage:e.defaultMessages[t]}):this.props.formatMessage(t),this._addScreen=e=>{const t=(0,i.getAppConfigAction)(),{screenGroupId:s}=this.props;i.templateUtils.createScreenFromTemplate(t.appConfig,e,e.screenId,{}).then((({appConfig:e,newScreenId:t})=>{e=e.setIn(["screenGroups",s,"screens"],[].concat(e.screenGroups[s].screens,t)),i.builderAppSync.publishAppConfigChangeToApp(e),i.builderAppSync.publishScreenGroupNavInfoToApp(s,e.screenGroups[s].screens.length-1)})),this.closeScreenPopper()},this._duplicateScreen=e=>{const{screenGroupId:t}=this.props,s=(0,i.getAppConfigAction)();s.duplicateScreenByIndex(e,t),s.exec(),i.builderAppSync.publishScreenGroupNavInfoToApp(t,e+1)},this._duplicateActiveScreen=()=>{this._duplicateScreen(this.props.activeScreen)},this._selectScreen=e=>{const{screenGroupId:t,activeScreen:s}=this.props;s!==e&&i.builderAppSync.publishScreenGroupNavInfoToApp(t,e),this.setState({showScreenSetting:!0})},this._removeScreen=e=>{const{screenGroupId:t,screens:s,activeScreen:o}=this.props;(0,i.getAppConfigAction)().removeScreen(s[e],t).exec(),(o>e||o===e&&o===s.length-1)&&i.builderAppSync.publishScreenGroupNavInfoToApp(t,o-1)},this.getStyle=()=>e.css`
      .screen-list {
        padding: 0 1rem;
      }

      .setting-header {
        margin-bottom: 1rem;
      }

      .screen-group-title {
        font-size: 14px;
        color: var(--dark-900);
      }
    `,this.hideScreenSetting=()=>{this.setState({showScreenSetting:!1})},this.toggleScreenPopper=()=>{this.props.hasPanel&&this.setState({showPopper:!this.state.showPopper})},this.closeScreenPopper=()=>{this.setState({showPopper:!1})},this.popperRef=e.React.createRef(),this.state={showPopper:!1,showScreenSetting:!1}}showEditButtons(){const{editable:t,browserSizeMode:i}=this.props,s=i===e.BrowserSizeMode.Large;return t&&s}render(){var t;const{screenGroupId:o,screens:n,theme:l,dispatch:r,activeScreen:c,browserSizeMode:p,editable:d}=this.props,{showScreenSetting:g}=this.state;if(!n)return null;const h=e.css`
      cursor: pointer;
      margin-top: ${e.polished.rem(-8)};
    `;return(0,e.jsx)("div",{className:"screen-group-setting mb-4",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 screen-list",ref:this.sidePopperTrigger},(0,e.jsx)("div",{className:"d-flex align-items-center setting-header"},(0,e.jsx)("div",{className:"screen-group-title"},this.formatMessage("screen"))),this.showEditButtons()&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{ref:this.popperRef,className:"mt-3"},(0,e.jsx)(s.Button,{"aria-label":this.formatMessage("newScreen"),css:h,type:"primary",onClick:this.toggleScreenPopper,className:"w-100"},(0,e.jsx)(de,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("newScreen")))),this.state.showPopper&&(0,e.jsx)(a.TemplateSelector,{templates:(0,me.getScreenTemplates)(),referenceElement:this.popperRef.current,onItemSelect:this._addScreen,onClose:this.closeScreenPopper})),(0,e.jsx)($.List,{size:"sm",className:"selected-fields-list mt-3",itemsJson:Array.from(n).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:s}=t.props,[,a]=s,l=a.map((e=>e.itemStateDetailContent)),r=n[c],p=l.indexOf(r);(0,i.getAppConfigAction)().editScreenGroupProperty(o,"screens",l).exec(),this._selectScreen(p)},isItemFocused:(e,t)=>{const{itemJsons:[i]}=t.props;return n[c]===i.itemStateDetailContent},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:$.TreeItemActionType.RenderOverrideItem,children:[{name:$.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:$.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:$.TreeItemActionType.RenderOverrideItemBody,children:[{name:$.TreeItemActionType.RenderOverrideItemDragHandle},{name:$.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,a=s[0],g=a.itemStateDetailContent,h=+a.itemKey;return(0,e.jsx)(ve,{key:g,index:h,screenGroupId:o,screenId:g,canRemove:n.length>1,formatMessage:this.formatMessage,dispatch:r,theme:l,editable:d,onSelect:this._selectScreen,onRemove:this._removeScreen,onDuplicate:this._duplicateScreen,selected:n[c]===g,browserSizeMode:p})}})),(0,e.jsx)(a.SidePopper,{isOpen:g,position:"right",toggle:this.hideScreenSetting,trigger:null===(t=this.sidePopperTrigger)||void 0===t?void 0:t.current},(0,e.jsx)(s.PanelHeader,{className:"pt-3 px-3",title:this.props.activeScreenLabel,onClose:this.hideScreenSetting}),(0,e.jsx)(je,{formatMessage:this.formatMessage,theme:this.props.theme,screenId:n[c],hideBackgroundWidget:this.hideScreenSetting})))}}const Ae=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,p,d,g,h,u;const{screenGroupId:m}=i,{appConfig:f}=t.appStateInBuilder,v=f.screenGroups[m];if(!v)return null;const x=f.screens[v.screens[0]],w=null!==(a=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===o?void 0:o.forBuilderAttributes)||void 0===n?void 0:n.lockLayout)&&void 0!==a&&a,I=null===(r=null===(l=t.appStateInBuilder)||void 0===l?void 0:l.appRuntimeInfo)||void 0===r?void 0:r.appMode,y=v.screens,S=null!==(h=null===(g=null===(d=null===(p=null===(c=t.appStateInBuilder)||void 0===c?void 0:c.appRuntimeInfo)||void 0===p?void 0:p.screenGroupNavInfos)||void 0===d?void 0:d[m])||void 0===g?void 0:g.activeIndex)&&void 0!==h?h:0,b=y[S];return{screens:y,activeScreen:S,activeScreenLabel:null===(u=f.screens[b])||void 0===u?void 0:u.label,browserSizeMode:t.appStateInBuilder.browserSizeMode,hasPanel:null!=x.panel,editable:I===e.AppMode.Design&&!w}}))(Ce);class Me extends e.React.PureComponent{constructor(){super(...arguments),this.renderItemSetting=()=>{let t=null;if(this.props.layoutType===e.LayoutType.FixedLayout)t=d.FixedLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.FlowLayout)t=d.FlowLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.ColumnLayout)t=d.ColumnLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.RowLayout)t=d.RowLayoutItemSetting;else{const{containerWidgetId:e,hasLayoutSetting:s}=this.props;s&&(t=i.WidgetSettingManager.getInstance().getItemSettingClass(e))}return t?(0,e.jsx)(e.ErrorBoundary,null,(0,e.jsx)(t,{layoutId:this.props.layoutId,layoutItem:this.props.layoutItem,isLockLayout:this.props.isLockLayout,supportAutoSize:this.props.supportAutoSize,style:this.props.style,onSettingChange:this.props.onSettingChanged,onStyleChange:this.props.onStyleChange,onPosChange:this.props.onPosChanged,formatMessage:this.props.formatMessage})):(0,e.jsx)(a.SettingSection,null,(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},this.props.formatMessage("noStyle")))}}componentDidUpdate(){this.loadItemSettingClass()}componentDidMount(){this.loadItemSettingClass()}loadItemSettingClass(){const{containerWidgetId:e,hasLayoutSetting:t}=this.props;e&&t&&!i.WidgetSettingManager.getInstance().getItemSettingClass(e)&&i.WidgetSettingManager.getInstance().loadItemSettingClass(e)}getStyle(){return e.css`
      &.single-setting {
        border-top: 1px solid var(--light-800);
      }
    `}render(){const{isSingle:t=!1}=this.props;return(0,e.jsx)("div",{className:(0,e.classNames)("setting-container",{"single-setting":t}),css:this.getStyle()},this.renderItemSetting())}}const Te=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,p,d,h,u;const{layoutId:m,layoutItemId:f}=i,v=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig.layouts,x=null==v?void 0:v[m];let w=null,I=!0;if(!x)return null;const y=g.searchUtils.findLayoutItem(t.appStateInBuilder.appConfig,{layoutId:m,layoutItemId:f}),S=g.searchUtils.getWidgetIdThatUseTheLayoutId(t.appStateInBuilder.appConfig,m);let b=!1;S&&(b=null!==(a=null===(n=null===(o=t.appStateInBuilder.appConfig.widgets[S].manifest)||void 0===o?void 0:o.properties)||void 0===n?void 0:n.hasLayoutItemSettingPage)&&void 0!==a&&a);const j=null==y?void 0:y.type;if(j===e.LayoutItemType.Widget&&y.widgetId){const e=t.appStateInBuilder.appConfig.widgets[y.widgetId];w=e.style,I=null===(c=null===(r=null===(l=e.manifest)||void 0===l?void 0:l.properties)||void 0===r?void 0:r.supportAutoSize)||void 0===c||c}else j===e.LayoutItemType.Section&&(w=t.appStateInBuilder.appConfig.sections[y.sectionId].style,I=!1);return{containerWidgetId:S,hasLayoutSetting:b,style:w,supportAutoSize:I,layoutType:x.type,layoutItem:y,runtimeInfo:t.builder.widgetsSettingRuntimeInfo[S],isLockLayout:null!==(u=null===(h=null===(d=null===(p=t.appStateInBuilder)||void 0===p?void 0:p.appConfig)||void 0===d?void 0:d.forBuilderAttributes)||void 0===h?void 0:h.lockLayout)&&void 0!==u&&u}}))(Me);var Ne;!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(Ne||(Ne={}));const ke=m(7972),Pe=m(3321);class Re extends e.React.PureComponent{getStyle(t){var i,s,o;return e.css`
      .setting-header {
        padding: ${e.polished.rem(18)} ${e.polished.rem(16)} ${e.polished.rem(0)} ${e.polished.rem(16)}
      }

      .setting-title {
        font-size: ${e.polished.rem(16)};
        color: ${null===(o=null===(s=null===(i=null==t?void 0:t.colors)||void 0===i?void 0:i.palette)||void 0===s?void 0:s.dark)||void 0===o?void 0:o[600]}
      }
    `}render(){return(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0",style:{height:"38px"}},this.props.Routes.length>1&&!this.props.hideBackArrow?(0,e.jsx)("div",{className:"h-100"},(0,e.jsx)("div",{className:"d-flex align-items-center h-100",style:{cursor:"pointer"},onClick:this.props.onBack},(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(s.Icon,{icon:ke,autoFlip:!0,size:"14",className:"text-dark"})),(0,e.jsx)("div",{className:"pl-2 setting-title",style:{maxWidth:"190px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.title))):(0,e.jsx)("div",{className:"setting-title mt-1",style:{maxWidth:"190px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.title),(0,e.jsx)(s.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.props.onClose},(0,e.jsx)(s.Icon,{icon:Pe,size:"16"}))),this.props.children)}}const De=(0,z.withTheme)(Re);var ze=m(224),Le=m.n(ze);const Be=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Le()},o))};class Oe extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectMessageType=t=>{const s=(0,i.getAppConfigAction)().appConfig,o={id:e.appConfigUtils.getUniqueId(s,"messageConfig"),widgetId:this.props.widgetId,messageType:t,actions:[]};this.props.onSelected((0,e.Immutable)(o))},this.getPublishMessages=()=>{var t,s;const o=(0,i.getAppConfigAction)().appConfig.widgets[this.props.widgetId].manifest.publishMessages,n=[];if(o)for(let i=0;i<o.length;i++){let a=!1;if(this.props.messages)for(let e=0;e<this.props.messages.length;e++){const n=(null===(t=o[i])||void 0===t?void 0:t.messageType)?null===(s=o[i])||void 0===s?void 0:s.messageType:o[i];if(this.props.messages[e].messageType===n){a=!0;break}}if(!a){const t=o[i],s=(null==t?void 0:t.messageType)||t;n.push({messageType:s,messageLabel:(0,e.getMessageTypeLabel)(s,this.props.intl)})}}return n}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .choose-message-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
          color: ${t.colors.palette.dark[200]} !important;
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getPublishMessages();return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 choose-message-list"},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(s.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),(0,e.jsx)(Be,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===t.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noMessage")),t.length>0&&t.map(((t,i)=>(0,e.jsx)("div",{className:"list-item mb-2 pt-1 pb-1 pl-2 pr-2",key:i,onClick:()=>this.onSelectMessageType(t.messageType),title:t.messageLabel},t.messageLabel))))))))}}const Ee=(0,z.withTheme)((0,e.injectIntl)(Oe));class Ue extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.getActions=()=>{const e=[],t=[];let s=null;this.props.target.id,s=this.props.target;const o=i.AppMessageManager.getInstance().getFilteredActions(this.props.message.messageType);for(let i=0;i<o.length;i++)t.includes(o[i].name)||o[i].widgetId!==s.id||(t.push(o[i].name),e.push(o[i]));return e},this.onSelectAction=t=>{let i,s=this.props.message,o=null;this.props.target.id,o=this.props.target,i=o.id?(0,e.getAppStore)().getState().appStateInBuilder?(0,e.getAppStore)().getState().appStateInBuilder.appConfig.widgets[o.id].manifest.version:null:e.version;const n={actionId:t.id+"-"+(new Date).getTime().toString(),widgetId:o.id,messageWidgetId:this.props.widgetId,actionName:t.name,description:null,config:this.checkIsSupportActionSetting(t)?null:void 0,version:i};s=s.set("actions",s.actions.concat(n)),this.props.onSelected(s,n)},this.checkIsSupportActionSetting=e=>!!i.AppMessageManager.getInstance().getActionSettingComponentUri(e,this.props.message.messageType,this.props.message.widgetId)}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .action-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getActions();return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 action-choose-list"},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(s.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),(0,e.jsx)(Be,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===t.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noAction")),t.length>0&&t.map(((t,i)=>(0,e.jsx)("div",{className:"d-flex list-item mb-2 pt-1 pb-1 pl-2 pr-2",key:i,onClick:()=>this.onSelectAction(t)},t.label))))))))}}const We=(0,z.withTheme)(Ue),Fe=m(8907),Ve=m(9185);class He extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.getTargets=()=>{const e=[],t=[],s=[],o=(0,i.getAppConfigAction)().appConfig,n=i.AppMessageManager.getInstance().getFilteredActions(this.props.message.messageType);for(let i=0;i<n.length;i++)if(!s.includes(n[i].widgetId))if(s.push(n[i].widgetId),n[i].widgetId){const t=o.widgets[n[i].widgetId];if(t){if(t.id===this.props.message.widgetId)continue;e.push(t)}}else t.push({uri:n[i].id,label:"Framework"});return{widgetTargets:e,frameWorkTargets:t}},this.onSelectTarget=e=>{this.props.onSelected(e)}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .target-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
        }

        .seperateline-mt {
          margin-top: ${e.polished.rem(5)};
        }

        .seperateline-mb {
          margin-bottom: ${e.polished.rem(1)};
        }

        .seperateline {
          border-top: 1px solid ${t.colors.palette.light[500]};
        }

        .widgets-title {
          font-weight: 600;
          font-size: ${e.polished.rem(14)};
          color: ${t.colors.palette.dark[300]};
        }

        .nodata {
          font-size: ${e.polished.rem(13)};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getTargets(),i=t.frameWorkTargets,o=t.widgetTargets;return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 target-choose-list"},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(s.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),(0,e.jsx)(s.Icon,{autoFlip:!0,className:"p-0 searchIcon",width:16,height:16,icon:Fe})),(0,e.jsx)("div",{className:"w-100 list"},0===i.length&&0===o.length&&(0,e.jsx)("div",{className:"d-flex justify-content-center nodata text-break"},this.props.formatMessage("noTargetWidgets")),i.map(((t,i)=>(0,e.jsx)("div",{className:"d-flex list-item pt-1 pb-1 pl-2 pr-2",key:i,onClick:()=>this.onSelectTarget(t)},(0,e.jsx)(s.Icon,{autoFlip:!0,width:16,height:16,icon:Ve}),(0,e.jsx)("div",{className:"ml-2"},this.props.formatMessage(`action${t.label}`))))),i.length>0&&0===o.length&&(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),(0,e.jsx)("div",{className:"d-flex mt-2 nodata text-break"},this.props.formatMessage("noTargetWidgets"))),o.length>0&&(0,e.jsx)("div",{className:"w-100"},i.length>0&&(0,e.jsx)("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),o.map(((t,i)=>{let o;const n=t.icon;return o=n&&n.svg?n:{svg:n},(0,e.jsx)("div",{className:"d-flex list-item mt-2 p-1 align-items-center",key:i,onClick:()=>this.onSelectTarget(t)},(0,e.jsx)(s.Icon,{autoFlip:!0,width:16,height:16,icon:o.svg,color:o.properties&&o.properties.color}),(0,e.jsx)("div",{className:"ml-2"},t.label))}))))))))}}const $e=(0,z.withTheme)(He);var Ge=m(9338),Je=m.n(Ge);const _e=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Je()},o))};var Ze=m(1553),Ke=m.n(Ze);const Xe=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Ke()},o))};var Ye=m(5339),Qe=m.n(Ye);const qe=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Qe()},o))};var et=m(4357),tt=m.n(et);const it=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:tt()},o))};var st=m(2008);class ot extends e.React.PureComponent{componentDidMount(){this._initInteractive()}_initInteractive(){if(this.ref){const e=this.ref;let t=null,i=null,s=null;this.dropZoneInteractable=(0,st.interact)(e).dropzone({accept:`.${this.props.dragItemName}`,overlap:"center",ondropmove:e=>{this.dragElement=e.relatedTarget,this.dropzoneElement=e.target;const t=this.dropzoneElement.getAttribute("data-item-index"),o=this.dragElement.getAttribute("data-item-index"),n=this.dropzoneElement.offsetTop+this.dropzoneElement.clientHeight/2;parseFloat(this.dragElement.getAttribute("move-relative-top"))+this.dragElement.clientHeight/2>n?(i=parseInt(o),s=parseInt(t)):(i=parseInt(o),s=parseInt(t)-1)},ondrop:e=>{this.props.onDragChanged&&this.props.onDragChanged(i,s)}}),this.interactable=(0,st.interact)(e).draggable({startAxis:"y",lockAxis:"y",inertia:!1,modifiers:[],autoScroll:!0,onstart:e=>{const{clientY0:t,target:i}=e,s=i.getBoundingClientRect(),o=i.clientHeight,n=t-s.top-o/2;i.style.webkitTransform="translate(0px, "+n+"px)",i.style.transform="translate(0px, "+n+"px)",i.setAttribute("start-y",n),i.setAttribute("start-relative-top",i.offsetTop)},onmove:e=>{const{clientY:i,clientY0:s,target:o}=e;let n=i-s+(parseFloat(o.getAttribute("start-y"))||0);t&&cancelAnimationFrame(t),n<0?-1*n>parseFloat(o.getAttribute("start-relative-top"))+.8*o.clientHeight&&(n=-1*(parseFloat(o.getAttribute("start-relative-top"))+.8*o.clientHeight)):n>o.parentElement.clientHeight-parseFloat(o.getAttribute("start-relative-top"))-.2*o.clientHeight&&(n=o.parentElement.clientHeight-parseFloat(o.getAttribute("start-relative-top"))-.2*o.clientHeight),o.setAttribute("move-relative-top",n+parseFloat(o.getAttribute("start-relative-top"))),t=requestAnimationFrame((()=>{o.style.webkitTransform="translate(0px, "+n+"px)",o.style.transform="translate(0px, "+n+"px)",t=null}))},onend:e=>{const{target:i}=e;t&&cancelAnimationFrame(t),i.style.webkitTransform="translate(0px, 0px)",i.style.transform="translate(0px, 0px)"}})}}render(){const{className:t,style:i}=this.props,s=(0,e.classNames)(this.props.dragItemName,"drag-item",t);return e.React.createElement("div",{className:s,style:i,ref:e=>{this.ref=e},"data-item-index":this.props.dragItemIndex,onMouseEnter:()=>{this.props.onMouseEnter(this.props.dragItemIndex)},onMouseLeave:()=>{this.props.onMouseLeave(this.props.dragItemIndex)}},this.props.children)}}function nt(e){let t=null;t=e.widgetId?(0,i.getAppConfigAction)().appConfig.widgets[e.widgetId]:{label:"Framework"};let s=e.actionName;if(t.manifest)if(t.manifest.i18nMessages[`_action_${e.actionName}_label`])s=t.manifest.i18nMessages[`_action_${e.actionName}_label`];else{const i=t.manifest.messageActions;if(i)for(let t=0;t<i.length;t++)if(i[t].name===e.actionName){s=i[t].label;break}}else if("Framework"===t.label){const t=i.AppMessageManager.getInstance().getAllActions();for(let i=0;i<t.length;i++)if(e.actionId.includes(t[i].id)){s=t[i].label;break}}return s}class at extends e.React.PureComponent{constructor(t){super(t),this.searchItems=e=>{},this.onEditAction=e=>{e.config&&this.props.onClickEditAction(this.props.message,e)},this.onRemoveAction=e=>{let t=this.props.message;const s=Object.assign([],t.actions),o=[];for(let t=0;t<s.length;t++)s[t].actionName===e.actionName&&o.push(s[t]);for(let o=0;o<s.length;o++)if(s[o].actionName===e.actionName&&s[o].widgetId===e.widgetId){const n=Object.assign([],s);n.splice(o,1),t=t.set("actions",n);const a=i.AppMessageManager.getInstance().getAction(e.widgetId,e.actionName);a&&a.onRemoveListen(t.messageType,t.widgetId);break}this.props.onMessageChanged(t)},this.onActionOrderChanged=(e,t)=>{if(e===t)return;let i=this.props.message;const s=[];if(e<t){for(let t=0;t<e;t++)s.push(i.actions[t]);for(let o=e+1;o<t+1;o++)s.push(i.actions[o]);s.push(i.actions[e]);for(let e=t+1;e<i.actions.length;e++)s.push(i.actions[e])}else{for(let e=0;e<t+1;e++)s.push(i.actions[e]);s.push(i.actions[e]);for(let o=t+1;o<e;o++)s.push(i.actions[o]);for(let t=e+1;t<i.actions.length;t++)s.push(i.actions[t])}i=i.set("actions",s),this.props.onMessageChanged(i)},this.getActionList=()=>(0,e.jsx)("div",{style:{position:"relative"}},this.props.message.actions.asMutable().map(((t,s)=>{let o=null;return o=t.widgetId?(0,i.getAppConfigAction)().appConfig.widgets[t.widgetId]:{label:"Framework"},(0,e.jsx)(ot,{dragItemIndex:s,dragItemName:this.props.message.messageType,style:{touchAction:"none",userSelect:"none"},key:s,onDragChanged:this.onActionOrderChanged,onMouseEnter:e=>{this.setState({itemSelected:!0,itemSelectedIndex:e})},onMouseLeave:e=>{this.setState({itemSelected:!1,itemSelectedIndex:void 0})}},(0,e.jsx)("div",{className:(0,e.classNames)("mb-2 mt-2 action-item",{"active-border":this.props.action&&this.props.action.actionId&&this.props.action.actionId===t.actionId}),css:this.getStyle()},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between align-items-center"},"Framework"===o.label&&(0,e.jsx)("div",{className:"widget-name text-truncate",title:this.props.formatMessage(`action${o.label}`)},this.props.formatMessage(`action${o.label}`)),"Framework"!==o.label&&(0,e.jsx)("div",{className:"widget-name text-truncate",title:o.label},o.label),this.state.itemSelected&&this.state.itemSelectedIndex===s&&(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)("div",{className:"drag-icon-con"},(0,e.jsx)(_e,{size:"s",className:"p-0 deleteIcon"})),(0,e.jsx)("div",{className:"mr-2",onClick:()=>this.onEditAction(t),title:this.props.formatMessage("actionSettings")},(t.config||null===t.config)&&(0,e.jsx)(Xe,{size:"s",className:"p-0 deleteIcon"}),void 0===t.config&&null),(0,e.jsx)("div",{onClick:()=>this.onRemoveAction(t),title:this.props.formatMessage("actionDelete")},(0,e.jsx)(it,{size:"s",className:"p-0 deleteIcon"})))),(0,e.jsx)("div",{className:"text-dark-600 pl-2 mt-2 d-flex align-items-center action-name"},(0,e.jsx)("div",{className:"w-100 text-truncate",title:nt(t)},nt(t)))))}))),this.state={itemSelected:!1,itemSelectedIndex:void 0}}getStyle(){return e.css`
      & {
        position: relative
      }
      .drag-icon-con {
        position: absolute;
        top: ${e.polished.rem(23)};
        left: 0
      }
    `}render(){const t=(0,e.getMessageTypeLabel)(this.props.message.messageType,this.props.intl);return(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 message-item message-item-container mb-3",this.props.isActive?"active-border":"")},(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-start mt-1"},(0,e.jsx)("h2",{className:"message-item-title",title:t},t),(0,e.jsx)("div",{onClick:()=>this.props.onMessageRemoved(this.props.message)},(0,e.jsx)(qe,{size:14,className:"p-0 deleteIcon"}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),(0,e.jsx)("div",{className:"mt-2 item-add-action text-truncate",onClick:()=>this.props.onClickAddAction(this.props.message)},`+ ${this.props.formatMessage("addAction")}`)))}}const lt=(0,e.injectIntl)(at);class rt extends e.React.PureComponent{constructor(t){super(t),this.getActionSettingClass=()=>{const e=this.getActionSettingClassUri();i.AppMessageManager.getInstance().loadActionSettingClass(this.props.action,e).then((e=>{this.setState({settingClass:e})}))},this.onSettingChange=e=>{const t=e.actionId,i=e.config;this.state.cacheActionJson.config!==i&&t===this.state.cacheActionJson.actionId&&this.setState({cacheActionJson:this.state.cacheActionJson.set("config",i)},(()=>{this.updateAction(!1)}))},this.updateAction=e=>{let t=this.props.message;const i=Object.assign([],t.actions);let s=null;for(let e=0;e<i.length;e++)if(i[e].actionId===this.state.cacheActionJson.actionId&&i[e].widgetId===this.state.cacheActionJson.widgetId){i[e]=i[e].set("config",this.state.cacheActionJson.config),s=i[e];break}t=t.set("actions",i),this.props.onUpdateAction(t,s,e)},this.onDisableDoneBtn=e=>{this.setState({isDisableDoneBtn:e})},this.renderActionSetting=()=>{const t=this.state.settingClass;return t?e.React.createElement(e.ErrorBoundary,null,e.React.createElement(t,{actionId:this.state.cacheActionJson.actionId,widgetId:this.props.action.widgetId,messageWidgetId:this.props.widgetId,config:this.state.cacheActionJson.config?this.state.cacheActionJson.config:void 0,messageType:this.props.message.messageType,onSettingChange:this.onSettingChange,onDisableDoneBtn:this.onDisableDoneBtn})):e.React.createElement("div",null,this.props.formatMessage("actionSettingLoading"))},this.getActionSettingClassUri=()=>{const e=i.AppMessageManager.getInstance().getAllActions();let t=null,s=null;for(let i=0;i<e.length;i++)if(this.props.action.actionId.includes(e[i].id)){t=e[i];break}return t&&(s=i.AppMessageManager.getInstance().getActionSettingComponentUri(t,this.props.message.messageType,this.props.action.messageWidgetId)),s},this.state={settingClass:null,cacheActionJson:this.props.action,isDisableDoneBtn:!1}}componentDidMount(){this.getActionSettingClass()}componentDidUpdate(e){this.getActionSettingClass(),this.props.action!==e.action&&this.setState({cacheActionJson:this.props.action})}render(){const t=this.getActionSettingClassUri();return e.React.createElement("div",{className:"setting-container h-100",style:{overflowY:"auto"}},t?this.renderActionSetting():e.React.createElement("div",null,"  No widget"),e.React.createElement("div",{className:"w-100",style:{height:"50px"}}))}}var ct=m(748),pt=m.n(ct);const dt=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:pt()},o))};class gt extends e.React.PureComponent{constructor(t){super(t),this.sidePopperTrigger=e.React.createRef(),this.resetState=()=>{this.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},this.updateLocalState=(e,t)=>{const s=(0,i.getAppConfigAction)().appConfig;if(e.messageConfigs&&e.messageConfigs!==t.messageConfigs){let t=null,i=null,o=null;if(this.state.currentTriggeredMessage&&this.state.currentTriggeredMessage.messageType){const n=Object.keys(e.messageConfigs);for(let i=0;i<n.length;i++)if(e.messageConfigs[n[i]].messageType===this.state.currentTriggeredMessage.messageType&&e.messageConfigs[n[i]].widgetId===this.state.currentTriggeredMessage.widgetId){t=e.messageConfigs[n[i]];break}if(t&&this.state.currentTriggeredTarget)if(this.state.currentTriggeredTarget.id){const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.ActionChoose)i=s.widgets[e.id];else for(let o=0;o<t.actions.length;o++)if(t.actions[o].widgetId===e.id){i=s.widgets[e.id];break}}else{const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.ActionChoose)i=e;else for(let s=0;s<t.actions.length;s++)if(!t.actions[s].widgetId){i=e;break}}if(t&&this.state.currentTriggeredAction&&this.state.currentTriggeredAction.actionName)for(let e=0;e<t.actions.length;e++)if(t.actions[e].actionId===this.state.currentTriggeredAction.actionId&&t.actions[e].widgetId===this.state.currentTriggeredAction.widgetId&&t.actions[e].actionName===this.state.currentTriggeredAction.actionName){o=t.actions[e];break}}this.setState({currentTriggeredMessage:t,currentTriggeredTarget:i,currentTriggeredAction:o})}},this.getMessages=()=>{const e=this.props.messageConfigs,t=[],i=Object.keys(e);if(i.length>0)for(let s=0;s<i.length;s++)e[i[s]]&&e[i[s]].widgetId===this.props.widgetId&&t.push(e[i[s]]);return t},this.onShowMessageChooseList=()=>{const e=[{pathType:Ne.MessageChoose,message:null}];this.setState({panelRoutes:e})},this.onMessageRemoved=e=>{e.actions.forEach((t=>{const s=i.AppMessageManager.getInstance().getAction(t.widgetId,t.actionName);s&&s.onRemoveListen(e.messageType,e.widgetId)})),(0,i.getAppConfigAction)().removeMessage(e).exec()},this.onMessageChanged=e=>{this.setState({currentTriggeredMessage:e},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))},this.onShowTargetChooseList=e=>{const t=[{pathType:Ne.TargetChoose,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},this.onShowActionSettingPage=(e,t)=>{const i=[{pathType:Ne.ActionSetting,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:i})},this.backForwardPanel=()=>{const e=Object.assign([],this.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){const t=e[e.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},(()=>{(0,i.getAppConfigAction)().editMessage(t).exec()}))}else{const t=this.state.panelRoutes[this.state.panelRoutes.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:null},(()=>{(0,i.getAppConfigAction)().removeMessage(t).exec()}))}},this.closePanel=()=>{this.setState({panelRoutes:[]})},this.onMessageChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:Ne.TargetChoose,message:e}),this.setState({currentTriggeredMessage:e,panelRoutes:t},(()=>{(0,i.getAppConfigAction)().addMessage(e).exec()}))},this.onTargetChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:Ne.ActionChoose,message:this.state.currentTriggeredMessage}),this.setState({currentTriggeredTarget:e,panelRoutes:t})},this.onActionChooseListSelected=(t,s)=>{if(null===s.config){const o=Object.assign([],this.state.panelRoutes);o.push({pathType:Ne.ActionSetting,message:t}),this.setState({currentTriggeredMessage:t,currentTriggeredAction:(0,e.Immutable)(s),panelRoutes:o},(()=>{(0,i.getAppConfigAction)().editMessage(t).exec()}))}else this.setState({currentTriggeredMessage:t,currentTriggeredAction:null,panelRoutes:[]},(()=>{(0,i.getAppConfigAction)().editMessage(t).exec()}))},this.onUpdateAction=(e,t,s)=>{s?this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:[]},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()})):this.setState({currentTriggeredMessage:e,currentTriggeredAction:t},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))},this.modalStyle=e.css`
      position: absolute;
      top: 0;
      bottom: 0;
      width: 259px;
      height: 100%;
      padding-bottom: 1px;
      border-right: 1px solid ${this.props.theme.colors.white};
      border-bottom: 1px solid ${this.props.theme.colors.white};
    `,this.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]}}componentDidUpdate(e){this.props.widgetId!==e.widgetId?this.resetState():this.updateLocalState(this.props,e)}render(){var t,i,o,n;const{formatMessage:l}=this.props,r=this.getMessages();return(0,e.jsx)("div",{className:"d-flex h-100 flex-column"},(0,e.jsx)("div",{ref:this.sidePopperTrigger},(0,e.jsx)(a.SettingSection,null,(0,e.jsx)(a.SettingRow,{flow:"wrap"},(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},(0,e.jsx)(s.Button,{className:"w-100",type:"primary",onClick:this.onShowMessageChooseList},(0,e.jsx)("div",{className:"w-100 text-truncate"},l("addTrigger"))))),(0,e.jsx)(a.SettingRow,{flow:"wrap"},r.map(((t,i)=>(0,e.jsx)(lt,{key:i,message:t,onMessageRemoved:this.onMessageRemoved,isActive:t===this.state.currentTriggeredMessage&&this.state.panelRoutes.length>0,onMessageChanged:this.onMessageChanged,onClickAddAction:this.onShowTargetChooseList,onClickEditAction:this.onShowActionSettingPage,formatMessage:l,action:this.state.panelRoutes.length>0&&this.state.currentTriggeredAction})))),this.state.panelRoutes.length>0&&!this.props.pageId&&(0,e.jsx)("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.MessageChoose&&(0,e.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(t=this.sidePopperTrigger)||void 0===t?void 0:t.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(De,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(Ee,{widgetId:this.props.widgetId,onSelected:this.onMessageChooseListSelected,messages:r,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.TargetChoose&&this.state.currentTriggeredMessage&&(0,e.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(i=this.sidePopperTrigger)||void 0===i?void 0:i.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(De,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)($e,{onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&(0,e.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(o=this.sidePopperTrigger)||void 0===o?void 0:o.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(De,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(We,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ne.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&(0,e.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(n=this.sidePopperTrigger)||void 0===n?void 0:n.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(De,{hideBackArrow:!0,formatMessage:l,Routes:this.state.panelRoutes,title:`${l("actionSet")}`,onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(rt,{widgetId:this.props.widgetId,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:l}))))))),0===r.length&&(0,e.jsx)("div",{className:"flex-grow-1 text-center no-trigger-tip position-relative"},(0,e.jsx)("div",{className:"position-absolute"},(0,e.jsx)(dt,{size:48}),(0,e.jsx)("p",{className:"trigger-tip"},l("noTriggerTip",{ButtonString:l("addTrigger")})))))}}var ht=m(9788),ut=m.n(ht);const mt=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:ut()},o))};function ft(t){const{enabled:i,isOpen:o,icon:n,label:a,onEnableToggled:l,onOpenToggled:r}=t;return(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(s.Checkbox,{checked:i,onChange:l}),(0,e.jsx)(s.Icon,{className:"ml-2",icon:n}),(0,e.jsx)("span",{className:"ml-2"},a),(0,e.jsx)(s.Button,{className:"ml-auto p-0",size:"sm",type:"tertiary",icon:!0,onClick:r,disabled:!i},(0,e.jsx)(mt,{size:"s",rotate:o&&i?180:0})))}function vt(t){const{widgetId:o,enabled:n,items:l,dataActions:r=(0,e.Immutable)({}),formatMessage:c,onEnableToggled:p}=t,[d,g]=e.React.useState(!0),h=l[0],u=e.React.useCallback((()=>{g(!d)}),[d,g]),m=[];l.forEach((e=>{var t,i,s,o;(null===(o=null===(s=(null!==(i=null===(t=null==r?void 0:r[e.name])||void 0===t?void 0:t.actions)&&void 0!==i?i:{})[e.widgetId])||void 0===s?void 0:s.enabled)||void 0===o||o)&&m.push(e.widgetId)}));const f=e.React.useCallback((t=>e.i18n.getIntl().formatMessage({id:"numSelected"},{number:t.length})),[]),v=e.React.useCallback((()=>l.map((t=>{var o,n,a;const l=null!==(a=(null!==(n=null===(o=null==r?void 0:r[t.name])||void 0===o?void 0:o.actions)&&void 0!==n?n:{})[t.widgetId])&&void 0!==a?a:(0,e.Immutable)({}),c=(0,i.getAppConfigAction)().appConfig.widgets[t.widgetId];return{value:t.widgetId,label:c.label,render:(i,o)=>{var n;return(0,e.jsx)("div",{className:"d-flex w-100 align-items-center"},(0,e.jsx)(s.Checkbox,{checked:null===(n=l.enabled)||void 0===n||n}),(0,e.jsx)(s.Icon,{icon:t.icon,className:"ml-2",size:16}),(0,e.jsx)("span",{className:"ml-2"},c.label))}}}))),[l,r]),x=e.React.useCallback(((t,s)=>{var n,a,l,c;const p=null===(c=null===(l=(null!==(a=null===(n=null==r?void 0:r[h.name])||void 0===n?void 0:n.actions)&&void 0!==a?a:(0,e.Immutable)({}))[s])||void 0===l?void 0:l.enabled)||void 0===c||c;(0,i.getAppConfigAction)().editWidgetProperty(o,"dataActions",r.setIn([h.name,"actions",s,"enabled"],!p)).exec()}),[r,o,h.name]);return(0,e.jsx)(a.SettingSection,{title:(0,e.jsx)(ft,{enabled:n,icon:h.icon,label:h.label,isOpen:d,onEnableToggled:p,onOpenToggled:u}),className:(0,e.classNames)({"pb-0":!d||!n}),css:e.css`
        border-bottom: ${d&&n?"1px solid var(--light-800)":"none !important"};
      `},(0,e.jsx)(s.Collapse,{isOpen:d&&n,className:"mt-0"},(0,e.jsx)(a.SettingRow,{flow:"wrap",label:c("selectWidgets"),className:"mt-2"},(0,e.jsx)(s.MultiSelect,{fluid:!0,items:(0,e.Immutable)(v()),onClickItem:x,values:(0,e.Immutable)(m),displayByValues:f})),t.children))}var xt=m(9395),wt=m.n(xt);const It=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:wt()},o))};var yt=m(5234),St=m.n(yt);const bt=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:St()},o))};class jt extends e.React.PureComponent{constructor(e){super(e),this.state={settingClasses:{}}}componentDidMount(){const e=i.AppDataActionManager.getInstance().loadAllActionSettingClasses(),t=Object.keys(null!=e?e:{});if(t.length>0){const i=t.map((t=>{return i=this,s=void 0,n=function*(){return yield e[t]},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{r(n.next(e))}catch(e){t(e)}}function l(e){try{r(n.throw(e))}catch(e){t(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(a,l)}r((n=n.apply(i,s||[])).next())}));var i,s,o,n}));Promise.allSettled(i).then((e=>{const i={};e.forEach(((e,s)=>{"fulfilled"===e.status?i[t[s]]=e.value:console.error(e.reason)})),this.setState({settingClasses:i})})).catch((e=>console.error(e)))}}getAvailableActions(){var t,s;const o={},n=(0,i.getAppConfigAction)(),a=null===(t=n.appConfig.widgets[this.props.widgetId].manifest)||void 0===t?void 0:t.excludeDataActions,l=e.DataActionManager.getInstance(),r=e.appConfigUtils.buildDataActionRelatedWidgetMap(n.appConfig),c=this.props.appMode===e.AppMode.Design,p=this.props.appMode===e.AppMode.Design;return Object.keys(null!==(s=n.appConfig.widgets)&&void 0!==s?s:{}).forEach((t=>{var i,s;if(t===this.props.widgetId)return;const d=n.appConfig.widgets[t];(null===(s=null===(i=d.manifest)||void 0===i?void 0:i.dataActions)||void 0===s?void 0:s.length)>0&&d.manifest.dataActions.forEach((i=>{var s,n;const g=`${null===(s=d.manifest)||void 0===s?void 0:s.name}.${i.name}`,h=e.appConfigUtils.isWidgetFromSameSource(r,this.props.widgetId,t,c,p);!l.isActionExcluded(g,a)&&h&&(o[i.name]||(o[i.name]=[]),o[i.name].push({name:i.name,icon:`${e.moduleLoader.resolveModuleFullPath("widgets/")}../${d.uri}dist/${i.icon}`,label:null!==(n=d.manifest.i18nMessages[`_action_${i.name}_label`])&&void 0!==n?n:i.label,widgetId:t,settingUri:`${d.uri}dist/${i.settingUri}`}))}))})),o}updateActionStatus(t,s){var o;const{widgetId:n}=this.props,a=(0,i.getAppConfigAction)(),l=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",l.setIn([t,"enabled"],s)).exec()}createActionItemSetting(t){const i=this.state.settingClasses[t.settingUri];return i?(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(i,{widgetId:this.props.widgetId,actionName:t.name,onSettingChange:e=>{this.updateActionItemSetting(t.name,e)}})):null}updateActionItemSetting(t,s){var o;const{widgetId:n}=this.props,a=(0,i.getAppConfigAction)(),l=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",l.setIn([t,"config"],s)).exec()}createActionItem(t,i,s){var o,n;const{dataActions:a}=this.props,l=null===(n=null===(o=null==a?void 0:a[t])||void 0===o?void 0:o.enabled)||void 0===n||n,r=i[0];return(0,e.jsx)(vt,{key:s,widgetId:this.props.widgetId,enabled:l,items:i,dataActions:a,formatMessage:this.props.formatMessage,onEnableToggled:()=>this.updateActionStatus(t,!l)},l&&r.settingUri&&this.createActionItemSetting(r))}createExportNotes(t=!1){return(0,e.jsx)("div",{className:(0,e.classNames)("d-flex w-100",{"mt-3":t,"pl-5":t}),css:e.css`color: var(--dark-500); font-size: 13px;`},(0,e.jsx)(It,{color:"var(--dark-50)"}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("export")),(0,e.jsx)(s.Tooltip,{placement:"bottom",css:e.css`max-width: 300px; margin-left: auto;`,showArrow:!0,title:this.props.formatMessage("exportNotes")},(0,e.jsx)("div",{className:"ml-auto"},(0,e.jsx)(v,{className:"mr-1",size:"s",color:"var(--dark-50)"}))))}render(){const t=this.getAvailableActions(),i=Object.keys(t).sort();return 0===i.length?(0,e.jsx)("div",{className:"d-flex flex-column align-items-center flex-grow-1"},this.createExportNotes(),(0,e.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1"},(0,e.jsx)(bt,{size:42,color:"var(--dark-200)"}),(0,e.jsx)("p",{className:"p-2",css:e.css`color: var(--dark-500); text-align: center;`},this.props.formatMessage("noDataAction")))):(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("span",{css:e.css`color: var(--dark-500); font-size: 13px; line-height: 1.1;`},this.props.formatMessage("chooseDataAction")),i.map(((e,i)=>this.createActionItem(e,t[e],i))),this.createExportNotes(!0))}}const Ct=e.ReactRedux.connect(((e,t)=>{var i,s,o,n;const a=null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.widgets[t.widgetId];return{dataActions:null==a?void 0:a.dataActions,sizeMode:null===(o=e.appStateInBuilder)||void 0===o?void 0:o.browserSizeMode,appMode:null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.appMode}}))(jt);class At extends e.React.PureComponent{constructor(){super(...arguments),this.handleEnableDataActionChanged=e=>{const t=(0,i.getAppConfigAction)().appConfig.widgets[this.props.widgetId];(0,i.getAppConfigAction)().editWidget(t.set("enableDataAction",e.target.checked)).exec()}}getStyle(t){return e.css`
      .jimu-widget-setting--row {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .message-setting {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
        }

        .listItem {
          cursor: pointer;
          padding: 5px 0px;
        }

        .listItem.active {
          background-color: ${t.colors.palette.primary[100]};
          border: 0;
        }

        .listItem:hover {
          background-color: ${e.polished.rgba(t.colors.palette.primary[100],.4)};
        }

        .active-border {
          border: 1px solid ${t.colors.palette.primary[700]} !important;
        }

        .message-item-container {
          background-color: ${t.colors.palette.light[500]};
          border: 1px solid ${t.colors.palette.light[500]};
        }

        .message-item {

          .widget-name {
            font-size: ${e.polished.rem(14)};
            font-weight: 400;
          }

          .action-name {
            font-size: ${e.polished.rem(13)};
            height: ${e.polished.rem(25)};
          }

          padding: 5px 12px 6px 12px;

          .action-item {
            padding: 5px 10px 10px 10px;
            border: 1px solid ${t.colors.palette.light[400]};
            background-color: ${t.colors.palette.light[400]};
          }

          .drag-item {
            &:hover {

              .action-item {
                border: 1px solid ${t.colors.palette.primary[700]};
              }

              .action-name {
                background-color: ${t.colors.palette.secondary[200]};
              }
            }
          }

          .message-item-title {
            font-size: ${e.polished.rem(14)};
            width: 190px;
            overflow: hidden;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            display: -webkit-box;
          }

          .deleteIcon-disable {
            opacity: .3;
          }

          .deleteIcon {
            cursor: pointer;
            opacity: .8;
          }

          .deleteIcon:hover {
            opacity: 1;
          }

          .item-add-action {
            cursor: pointer;
            color: ${t.colors.palette.primary[700]};

            &:hover {
              color: ${t.colors.palette.primary[800]};
            }
          }
        }

        .jimu-widget-setting--section {
          padding-left: 0;
          padding-right: 0;
        }
        .jimu-widget-setting--row {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .no-trigger-tip {
          &>div {
            top: 50%;
            transform: translateY(-50%);
            color: ${t.colors.palette.dark[200]};
          }
          p {
            color: ${t.colors.palette.dark[500]};
            font-size: ${e.polished.rem(14)};
            margin: ${e.polished.rem(16)} auto 0;
            line-height: ${e.polished.rem(19)};
            width: ${e.polished.rem(228)};
          }
        }
      }
    `}createMessageActionSetting(){const{pageId:t,widgetId:i,theme:s,messageConfigs:o}=this.props;return(0,e.jsx)(gt,{pageId:t,widgetId:i,theme:s,messageConfigs:o,formatMessage:this.props.formatMessage})}createDataActionSetting(){const{enableDataAction:t,formatMessage:i}=this.props;return(0,e.jsx)(a.SettingSection,{className:"h-100 d-flex flex-column",title:(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center sub-header"},(0,e.jsx)("div",{className:"title d-flex",css:e.css`max-width: 80%; color: var(--dark-800)`},(0,e.jsx)("div",{className:"text-truncate",title:i("enableDataAction")},i("enableDataAction")),(0,e.jsx)(s.Tooltip,{placement:"left",css:e.css`max-width: 300px;`,showArrow:!0,title:i("dataActionTooltip")},(0,e.jsx)("div",{className:"ml-2"},(0,e.jsx)(v,{size:"s"})))),(0,e.jsx)(s.Switch,{checked:t,onChange:this.handleEnableDataActionChanged}))},t&&(0,e.jsx)(Ct,{widgetId:this.props.widgetId,formatMessage:this.props.formatMessage}))}render(){const{supportMessageAction:t,canConsumeDataAction:i,formatMessage:o}=this.props;return t&&!i?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting px-3"},this.createMessageActionSetting())):!t&&i?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},this.createDataActionSetting()):(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting"},(0,e.jsx)(s.Tabs,{type:"pills",fill:!0,className:"p-3 h-100",defaultValue:"message"},(0,e.jsx)(s.Tab,{id:"message",title:o("messageAction")},this.createMessageActionSetting()),(0,e.jsx)(s.Tab,{id:"data",title:o("dataAction")},this.createDataActionSetting()))))}}const Mt=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a;const l=null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.widgets[t.widgetId];return{enableDataAction:null===(o=null==l?void 0:l.enableDataAction)||void 0===o||o,messageConfigs:null===(a=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===a?void 0:a.messageConfigs}}))((0,z.withTheme)(At)),Tt={pageSetting:"Page settings",dialogSetting:"Dialog settings",openWithWindow:"Open with Window",openWithWindowTip:"Only fixed windows are supported (except splash).",folderSetting:"Folder settings",linkSetting:"Link settings",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",fitToContainer:"Fit to container",keepAspectRatio:"Keep aspect ratio",aspectRatio:"Aspect ratio",fixedHeight:"Fixed height",content:"Content",dynamicSettingStyle:"Style",action:"Action",donotSupportDataAction:"The widget does not support any data actions.",daynamicLayout:"Layout",displayMode:"Display mode",dynamicWidth:"Width",dynamicHeight:"Height",dynamicLoading:"Loading",heightMode:"Height mode",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",sectionDelete:"Delete",noWidget:"No widget",maxWidth:"Max width",docked:"Docked",floatingScreen:"Floating",verticalSpacing:"Vertical spacing",triggerPosition:"Trigger position",upper:"Upper",lower:"Lower",dsDuplicateView:"Duplicate view",dsDuplicateScreen:"Duplicate screen",newView:"New view",noSettingOptions:"No setting options",contentWidth:"Content width",dsCustom:"Custom",dsAuto:"Auto",size:"Size",lockParent:"Kept within the parent container",margin:"Margin",noStyle:"This widget does not support style settings.",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Action settings",actionSettings:"Settings",actionDelete:"Delete",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",messageAction:"Message action",dataAction:"Data action",noAction:"No action",chooseSearchTrigger:"Select or search a trigger",chooseSearchTarget:"Select or search a target",chooseSearchAction:"Select or search an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading...",turnTo:"Switch to:",dsFill:"Fill",keepFixedOnScroll:"Stays at the top of the page when scrolling",titleBackground:"Background",titleOption:"Options",copyPage:"Copy",align:"Align",start:"Start",end:"End",mode:"Mode",fixedMode:"Fixed",anchoredMode:"Anchored",fixedModeTip:"Display in a fixed position.",anchoredModeTip:"Appears next to the linked widget.",splashDlgWarning:"Splash cannot be set to Anchored.",pageDlgWarning:"Window opened with pages cannot be set to Anchored.",keepLeft:"Keep left",keepRight:"Keep right",keepCenter:"Keep center",keepTop:"Keep top",keepBottom:"Keep bottom",closeOptions:"Close options",clickOutside:"Click outside to close Window",interaction:"Interaction",interactionStyle1:"Checkbox only",interactionStyle2:"Button in the same line",interactionStyle3:"Button in a different line",confirmation:"Confirmation",confirmationRequiredText:"Check to proceed",confirmationButtonTextHolder:"Required",closeIcon:"Close icon",closeIconPosition:"Position",closeIconPositionTL:"Top left",closeIconPositionTR:"Top right",preventDisplayAgain:'"Don\'t show this again" option',checkboxText:"Checkbox text",checkboxButtonText:"Button text",alwaysShow:"Always show this window",arrows:"Arrows",dots:"Dots",autoPlay:"Auto play",offset:"Offset",interval:"Interval (Second)",loop:"Loop",toggleViewList:"Toggle view list",spacing:"Spacing",scrollToSwitch:"Scroll to switch",dataActions:"Data actions",enableDataAction:"Enable data action",chooseDataAction:"Please choose the following data actions",selectWidgets:"Select widgets",dataActionTooltip:"Show data action button on the widget. The widget will not have any data actions, if no action is configured, or the data type does not support data action.",noDataAction:"To see data action options, please add a widget that provides data action onto the same page.",noTriggerTip:'Click the "{ButtonString}" button to add and configure actions.',exportNotes:"Note: Export is configured in the Data panel.",lazyLoading:"Lazy loading",lazyLoadingTip:"Load content when switched for the first time."};var Nt=m(831),kt=m(8683),Pt=m.n(kt),Rt=m(760),Dt=m.n(Rt),zt=m(1397),Lt=m.n(zt);const Bt=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Lt()},o))};var Ot=m(9216),Et=m.n(Ot);const Ut=t=>{const{className:i}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon-component",i);return e.React.createElement(s.Icon,Object.assign({className:n,icon:Et()},o))};const{useState:Wt,useEffect:Ft}=e.React,Vt={svg:Pt()},Ht={svg:Dt()},$t=Object.assign({},Tt,s.defaultMessages,t,e.defaultMessages),Gt=t=>{const[o,n]=Wt("#"),{id:a,type:l,theme:r,intl:c,linkTitle:p}=t;return Ft((()=>{((t,s)=>{return o=void 0,n=void 0,l=function*(){var o,n,a,l,r;const c=null===(n=null===(o=(0,e.getAppStore)().getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===n?void 0:n.appConfig;let p;if("page"===s||"dialog"===s)return yield i.helpUtils.getBuildAppsHelpLink(`add-a-${s}`);if("screen"===s)return yield i.helpUtils.getBuildAppsHelpLink("add-screen-groups");if("section"===s)p="section";else if("placeholder"===s)p="placeholder";else if(p=null===(r=null===(l=null===(a=null==c?void 0:c.widgets)||void 0===a?void 0:a[t])||void 0===l?void 0:l.manifest)||void 0===r?void 0:r.name,!p)return yield Promise.resolve(null);return yield i.helpUtils.getWidgetHelpLink(p)},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function s(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(i,s)}r((l=l.apply(o,n||[])).next())}));var o,n,a,l})(a,l).then((e=>{n(e)}))}),[a,l]),(0,e.jsx)(s.Link,{themeStyle:{icon:!0,type:"link"},to:o,target:"_blank",title:p,css:e.css`
        margin-right: ${e.polished.rem(-9)};
        padding: 0 !important;
        .jimu-icon {
          margin-right: 0;
          color: ${r.colors.palette.dark[400]};
        }
        :hover {
          .jimu-icon{
            color: ${r.colors.black};
          }
        }
      `},(0,e.jsx)(Bt,{autoFlip:!e.i18n.isSameLanguage(null==c?void 0:c.locale,"he")}))},Jt=t=>{var i;const{hideColorSelector:o,headTitle:n,icon:a,customIcon:l,id:r,type:c,needIconFlip:p,theme:d,intl:g,handleIconChange:h,handleTitleInputBlur:u,handleKeydown:m,focusEditTitle:f,headTitleInput:v}=t,[x,w]=Wt("");let I;const y="string"==typeof l?[{svg:l}]:[l];return I=(null===(i=a)||void 0===i?void 0:i.svg)?a:{svg:a},Ft((()=>{w(n)}),[n]),(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(Nt.IconPicker,{previewOptions:{autoFlip:p,color:!0},configurableOption:o?"none":"color",className:"flex-none",icon:I,customIcons:y,onChange:h,hideRemove:!0,onKeyDown:t=>{if("Tab"===t.key&&t.shiftKey&&(0,e.getAppStore)().getState().appStateInBuilder.appRuntimeInfo.appMode===e.AppMode.Design){t.preventDefault();const i=document.querySelector(`iframe[name="${e.APP_FRAME_NAME_IN_BUILDER}"]`);((null==i?void 0:i.contentDocument)||(null==i?void 0:i.contentWindow.document)).body.focus()}}}),(0,e.jsx)("div",{className:"d-flex position-relative"},(0,e.jsx)("span",{className:"size-placeholder"},x||""),(0,e.jsx)("div",{className:"position-absolute d-flex header-title-input-con"},(0,e.jsx)(s.TextInput,{className:"header-title-input h5",ref:v,title:x,value:x||"",onChange:e=>w(e.target.value),onBlur:e=>u(e,r,c),onKeyDown:m}),(0,e.jsx)(s.Button,{type:"tertiary",size:"sm",className:"toollist-edit-icon",onClick:f},(0,e.jsx)(Ut,null))))),(0,e.jsx)(Gt,{id:r,type:c,theme:d,intl:g,linkTitle:(e=>g.formatMessage({id:e,defaultMessage:$t[e]}))("help")}))};class _t extends e.React.PureComponent{constructor(o){super(o),this.spanText=e.React.createRef(),this.headTitleInput=e.React.createRef(),this.getCss=()=>{const{theme:t}=this.props;return e.css`
      height: 100%;
      overflow: hidden;
      overflow-x: hidden;

      .jimu-widget-setting {
        overflow-x: hidden;
      }
      .widget-setting-tab{
        position: absolute;
        background-color: ${t.body.bg};
      }

      .widget-setting, .section-setting {
        height: calc(100% - ${e.polished.rem(2)});
      }

      .jimu-widget-setting--row {
        label {
          user-select: none;
        }
      }
      .jimu-widget-setting--section-header {
        user-select: none;
      }
      .tab-content {
        height: calc(100% - ${e.polished.rem(40)});
        overflow: auto;
        overflow-x: hidden;
      }
      .tab-pane{
        width: 100%;
      }

      .tab-title-item{
        width: 30%;
      }

      .edit-label-input {
        width: 50%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      .title-span-hide {
        &.h5 {
          font-weight: ${t.typography.weights.extraBold};
          font-size: 1rem;
        }
      }

      .header-title-input {
        margin-left: ${e.polished.rem(4)};
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        background-color: transparent;
        &.h5 {
          input {
            font-weight: ${t.typography.weights.bold};
            font-size: ${e.polished.rem(16)};
          }
        }
        .input-wrapper {
          height: 100%;
          padding: 0;
          background-color: transparent;
          border: 1px solid transparent;
          &:focus-within {
            outline-offset: -1px;
          }

          input {
            border: 1px solid transparent;
            height: 100%;
            min-width: ${e.polished.rem(10)};
            max-width: ${e.polished.rem(140)};
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            color: ${t.colors.palette.dark[600]};
            background-color: transparent;
          }
        }
      }

      .header-title-input-con {
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin-left: ${e.polished.rem(4)};
        svg {
          margin: 0;
        }
        button {
          color: ${t.colors.palette.dark[600]};
          padding-left: ${e.polished.rem(2)};
        }
      }
      .size-placeholder {
        height: ${e.polished.rem(26)};
        display: block;
        opacity: 0;
        padding-left: ${e.polished.rem(8)};
        padding-right: ${e.polished.rem(34)};
        font-size: ${e.polished.rem(16)};
        overflow: hidden;
        max-width: ${e.polished.rem(175)};
      }

      .setting-container {
        overflow-y: auto;
        overflow-x: auto;
        height: 100%;
      }

      .single-setting {
        border-top: 1px solid ${t.colors.palette.light[800]};
      }

      .help-btn {
        color: ${t.colors.palette.light[800]};
      }
      .help-btn:hover {
        color: ${t.colors.black};
      }
    `},this.onLayoutItemSettingChanged=(e,t)=>{(0,i.getAppConfigAction)().editLayoutItemSetting(e,t).exec()},this.onLayoutItemStyleChanged=(t,s)=>{const o=(0,i.getAppConfigAction)(),{layoutId:n,layoutItemId:a}=t,l=o.appConfig.layouts[n].content[a];l.type===e.LayoutItemType.Widget?o.editWidgetProperty(l.widgetId,"style",s).exec():l.type===e.LayoutItemType.Section&&o.editSectionProperty(l.sectionId,"style",s).exec()},this.onLayoutPosChanged=(e,t)=>{(0,i.getAppConfigAction)().editLayoutItemBBox(e,t).exec()},this.getPageType=(e,t)=>{for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.formatMessage=(i,o)=>{const n=Object.assign({},Tt,s.defaultMessages,t,e.defaultMessages);return this.props.intl.formatMessage({id:i,defaultMessage:n[i]},o)},this.handleTitleInputBlur=(e,t,i)=>{this.editTitle(t,e.target.value,i)},this.editTitle=(e,t,s)=>{const o=(0,i.getAppConfigAction)();(t=null==t?void 0:t.trim())?"widget"===s||"block"===s?o.editWidgetProperty(e,"label",t).exec():"section"===s?o.editSectionProperty(e,"label",t).exec():"screen"===s?o.editScreenGroupProperty(e,"label",t).exec():"page"===s?o.editPageProperty(e,"label",t).exec():"dialog"===s&&o.editDialogProperty(e,"label",t).exec():"widget"===s?t=o.appConfig.widgets[e].label:"section"===s?t=o.appConfig.sections[e].label:"screen"===s?t=o.appConfig.screenGroups[e].label:"page"===s&&(t=o.appConfig.pages[e].label)},this.handleKeydown=e=>{"Enter"===e.key&&this.headTitleInput.current&&this.headTitleInput.current.blur()},this.handleIconChange=e=>{const t=this.getDisplay(),{selection:s,currentPageId:o,currentDialogId:n}=this.props,a=(0,i.getAppConfigAction)(),l=a.appConfig;if(t.page)a.editPageProperty(o,"icon",e).exec();else if(t.dialog)a.editDialogProperty(n,"icon",e).exec();else if(t.widget){const t=g.searchUtils.findLayoutItem(l,s);t&&a.editWidgetProperty(t.widgetId,"icon",e).exec()}else if(t.section){const t=g.searchUtils.findLayoutItem(l,s);t&&a.editSectionProperty(t.sectionId,"icon",e).exec()}else if(t.screen){const t=g.searchUtils.findLayoutItem(l,s);t&&a.editScreenGroupProperty(t.screenGroupId,"icon",e).exec()}},this.focusEditTitle=e=>{this.headTitleInput.current&&(this.headTitleInput.current.select(),this.headTitleInput.current.focus())},this.getDisplay=()=>{var t;const{selection:i}=this.props,s=this.getAppConfig(),o={widget:!1,section:!1,screen:!1,layoutItem:!1,placeholder:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1};if(i){const n=g.searchUtils.findLayoutItem(s,i);n?n.type===e.LayoutItemType.Widget?n.widgetId?o.widget=!0:(o.layoutItem=!0,o.placeholder=!0):n.type===e.LayoutItemType.Section&&!1!==(null===(t=i.additionalInfo)||void 0===t?void 0:t.commonSection)?o.section=!0:n.type===e.LayoutItemType.ScreenGroup?o.screen=!0:o.layoutItem=!0:o.noSelection=!0}else this.props.currentDialogId?o.dialog=!0:this.props.currentPageId?(o.page=!0,o.link=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Link,o.folder=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Folder):o.noSelection=!0;return o};const n={titleText:"",headTitleText:"",helpLink:""},{selection:a,appConfig:l,currentPageId:r}=o;if(a){const t=g.searchUtils.findLayoutItem(l,a);t&&(t.type===e.LayoutItemType.Widget?t.widgetId&&(n.headTitleText=l.widgets[t.widgetId].label):t.type===e.LayoutItemType.Section&&(n.headTitleText=l.sections[t.sectionId].label))}else r&&(n.headTitleText=l.pages[r].label);this.state=n}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig}getDefaultPageIcon(e){return i.utils.getDefaultTocPageIcon(e).toString()}getDefaultDialogIcon(){return i.utils.getDefaultTocDialogIcon().toString()}getDefaultWidgetIcon(t){var i;const s=`${null===(i=null==t?void 0:t.manifest)||void 0===i?void 0:i.name}.svg`;return{svg:e.urlUtils.getAbsoluteRootUrl()+t.uri+"icon.svg",properties:{filename:s,inlineSvg:!0}}}onTabChange(t,i,s){i(e.appActions.widgetStatePropChange(s,"settingPanelChange",t))}renderWidgetSettings(t,i,o,a,l){var r,c,p,d,h;let u;const{currentSelectionIcon:m,currentSelectionTitle:f,dispatch:v}=this.props,x=null==o?void 0:o.layouts[null==a?void 0:a.layoutId],w=g.searchUtils.findLayoutItem(o,a),I=o.widgets[w.widgetId],y=I.manifest,S=(null===(r=null==y?void 0:y.publishMessages)||void 0===r?void 0:r.length)>0,b=null!==(p=null===(c=null==y?void 0:y.properties)||void 0===c?void 0:c.canConsumeDataAction)&&void 0!==p&&p;return u=(null==y?void 0:y.properties.hasConfig)&&(null==y?void 0:y.properties.hasConfigInSettingPage)?(0,e.jsx)(s.Tabs,{type:"underline",key:"widget-setting",className:"widget-setting flex-grow-1 w-100",fill:!0,defaultValue:"content",onChange:e=>this.onTabChange(e,v,I.id)},(0,e.jsx)(s.Tab,{id:"content",title:this.formatMessage("content"),className:"tab-title-item"},(0,e.jsx)(n,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:w.widgetId,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),(0,e.jsx)(s.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(Te,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged}))),(S||b)&&(0,e.jsx)(s.Tab,{id:"action",title:this.formatMessage("action"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(Mt,{widgetId:w.widgetId,supportMessageAction:S,canConsumeDataAction:b,formatMessage:this.formatMessage,pageId:e.urlUtils.getAppIdPageIdFromUrl().pageId})))):(0,e.jsx)("div",{className:"h-100"},(0,e.jsx)(Te,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})),u=(0,e.jsx)("div",{css:l&&e.css`z-index: -1`,className:"w-100 h-100 d-flex flex-column widget-setting-tab","data-is-parent":!!l||void 0},(0,e.jsx)(Jt,{headTitle:f,icon:m,customIcon:this.getDefaultWidgetIcon(I),id:I.id,type:x.type===e.LayoutType.FlowLayout?"block":"widget",needIconFlip:null===(h=null===(d=null==I?void 0:I.manifest)||void 0===d?void 0:d.properties)||void 0===h?void 0:h.flipIcon,theme:t,intl:i,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),(0,e.jsx)("div",{style:{flex:1,overflow:"auto"}},u)),u}render(){var t;const o=this.getAppConfig(),{selection:n,browserSizeMode:a,theme:l,intl:r,currentSelectionIcon:c,currentSelectionTitle:p}=this.props;if(!o)return(0,e.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},(0,e.jsx)(I,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode,appTheme:this.props.appTheme}));const d=this.getDisplay();let h;if(d.widget){const i=g.searchUtils.findLayoutItem(o,n);if(o.widgets[null==i?void 0:i.widgetId]){const s=i.widgetId,c=g.searchUtils.getParentWidgetIdOfContent(o,s,e.LayoutItemType.Widget,a),p=o.widgets[c];if(c&&(null===(t=null==p?void 0:p.manifest)||void 0===t?void 0:t.widgetType)!==e.WidgetType.Layout){const t=g.searchUtils.getLayoutInfosHoldcontent(o,e.LayoutItemType.Widget,c,a)[0];h=(0,e.jsx)(e.React.Fragment,null,t&&this.renderWidgetSettings(l,r,o,t,!0),this.renderWidgetSettings(l,r,o,n))}else h=(0,e.jsx)(e.React.Fragment,null,this.renderWidgetSettings(l,r,o,n))}else h=(0,e.jsx)("div",null,this.formatMessage("noSelection"))}if(d.layoutItem){const t=d.placeholder?this.formatMessage("placeholder"):this.formatMessage("daynamicLayout");h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)("h4",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",null,t),d.placeholder&&(0,e.jsx)(Gt,{type:"placeholder",theme:l,intl:r,linkTitle:this.formatMessage("help")})),(0,e.jsx)("div",{className:"flex-grow-1 setting-container"},(0,e.jsx)(Te,{layoutId:n.layoutId,layoutItemId:n.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))}if(d.section){const t=g.searchUtils.findLayoutItem(o,n),a=o.sections[t.sectionId];h=(0,e.jsx)(s.Tabs,{type:"underline",className:"flex-grow-1 section-setting",fill:!0,defaultValue:"content"},(0,e.jsx)(s.Tab,{id:"content",key:"section-setting",title:this.formatMessage("content")},(0,e.jsx)(ue,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.appTheme,dispatch:this.props.dispatch,sectionId:a.id})),(0,e.jsx)(s.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle")},(0,e.jsx)("div",{className:"h-100 setting-container"},(0,e.jsx)(Te,{layoutId:n.layoutId,layoutItemId:n.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))),h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Jt,{headTitle:p,icon:c,customIcon:i.utils.getDefaultSectionIcon().toString(),id:a.id,type:"section",theme:l,intl:r,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),(0,e.jsx)("div",{className:"h-100 setting-container"},h))}if(d.screen){const t=g.searchUtils.findLayoutItem(o,n);h=(0,e.jsx)(Ae,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,screenGroupId:t.screenGroupId}),h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Jt,{headTitle:p,icon:c,customIcon:i.utils.getDefaultSectionIcon().toString(),id:t.screenGroupId,type:"screen",theme:l,intl:r,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),(0,e.jsx)("div",{className:"h-100 setting-container"},h))}if(d.page){h=(0,e.jsx)(I,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.appTheme}),d.link?h=(0,e.jsx)(W,{dispatch:this.props.dispatch,appConfig:o,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):d.folder&&(h=(0,e.jsx)(H,{dispatch:this.props.dispatch,appConfig:o,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));const{currentPageId:t}=this.props,i=o.pages[t];h=i?(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Jt,{hideColorSelector:!0,headTitle:p,icon:c,customIcon:this.getDefaultPageIcon(i),id:i.id,type:"page",theme:l,intl:r,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},h)):null}if(d.dialog){const{currentDialogId:t}=this.props;h=(0,e.jsx)(D,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,dialogId:t,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.appTheme});const i=o.dialogs[t];h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Jt,{hideColorSelector:!0,headTitle:p,icon:c,customIcon:this.getDefaultDialogIcon(),id:i.id,type:"dialog",theme:l,intl:r,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},h))}return d.noSelection&&(h=(0,e.jsx)("div",{className:"h-100"},this.formatMessage("noSelection"))),(0,e.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},(0,e.jsx)("span",{ref:this.spanText,className:"title-span-hide px-1 border h5",style:{width:"auto",position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1}},this.state.headTitleText||""),h)}}_t.mapExtraStateProps=(t,s)=>{var o,n,a,l,r,c,p,d;const h=null===(o=t.appStateInBuilder)||void 0===o?void 0:o.appRuntimeInfo.currentPageId,u=null===(n=t.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.currentDialogId,m=null===(a=t.appStateInBuilder)||void 0===a?void 0:a.appConfig;let f,v;h&&(f=null===(r=null===(l=null==m?void 0:m.pages)||void 0===l?void 0:l[h])||void 0===r?void 0:r.mode,v=null===(p=null===(c=null==m?void 0:m.pages)||void 0===c?void 0:c[h])||void 0===p?void 0:p.maxWidth);const x=null===(d=t.appStateInBuilder)||void 0===d?void 0:d.appRuntimeInfo.selection,{icon:w,title:I}=function(t,s,o,n){var a,l;let r,c;if(t){const s=g.searchUtils.findLayoutItem(n,t);if(s)if(s.type===e.LayoutItemType.Widget){if(s.widgetId){const i=n.widgets[s.widgetId],o=n.layouts[t.layoutId];c=i&&i.label,r=o.type!==e.LayoutType.FlowLayout||(null===(a=s.setting)||void 0===a?void 0:a.isFloating)?i&&i.icon:"string"!=typeof(null==i?void 0:i.icon)&&(null==i?void 0:i.icon)||Vt}}else if(s.type===e.LayoutItemType.Section){if(s.sectionId){const e=n.sections[s.sectionId];c=null==e?void 0:e.label,r=(null==e?void 0:e.icon)||i.utils.getDefaultSectionIcon().toString()}}else if(s.type===e.LayoutItemType.ScreenGroup&&s.screenGroupId){const e=n.screenGroups[s.screenGroupId];c=null==e?void 0:e.label,r=null!==(l=null==e?void 0:e.icon)&&void 0!==l?l:Ht}}else if(n)if(s){const e=n.dialogs[s];e&&(c=e.label,r=e.icon||i.utils.getDefaultTocDialogIcon())}else if(o){const e=n.pages[o];e&&(c=e.label,r=e.icon||i.utils.getDefaultTocPageIcon(e))}return{icon:r,title:c}}(x,u,h,m);return{currentPageId:h,pageMode:f,maxPageWidth:v,widgetsSettingRuntimeInfo:t.builder.widgetsSettingRuntimeInfo,currentDialogId:u,selection:x,browserSizeMode:t.appStateInBuilder&&t.appStateInBuilder.browserSizeMode,appTheme:t.appStateInBuilder&&t.appStateInBuilder.theme,currentSelectionIcon:w,currentSelectionTitle:I}}})(),f})())}}}));